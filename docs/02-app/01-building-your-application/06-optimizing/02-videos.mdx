---
title: Video Optimization
nav_title: Videos
description: Recommendations and best practices for optimizing videos in your Next.js application.
---

# Optimizing Videos in Next.js Applications

Optimizing videos is important to maintain performance and enhance the user experience. This page outlines how to use videos with Next.js applications, showing how to storage and display video files without affecting performance.

## Using `<video>` and `<iframe>`

Videos can be embedded on the page using the HTML **`<video>`** tag for direct video files and **`<iframe>`** for external platform-hosted videos.

### `<video>`

The HTML [`<video>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video) tag is essential for embedding self-hosted or directly served video content, allowing full control over the playback and appearance.

```html
<video width="320" height="240" controls preload="none">
  <source src="/path/to/video.mp4" type="video/mp4" />
  <track
    src="/path/to/captions.vtt"
    kind="subtitles"
    srclang="en"
    label="English"
  />
  Your browser does not support the video tag.
</video>
```

### Common `<video>` Tag Attributes

| Attribute  | Description                                                                                               | Example Value                              |
| ---------- | --------------------------------------------------------------------------------------------------------- | ------------------------------------------ |
| `src`      | Specifies the source of the video file.                                                                   | `<video src="/path/to/video.mp4"></video>` |
| `width`    | Sets the width of the video player.                                                                       | `<video width="320"></video>`              |
| `height`   | Sets the height of the video player.                                                                      | `<video height="240"></video>`             |
| `controls` | If present, it displays the default set of playback controls.                                             | `<video controls></video>`                 |
| `autoplay` | Automatically starts playing the video when the page loads. Note: Autoplay policies vary across browsers. | `<video autoplay></video>`                 |
| `loop`     | Loops the video playback.                                                                                 | `<video loop></video>`                     |
| `muted`    | Mutes the audio by default. Often used with `autoplay`.                                                   | `<video muted></video>`                    |
| `preload`  | Specifies how the video is preloaded. Values: `none`, `metadata`, `auto`.                                 | `<video preload="none"></video>`           |

For a comprehensive list of video attributes, refer to the MDN documentation [here](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video#attributes).

### Accessibility Considerations

- **Fallback Content:** Provide alternative content for browsers that do not support the `<video>` tag.
- **Subtitles or Captions:** Include subtitles or captions for users who are deaf or hard of hearing. Utilize the `<track>` tag with your `<video>` elements to specify caption file sources.
- **Accessible Controls:** Ensure video controls are navigable via keyboard and compatible with screen readers. This can be achieved by using standard HTML5 video controls or by creating custom controls that comply with ARIA (Accessible Rich Internet Applications) standards.

### `<iframe>`

When it comes to embedding videos from external platforms like YouTube or Vimeo, the `<iframe>` tag is the go-to choice in Next.js. This approach simplifies embedding videos from these platforms, as it reduces the load on your server and ensures optimal performance by leveraging the platform's content delivery network.

Example of embedding a YouTube video:

```html
<iframe
  src="https://www.youtube.com/watch?v=gfU1iZnjRZM"
  frameborder="0"
  allowfullscreen
></iframe>
```

### Common `<iframe>` Tag Attributes

| Attribute         | Description                                                            | Example Value                                 |
| ----------------- | ---------------------------------------------------------------------- | --------------------------------------------- |
| `src`             | The URL of the page to embed.                                          | `<iframe src="https://example.com"></iframe>` |
| `width`           | Sets the width of the iframe.                                          | `<iframe width="500"></iframe>`               |
| `height`          | Sets the height of the iframe.                                         | `<iframe height="300"></iframe>`              |
| `frameborder`     | Specifies whether or not to display a border around the iframe.        | `<iframe frameborder="0"></iframe>`           |
| `allowfullscreen` | Allows the iframe content to be displayed in full-screen mode.         | `<iframe allowfullscreen></iframe>`           |
| `sandbox`         | Enables an extra set of restrictions on the content within the iframe. | `<iframe sandbox></iframe>`                   |
| `loading`         | Optimize loading behavior (e.g., lazy loading).                        | `<iframe loading="lazy"></iframe>`            |
| `title`           | Provides a title for the iframe to support accessibility.              | `<iframe title="Description"></iframe>`       |

For a comprehensive list of iframe attributes, refer to the MDN documentation [here](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#attributes).

### Choosing Between `<video>` and `<iframe>`

Deciding whether to use `<video>` or `<iframe>` in your Next.js application depends on the source of your video content and your specific requirements. For self-hosted or direct video files where you need more control over the player's functionality and appearance, the `<video>` tag is ideal. On the other hand, for embedding content from platforms like YouTube or Vimeo, which offer their own set of features and functionalities, `<iframe>` is the preferred choice.

### Displaying Externally Hosted Videos in Next.js

Efficiently displaying videos from platforms like YouTube or Vimeo in Next.js involves combining appropriate embedding techniques with dynamic loading strategies. Using server components with a loading state managed by React Suspense optimizes page load times and enhances user experience. This ensures videos are loaded responsively, adapting to user interactions and network conditions.

1. **Create a Server Component for Video Embedding**

   The first step is to create a [Server Component](https://nextjs.org/docs/app/building-your-application/rendering/server-components) that generates the appropriate iframe for embedding the video. This component will handle the logic of constructing the embed URL based on the video ID and platform, and render the iframe accordingly.

   ```jsx filename="app/ui/video-component.jsx"
   export const async function VideoComponent(){
     const src = await getVideoSrc()

     return <iframe src={src} frameborder="0" allowfullscreen />
   }
   ```

2. **Dynamically Load the Video Component Using React Suspense**

   After creating the server component for video embedding, the next step is to [dynamically load](https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming) this component. [React Suspense](https://react.dev/reference/react/Suspense) is used here to manage the loading state, showing a fallback while the video is being prepared for display.

   ```jsx filename="app/page.jsx"
   import { Suspense } from 'react'
   import { VideoComponent } from '../ui/VideoComponent.server'

   export default function Page() {
     return (
       <section>
         <Suspense fallback={<p>Loading video...</p>}>
           <VideoComponent />
         </Suspense>
         {/* Other content of the page */}
       </section>
     )
   }
   ```

> **Good to know**: When embedding videos from external platforms, consider the following best practices:
>
> - **Responsive Embedding**: Ensure the video embeds are responsive. Use CSS to make the iframe or video player adapt to different screen sizes.
> - **Consider Data Usage**: Implement strategies for loading videos based on network conditions, especially for users with limited data plans.
> - **Accessibility Considerations**: Provide captions or alternative content for accessibility purposes.

By integrating server components with React Suspense for loading, Next.js applications can efficiently handle externally hosted videos. This approach results in quicker load times and a smoother user experience. Such integration boosts both performance and engagement, ensuring an optimal video viewing experience on your site.

## Self-Hosted Video Strategies in Next.js

Self-hosting videos in Next.js may be preferable for several reasons, including control, trust, and customization. This approach is particularly beneficial when external services don't meet your specific needs or when you require complete command over video content.

### Video Storage Considerations

- **Complete Control and Independence**: Self-hosting gives you direct management over your video content, from playback to appearance, ensuring full ownership and control, free from external platform constraints.
- **Customization for Specific Needs**: Ideal for unique requirements, like dynamic background videos, it allows for tailored customization to align with design and functional needs.
- **Performance and Scalability Considerations**: Choose storage solutions that are both high-performing and scalable, to support increasing traffic and content size effectively.
- **Cost and Integration**: Balance the costs of storage and bandwidth with the need for easy integration into your Next.js framework and broader tech ecosystem.

### Example: Using Vercel Blob for Video Hosting

[Vercel Blob](https://vercel.com/docs/storage/vercel-blob) offers an efficient way to self-serve videos, providing a scalable cloud storage solution that's well-integrated with Next.js. Here's how you can host a video using Vercel Blob:

**Step 1: Uploading a Video to Vercel Blob**

Create a server-side function to upload your video:

```ts filename="app/api/upload/route.ts" switcher
import { put } from '@vercel/blob'

export async function POST(request: Request) {
  const { searchParams } = new URL(request.url)
  const filename = searchParams.get('filename')

  const blob = await put(filename, request.body, {
    access: 'public',
  })

  return Response.json(blob)
}
```

```js filename="app/api/upload/route.js" switcher
import { put } from '@vercel/blob'

export async function POST(request) {
  const { searchParams } = new URL(request.url)
  const filename = searchParams.get('filename')

  const blob = await put(filename, request.body, {
    access: 'public',
  })

  return Response.json(blob)
}
```

In this function, you're using the `put` method from `@vercel/blob` to upload a video file, making it publicly accessible.

**Step 2: Displaying the Video in Next.js**

Once the video is uploaded and stored, you can display it in your Next.js application. Here's an example of how to do this using the `<video>` tag and React Suspense for dynamic loading:

```jsx filename="app/page.jsx"
import { Suspense } from 'react';
import { list } from '@vercel/blob';

export default function Page() {
  const fileName = 'my-video.mp4';
  return (
    <Suspense fallback={<p>Loading video...</p>}>
      <VideoComponent videoUrl={fileName} />
    </Suspense>
  );
};

async function VideoComponent({ fileName }) {
  const options = {
    prefix: fileName,
    limit: 1
  };
  const {blobs} = await list(options);
  const videoUrl = blobs[0].url;

  return (
    <video controls preload="none" aria-label="Video player">
      <source src={videoUrl} type="video/mp4">
      Your browser does not support the video tag.
    </video>
  );
};
```

In this approach, the page uses the video’s `@vercel/blob` URL to display the video using the `VideoComponent`. React Suspense is used to handle the loading state, providing a fallback until the video URL is fetched and the video is ready to be displayed.

### Adding Subtitles to Your Video

If you have subtitles for your video, you can easily add them using the `<track>` element inside your `<video>` tag. You can fetch the subtitle file from Vercel Blob in a similar way as the video file. Here's how you can update the VideoComponent to include subtitles

```jsx filename="app/page.jsx"
async function VideoComponent({ fileName }) {
  const options = {
    prefix: fileName,
    limit: 2
  };
  const {blobs} = await list(options);
  const videoUrl = blobs[0].url;
  const captionsUrl = blobs[1].url;

  return (
    <video controls preload="none" aria-label="Video player">
      <source src={videoUrl} type="video/mp4">
      <track
        src={captionsUrl}
        kind="subtitles"
        srclang="en"
        label="English">
      Your browser does not support the video tag.
    </video>
  );
};
```

By following this approach, you can effectively self-serve and integrate videos into your Next.js applications, offering a high degree of control and customization over your video content.

## Video Optimization Techniques

Enhancing performance and user experience involves strategic optimization of video content. Key techniques include video compression, selecting the appropriate format, and implementing adaptive streaming. Here’s a concise overview of the key techniques:

1. **Understanding Video Formats and Codecs**:
   - Select formats like MP4 (widely compatible, efficient), WebM (open-source, optimized for web), and AVI (high quality, larger file size) based on compatibility and quality needs.
   - Choose codecs such as H.264 (high compression, quality) or VP9 (optimized for web streaming) for the best balance between quality and file size.
2. **Video Compression**:
   - Use tools such as [FFmpeg](https://www.ffmpeg.org/) to compress videos, reducing file size while maintaining acceptable quality.
   - Experiment with compression settings to find the ideal balance between quality and file size, considering the intended audience and platform.
3. **Resolution and Bitrate Adjustment**:
   - Adjust resolution and bitrate based on the target platform: lower for mobile and higher for desktop or TV viewing.
   - Lower bitrate and resolution for background videos to save bandwidth without noticeably affecting visual quality.
4. **Content Delivery Networks (CDNs)**:
   - Use a CDN to distribute video content, reducing latency and improving load times globally.
   - CDNs help manage large traffic and enhance user experience by delivering content from the nearest server.
5. **Lazy Loading of Videos**:
   - Implement lazy loading to defer loading of videos until they are in view, improving initial page load times.

By incorporating these techniques, you can significantly enhance the performance and accessibility of videos, leading to a better user experience and increased user engagement.

## Examples

- **Cloudinary Integration**
  - Official documentation and integration guides for using Cloudinary with Next.js can be found [here](https://support.cloudinary.com/hc/en-us/categories/200477762-Client-Libraries-and-Integration-Guides).
  - A specific guide on integrating Cloudinary with Next.js is available [here](https://next.cloudinary.dev/nextjs-13).
- **Mux Video API**
  // and link to muxt next component
  - Mux provides a starter template for creating a video course with Mux and Next.js, available on GitHub [here](https://github.com/muxinc/video-course-starter-kit).
  - Detailed information about embedding a video player in Next.js applications using Mux is available [here](https://www.mux.com/).
  - An example project demonstrating Mux with Next.js can be found [here](https://with-mux-video.vercel.app/).
- **Fastly**
  - Fastly offers solutions for video on demand and streaming media. Learn more about their offerings and how to integrate with Next.js [here](https://www.fastly.com/products/streaming-media/video-on-demand).
