# No Space Left on Device

#### Why This Error Occurred

When executing `next export` (or other file system-affecting commands), there's a possiblity the operation will fail and the output logs will be flooded with messages similar to these:

```
Error occurred prerendering page "/". Read more: https://err.sh/next.js/prerender-error
Error: ENOSPC: no space left on device, write
Exporting (1/2)

Error occurred prerendering page "/404". Read more: https://err.sh/next.js/prerender-error
Error: ENOSPC: no space left on device, write
Exporting (2/2)
Error: Export encountered errors on following paths:
        /
        /404
    at exportApp (X:\foo\node_modules\next\dist\export\index.js:24:1103)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
```

`ENOSPC` is an error message generated by the Linux file system utility `inotify` when it's surpassed its limit to watch changes on files.

#### Possible Ways to Fix It

If using VS Code for development, files unessential for on-change rebuilding can be excluded in settings: `files.watcherExclude`. Example below:

```
"files.watcherExclude": {
    "**/.git/objects/**": true,
    "**/.git/subtree-cache/**": true,
    "**/node_modules/*/**": true
  }
```

Check the documentation for your respective editor/IDE for their equivalent file watcher settings, if applicable.

The default watcher limit is set to `8192`. This can be increased manually on most distros (except Arch-based distros; see the VS Code docs link below for applicable instructions) by editing `/etc/sysctl.conf` to include the following line:

```
fs.inotify.max_user_watches=524288
```

The new value can then be loaded in by running `sudo sysctl -p`. Be advised that each watch utilized consumes `540` bytes of kernel memory, so with the example of `524288` watchers, we'd consume at most roughly 256MB/512MB of 32-bit/64-bit kernel memory.

Check your current limit with:

```
cat /proc/sys/fs/inotify/max_user_watches
```

### Useful Links

[Static HTML Export Documentation](https://nextjs.org/docs/advanced-features/static-html-export)

[VS Code ENOSPC Error on Large Workspaces ](https://code.visualstudio.com/docs/setup/linux#_visual-studio-code-is-unable-to-watch-for-file-changes-in-this-large-workspace-error-enospc)

[Linux Man Page for inotify](https://linux.die.net/man/7/inotify)
