(()=>{var __webpack_modules__={150:(e,t,r)=>{var n=Object.create;var s=Object.defineProperty;var i=Object.defineProperties;var o=Object.getOwnPropertyDescriptor;var a=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertyNames;var u=Object.getOwnPropertySymbols;var l=Object.getPrototypeOf;var h=Object.prototype.hasOwnProperty;var f=Object.prototype.propertyIsEnumerable;var __defNormalProp=(e,t,r)=>t in e?s(e,t,{enumerable:true,configurable:true,writable:true,value:r}):e[t]=r;var __spreadValues=(e,t)=>{for(var r in t||(t={}))if(h.call(t,r))__defNormalProp(e,r,t[r]);if(u)for(var r of u(t)){if(f.call(t,r))__defNormalProp(e,r,t[r])}return e};var __spreadProps=(e,t)=>i(e,a(t));var __name=(e,t)=>s(e,"name",{value:t,configurable:true});var __objRest=(e,t)=>{var r={};for(var n in e)if(h.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&u)for(var n of u(e)){if(t.indexOf(n)<0&&f.call(e,n))r[n]=e[n]}return r};var __esm=(e,t)=>function __init(){return e&&(t=(0,e[c(e)[0]])(e=0)),t};var __commonJS=(e,t)=>function __require(){return t||(0,e[c(e)[0]])((t={exports:{}}).exports,t),t.exports};var __export=(e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:true})};var __copyProps=(e,t,r,n)=>{if(t&&typeof t==="object"||typeof t==="function"){for(let i of c(t))if(!h.call(e,i)&&i!==r)s(e,i,{get:()=>t[i],enumerable:!(n=o(t,i))||n.enumerable})}return e};var __toESM=(e,t,r)=>(r=e!=null?n(l(e)):{},__copyProps(t||!e||!e.__esModule?s(r,"default",{value:e,enumerable:true}):r,e));var __toCommonJS=e=>__copyProps(s({},"__esModule",{value:true}),e);var __privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)};var d=__esm({"<define:process>"(){}});var p=__commonJS({"../../node_modules/.pnpm/tslib@2.4.0/node_modules/tslib/tslib.js"(e,t){d();var r;var n;var s;var i;var o;var a;var c;var u;var l;var h;var f;var p;var y;var g;var m;var v;var E;var S;var w;var A;var b;var _;var C;var B;var k;(function(e){var r=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd){define("tslib",["exports"],(function(t){e(createExporter(r,createExporter(t)))}))}else if(typeof t==="object"&&typeof t.exports==="object"){e(createExporter(r,createExporter(t.exports)))}else{e(createExporter(r))}function createExporter(e,t){if(e!==r){if(typeof Object.create==="function"){Object.defineProperty(e,"__esModule",{value:true})}else{e.__esModule=true}}return function(r,n){return e[r]=t?t(r,n):n}}__name(createExporter,"createExporter")})((function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};r=__name((function(e,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function __(){this.constructor=e}__name(__,"__");e.prototype=r===null?Object.create(r):(__.prototype=r.prototype,new __)}),"__extends");n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s))e[s]=t[s]}return e};s=__name((function(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++){if(t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s]))r[n[s]]=e[n[s]]}return r}),"__rest");i=__name((function(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)if(o=e[a])i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i;return s>3&&i&&Object.defineProperty(t,r,i),i}),"__decorate");o=__name((function(e,t){return function(r,n){t(r,n,e)}}),"__param");a=__name((function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}),"__metadata");c=__name((function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}__name(adopt,"adopt");return new(r||(r=Promise))((function(r,s){function fulfilled(e){try{step(n.next(e))}catch(e){s(e)}}__name(fulfilled,"fulfilled");function rejected(e){try{step(n["throw"](e))}catch(e){s(e)}}__name(rejected,"rejected");function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}__name(step,"step");step((n=n.apply(e,t||[])).next())}))}),"__awaiter");u=__name((function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}__name(verb,"verb");function step(o){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,s&&(i=o[0]&2?s["return"]:o[0]?s["throw"]||((i=s["return"])&&i.call(s),0):s.next)&&!(i=i.call(s,o[1])).done)return i;if(s=0,i)o=[o[0]&2,i.value];switch(o[0]){case 0:case 1:i=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;s=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}if(i[2])r.ops.pop();r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e];s=0}finally{n=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}__name(step,"step")}),"__generator");l=__name((function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))k(t,e,r)}),"__exportStar");k=Object.create?function(e,t,r,n){if(n===void 0)n=r;var s=Object.getOwnPropertyDescriptor(t,r);if(!s||("get"in s?!t.__esModule:s.writable||s.configurable)){s={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,s)}:function(e,t,r,n){if(n===void 0)n=r;e[n]=t[r]};h=__name((function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}),"__values");f=__name((function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{while((t===void 0||t-- >0)&&!(s=n.next()).done)i.push(s.value)}catch(e){o={error:e}}finally{try{if(s&&!s.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return i}),"__read");p=__name((function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}),"__spread");y=__name((function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}),"__spreadArrays");g=__name((function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++){if(i||!(n in t)){if(!i)i=Array.prototype.slice.call(t,0,n);i[n]=t[n]}}return e.concat(i||Array.prototype.slice.call(t))}),"__spreadArray");m=__name((function(e){return this instanceof m?(this.v=e,this):new m(e)}),"__await");v=__name((function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s={},verb("next"),verb("throw"),verb("return"),s[Symbol.asyncIterator]=function(){return this},s;function verb(e){if(n[e])s[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||resume(e,t)}))}}__name(verb,"verb");function resume(e,t){try{step(n[e](t))}catch(e){settle(i[0][3],e)}}__name(resume,"resume");function step(e){e.value instanceof m?Promise.resolve(e.value.v).then(fulfill,reject):settle(i[0][2],e)}__name(step,"step");function fulfill(e){resume("next",e)}__name(fulfill,"fulfill");function reject(e){resume("throw",e)}__name(reject,"reject");function settle(e,t){if(e(t),i.shift(),i.length)resume(i[0][0],i[0][1])}__name(settle,"settle")}),"__asyncGenerator");E=__name((function(e){var t,r;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(n,s){t[n]=e[n]?function(t){return(r=!r)?{value:m(e[n](t)),done:n==="return"}:s?s(t):t}:s}__name(verb,"verb")}),"__asyncDelegator");S=__name((function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof h==="function"?h(e):e[Symbol.iterator](),r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r);function verb(t){r[t]=e[t]&&function(r){return new Promise((function(n,s){r=e[t](r),settle(n,s,r.done,r.value)}))}}__name(verb,"verb");function settle(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}__name(settle,"settle")}),"__asyncValues");w=__name((function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e}),"__makeTemplateObject");var d=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t};A=__name((function(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))k(t,e,r)}d(t,e);return t}),"__importStar");b=__name((function(e){return e&&e.__esModule?e:{default:e}}),"__importDefault");_=__name((function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}),"__classPrivateFieldGet");C=__name((function(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}),"__classPrivateFieldSet");B=__name((function(e,t){if(t===null||typeof t!=="object"&&typeof t!=="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e==="function"?t===e:e.has(t)}),"__classPrivateFieldIn");e("__extends",r);e("__assign",n);e("__rest",s);e("__decorate",i);e("__param",o);e("__metadata",a);e("__awaiter",c);e("__generator",u);e("__exportStar",l);e("__createBinding",k);e("__values",h);e("__read",f);e("__spread",p);e("__spreadArrays",y);e("__spreadArray",g);e("__await",m);e("__asyncGenerator",v);e("__asyncDelegator",E);e("__asyncValues",S);e("__makeTemplateObject",w);e("__importStar",A);e("__importDefault",b);e("__classPrivateFieldGet",_);e("__classPrivateFieldSet",C);e("__classPrivateFieldIn",B)}))}});var y=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/rng.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});e.default=rng;var t=_interopRequireDefault(r(113));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__name(_interopRequireDefault,"_interopRequireDefault");var n=new Uint8Array(256);var s=n.length;function rng(){if(s>n.length-16){t.default.randomFillSync(n);s=0}return n.slice(s,s+=16)}__name(rng,"rng")}});var g=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/regex.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var t=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;e.default=t}});var m=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/validate.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var t=_interopRequireDefault(g());function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__name(_interopRequireDefault,"_interopRequireDefault");function validate2(e){return typeof e==="string"&&t.default.test(e)}__name(validate2,"validate");var r=validate2;e.default=r}});var v=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/stringify.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var t=_interopRequireDefault(m());function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__name(_interopRequireDefault,"_interopRequireDefault");var r=[];for(let e=0;e<256;++e){r.push((e+256).toString(16).substr(1))}function stringify2(e,n=0){const s=(r[e[n+0]]+r[e[n+1]]+r[e[n+2]]+r[e[n+3]]+"-"+r[e[n+4]]+r[e[n+5]]+"-"+r[e[n+6]]+r[e[n+7]]+"-"+r[e[n+8]]+r[e[n+9]]+"-"+r[e[n+10]]+r[e[n+11]]+r[e[n+12]]+r[e[n+13]]+r[e[n+14]]+r[e[n+15]]).toLowerCase();if(!(0,t.default)(s)){throw TypeError("Stringified UUID is invalid")}return s}__name(stringify2,"stringify");var n=stringify2;e.default=n}});var E=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/v1.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var t=_interopRequireDefault(y());var r=_interopRequireDefault(v());function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__name(_interopRequireDefault,"_interopRequireDefault");var n;var s;var i=0;var o=0;function v12(e,a,c){let u=a&&c||0;const l=a||new Array(16);e=e||{};let h=e.node||n;let f=e.clockseq!==void 0?e.clockseq:s;if(h==null||f==null){const r=e.random||(e.rng||t.default)();if(h==null){h=n=[r[0]|1,r[1],r[2],r[3],r[4],r[5]]}if(f==null){f=s=(r[6]<<8|r[7])&16383}}let d=e.msecs!==void 0?e.msecs:Date.now();let p=e.nsecs!==void 0?e.nsecs:o+1;const y=d-i+(p-o)/1e4;if(y<0&&e.clockseq===void 0){f=f+1&16383}if((y<0||d>i)&&e.nsecs===void 0){p=0}if(p>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}i=d;o=p;s=f;d+=122192928e5;const g=((d&268435455)*1e4+p)%4294967296;l[u++]=g>>>24&255;l[u++]=g>>>16&255;l[u++]=g>>>8&255;l[u++]=g&255;const m=d/4294967296*1e4&268435455;l[u++]=m>>>8&255;l[u++]=m&255;l[u++]=m>>>24&15|16;l[u++]=m>>>16&255;l[u++]=f>>>8|128;l[u++]=f&255;for(let e=0;e<6;++e){l[u+e]=h[e]}return a||(0,r.default)(l)}__name(v12,"v1");var a=v12;e.default=a}});var S=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/parse.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var t=_interopRequireDefault(m());function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__name(_interopRequireDefault,"_interopRequireDefault");function parse2(e){if(!(0,t.default)(e)){throw TypeError("Invalid UUID")}let r;const n=new Uint8Array(16);n[0]=(r=parseInt(e.slice(0,8),16))>>>24;n[1]=r>>>16&255;n[2]=r>>>8&255;n[3]=r&255;n[4]=(r=parseInt(e.slice(9,13),16))>>>8;n[5]=r&255;n[6]=(r=parseInt(e.slice(14,18),16))>>>8;n[7]=r&255;n[8]=(r=parseInt(e.slice(19,23),16))>>>8;n[9]=r&255;n[10]=(r=parseInt(e.slice(24,36),16))/1099511627776&255;n[11]=r/4294967296&255;n[12]=r>>>24&255;n[13]=r>>>16&255;n[14]=r>>>8&255;n[15]=r&255;return n}__name(parse2,"parse");var r=parse2;e.default=r}});var w=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/v35.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});e.default=_default;e.URL=e.DNS=void 0;var t=_interopRequireDefault(v());var r=_interopRequireDefault(S());function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__name(_interopRequireDefault,"_interopRequireDefault");function stringToBytes(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r){t.push(e.charCodeAt(r))}return t}__name(stringToBytes,"stringToBytes");var n="6ba7b810-9dad-11d1-80b4-00c04fd430c8";e.DNS=n;var s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";e.URL=s;function _default(e,i,o){function generateUUID(e,n,s,a){if(typeof e==="string"){e=stringToBytes(e)}if(typeof n==="string"){n=(0,r.default)(n)}if(n.length!==16){throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)")}let c=new Uint8Array(16+e.length);c.set(n);c.set(e,n.length);c=o(c);c[6]=c[6]&15|i;c[8]=c[8]&63|128;if(s){a=a||0;for(let e=0;e<16;++e){s[a+e]=c[e]}return s}return(0,t.default)(c)}__name(generateUUID,"generateUUID");try{generateUUID.name=e}catch(e){}generateUUID.DNS=n;generateUUID.URL=s;return generateUUID}__name(_default,"_default")}});var A=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/md5.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var t=_interopRequireDefault(r(113));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__name(_interopRequireDefault,"_interopRequireDefault");function md5(e){if(Array.isArray(e)){e=Buffer.from(e)}else if(typeof e==="string"){e=Buffer.from(e,"utf8")}return t.default.createHash("md5").update(e).digest()}__name(md5,"md5");var n=md5;e.default=n}});var b=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/v3.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var t=_interopRequireDefault(w());var r=_interopRequireDefault(A());function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__name(_interopRequireDefault,"_interopRequireDefault");var n=(0,t.default)("v3",48,r.default);var s=n;e.default=s}});var _=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/v4.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var t=_interopRequireDefault(y());var r=_interopRequireDefault(v());function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__name(_interopRequireDefault,"_interopRequireDefault");function v42(e,n,s){e=e||{};const i=e.random||(e.rng||t.default)();i[6]=i[6]&15|64;i[8]=i[8]&63|128;if(n){s=s||0;for(let e=0;e<16;++e){n[s+e]=i[e]}return n}return(0,r.default)(i)}__name(v42,"v4");var n=v42;e.default=n}});var C=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/sha1.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var t=_interopRequireDefault(r(113));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__name(_interopRequireDefault,"_interopRequireDefault");function sha1(e){if(Array.isArray(e)){e=Buffer.from(e)}else if(typeof e==="string"){e=Buffer.from(e,"utf8")}return t.default.createHash("sha1").update(e).digest()}__name(sha1,"sha1");var n=sha1;e.default=n}});var B=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/v5.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var t=_interopRequireDefault(w());var r=_interopRequireDefault(C());function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__name(_interopRequireDefault,"_interopRequireDefault");var n=(0,t.default)("v5",80,r.default);var s=n;e.default=s}});var k=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/nil.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var t="00000000-0000-0000-0000-000000000000";e.default=t}});var R=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/version.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var t=_interopRequireDefault(m());function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__name(_interopRequireDefault,"_interopRequireDefault");function version3(e){if(!(0,t.default)(e)){throw TypeError("Invalid UUID")}return parseInt(e.substr(14,1),16)}__name(version3,"version");var r=version3;e.default=r}});var N=__commonJS({"../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/index.js"(e){"use strict";d();Object.defineProperty(e,"__esModule",{value:true});Object.defineProperty(e,"v1",{enumerable:true,get:function(){return t.default}});Object.defineProperty(e,"v3",{enumerable:true,get:function(){return r.default}});Object.defineProperty(e,"v4",{enumerable:true,get:function(){return n.default}});Object.defineProperty(e,"v5",{enumerable:true,get:function(){return s.default}});Object.defineProperty(e,"NIL",{enumerable:true,get:function(){return i.default}});Object.defineProperty(e,"version",{enumerable:true,get:function(){return o.default}});Object.defineProperty(e,"validate",{enumerable:true,get:function(){return a.default}});Object.defineProperty(e,"stringify",{enumerable:true,get:function(){return c.default}});Object.defineProperty(e,"parse",{enumerable:true,get:function(){return u.default}});var t=_interopRequireDefault(E());var r=_interopRequireDefault(b());var n=_interopRequireDefault(_());var s=_interopRequireDefault(B());var i=_interopRequireDefault(k());var o=_interopRequireDefault(R());var a=_interopRequireDefault(m());var c=_interopRequireDefault(v());var u=_interopRequireDefault(S());function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__name(_interopRequireDefault,"_interopRequireDefault")}});var x={};__export(x,{Crypto:()=>eo,CryptoKey:()=>Kn,SubtleCrypto:()=>SubtleCrypto3,crypto:()=>to});e.exports=__toCommonJS(x);d();d();d();d();var T="[object ArrayBuffer]";var O=class{static isArrayBuffer(e){return Object.prototype.toString.call(e)===T}static toArrayBuffer(e){if(this.isArrayBuffer(e)){return e}if(e.byteLength===e.buffer.byteLength){return e.buffer}return this.toUint8Array(e).slice().buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t){return e}if(this.isArrayBuffer(e)){return new t(e)}if(this.isArrayBufferView(e)){return new t(e.buffer,e.byteOffset,e.byteLength)}throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const r=O.toUint8Array(e);const n=O.toUint8Array(t);if(r.length!==n.byteLength){return false}for(let e=0;e<r.length;e++){if(r[e]!==n[e]){return false}}return true}static concat(...e){if(Array.isArray(e[0])){const t=e[0];let r=0;for(const e of t){r+=e.byteLength}const n=new Uint8Array(r);let s=0;for(const e of t){const t=this.toUint8Array(e);n.set(t,s);s+=t.length}if(e[1]){return this.toView(n,e[1])}return n.buffer}else{return this.concat(e)}}};__name(O,"BufferSourceConverter");var K=class{static fromString(e){const t=unescape(encodeURIComponent(e));const r=new Uint8Array(t.length);for(let e=0;e<t.length;e++){r[e]=t.charCodeAt(e)}return r.buffer}static toString(e){const t=O.toUint8Array(e);let r="";for(let e=0;e<t.length;e++){r+=String.fromCharCode(t[e])}const n=decodeURIComponent(escape(r));return n}};__name(K,"Utf8Converter");var I=class{static toString(e,t=false){const r=O.toArrayBuffer(e);const n=new DataView(r);let s="";for(let e=0;e<r.byteLength;e+=2){const r=n.getUint16(e,t);s+=String.fromCharCode(r)}return s}static fromString(e,t=false){const r=new ArrayBuffer(e.length*2);const n=new DataView(r);for(let r=0;r<e.length;r++){n.setUint16(r*2,e.charCodeAt(r),t)}return r}};__name(I,"Utf16Converter");var P=class{static isHex(e){return typeof e==="string"&&/^[a-z0-9]+$/i.test(e)}static isBase64(e){return typeof e==="string"&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}static isBase64Url(e){return typeof e==="string"&&/^[a-zA-Z0-9-_]+$/i.test(e)}static ToString(e,t="utf8"){const r=O.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);case"utf16le":return I.toString(r,true);case"utf16":case"utf16be":return I.toString(r);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e){return new ArrayBuffer(0)}switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return I.fromString(e,true);case"utf16":case"utf16be":return I.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const t=O.toUint8Array(e);if(typeof btoa!=="undefined"){const e=this.ToString(t,"binary");return btoa(e)}else{return Buffer.from(t).toString("base64")}}static FromBase64(e){const t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!P.isBase64(t)){throw new TypeError("Argument 'base64Text' is not Base64 encoded")}if(typeof atob!=="undefined"){return this.FromBinary(atob(t))}else{return new Uint8Array(Buffer.from(t,"base64")).buffer}}static FromBase64Url(e){const t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!P.isBase64Url(t)){throw new TypeError("Argument 'base64url' is not Base64Url encoded")}return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=P.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return K.fromString(e);case"utf16":case"utf16be":return I.fromString(e);case"utf16le":case"usc2":return I.fromString(e,true);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=P.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return K.toString(e);case"utf16":case"utf16be":return I.toString(e);case"utf16le":case"usc2":return I.toString(e,true);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){const t=e.length;const r=new Uint8Array(t);for(let n=0;n<t;n++){r[n]=e.charCodeAt(n)}return r.buffer}static ToBinary(e){const t=O.toUint8Array(e);let r="";for(let e=0;e<t.length;e++){r+=String.fromCharCode(t[e])}return r}static ToHex(e){const t=O.toUint8Array(e);const r="";const n=[];const s=t.length;for(let e=0;e<s;e++){const r=t[e].toString(16).padStart(2,"0");n.push(r)}return n.join(r)}static FromHex(e){let t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!P.isHex(t)){throw new TypeError("Argument 'hexString' is not HEX encoded")}if(t.length%2){t=`0${t}`}const r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e=e+2){const n=t.slice(e,e+2);r[e/2]=parseInt(n,16)}return r.buffer}static ToUtf16String(e,t=false){return I.toString(e,t)}static FromUtf16String(e,t=false){return I.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4){for(let r=0;r<t;r++){e+="="}}return e}static formatString(e){return(e===null||e===void 0?void 0:e.replace(/[\n\r\t ]/g,""))||""}};__name(P,"Convert");P.DEFAULT_UTF8_ENCODING="utf8";function combine(...e){const t=e.map((e=>e.byteLength)).reduce(((e,t)=>e+t));const r=new Uint8Array(t);let n=0;e.map((e=>new Uint8Array(e))).forEach((e=>{for(const t of e){r[n++]=t}}));return r.buffer}__name(combine,"combine");d();d();var U={};__export(U,{Any:()=>Dt,BaseBlock:()=>ce,BaseStringBlock:()=>ue,BitString:()=>Ne,BmpString:()=>rt,Boolean:()=>be,CharacterString:()=>bt,Choice:()=>Mt,Constructed:()=>ye,DATE:()=>Nt,DateTime:()=>Kt,Duration:()=>Pt,EndOfContent:()=>ve,Enumerated:()=>Pe,GeneralString:()=>wt,GeneralizedTime:()=>kt,GraphicString:()=>mt,HexBlock:()=>HexBlock,IA5String:()=>yt,Integer:()=>Ke,Null:()=>Se,NumericString:()=>at,ObjectIdentifier:()=>Me,OctetString:()=>Be,Primitive:()=>fe,PrintableString:()=>ut,RawData:()=>qt,RelativeObjectIdentifier:()=>je,Repeated:()=>Ht,Sequence:()=>Fe,Set:()=>Je,TIME:()=>Lt,TeletexString:()=>ht,TimeOfDay:()=>Tt,UTCTime:()=>Ct,UniversalString:()=>it,Utf8String:()=>Ze,ValueBlock:()=>se,VideotexString:()=>dt,ViewWriter:()=>D,VisibleString:()=>Et,compareSchema:()=>compareSchema,fromBER:()=>fromBER,verifySchema:()=>verifySchema});d();d();function utilFromBase(e,t){let r=0;if(e.length===1){return e[0]}for(let n=e.length-1;n>=0;n--){r+=e[e.length-1-n]*Math.pow(2,t*n)}return r}__name(utilFromBase,"utilFromBase");function utilToBase(e,t,r=-1){const n=r;let s=e;let i=0;let o=Math.pow(2,t);for(let r=1;r<8;r++){if(e<o){let e;if(n<0){e=new ArrayBuffer(r);i=r}else{if(n<r){return new ArrayBuffer(0)}e=new ArrayBuffer(n);i=n}const o=new Uint8Array(e);for(let e=r-1;e>=0;e--){const r=Math.pow(2,e*t);o[i-e-1]=Math.floor(s/r);s-=o[i-e-1]*r}return e}o*=Math.pow(2,t)}return new ArrayBuffer(0)}__name(utilToBase,"utilToBase");function utilConcatView(...e){let t=0;let r=0;for(const r of e){t+=r.length}const n=new ArrayBuffer(t);const s=new Uint8Array(n);for(const t of e){s.set(t,r);r+=t.length}return s}__name(utilConcatView,"utilConcatView");function utilDecodeTC(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const t=e[0]===255&&e[1]&128;const r=e[0]===0&&(e[1]&128)===0;if(t||r){this.warnings.push("Needlessly long format")}}const t=new ArrayBuffer(this.valueHex.byteLength);const r=new Uint8Array(t);for(let e=0;e<this.valueHex.byteLength;e++){r[e]=0}r[0]=e[0]&128;const n=utilFromBase(r,8);const s=new ArrayBuffer(this.valueHex.byteLength);const i=new Uint8Array(s);for(let t=0;t<this.valueHex.byteLength;t++){i[t]=e[t]}i[0]&=127;const o=utilFromBase(i,8);return o-n}__name(utilDecodeTC,"utilDecodeTC");function utilEncodeTC(e){const t=e<0?e*-1:e;let r=128;for(let n=1;n<8;n++){if(t<=r){if(e<0){const e=r-t;const s=utilToBase(e,8,n);const i=new Uint8Array(s);i[0]|=128;return s}let s=utilToBase(t,8,n);let i=new Uint8Array(s);if(i[0]&128){const e=s.slice(0);const t=new Uint8Array(e);s=new ArrayBuffer(s.byteLength+1);i=new Uint8Array(s);for(let r=0;r<e.byteLength;r++){i[r+1]=t[r]}i[0]=0}return s}r*=Math.pow(2,8)}return new ArrayBuffer(0)}__name(utilEncodeTC,"utilEncodeTC");function isEqualBuffer(e,t){if(e.byteLength!==t.byteLength){return false}const r=new Uint8Array(e);const n=new Uint8Array(t);for(let e=0;e<r.length;e++){if(r[e]!==n[e]){return false}}return true}__name(isEqualBuffer,"isEqualBuffer");function padNumber(e,t){const r=e.toString(10);if(t<r.length){return""}const n=t-r.length;const s=new Array(n);for(let e=0;e<n;e++){s[e]="0"}const i=s.join("");return i.concat(r)}__name(padNumber,"padNumber");var L=Math.log(2);function assertBigInt(){if(typeof BigInt==="undefined"){throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}}__name(assertBigInt,"assertBigInt");function concat(e){let t=0;let r=0;for(let r=0;r<e.length;r++){const n=e[r];t+=n.byteLength}const n=new Uint8Array(t);for(let t=0;t<e.length;t++){const s=e[t];n.set(new Uint8Array(s),r);r+=s.byteLength}return n.buffer}__name(concat,"concat");function checkBufferParams(e,t,r,n){if(!(t instanceof Uint8Array)){e.error="Wrong parameter: inputBuffer must be 'Uint8Array'";return false}if(!t.byteLength){e.error="Wrong parameter: inputBuffer has zero length";return false}if(r<0){e.error="Wrong parameter: inputOffset less than zero";return false}if(n<0){e.error="Wrong parameter: inputLength less than zero";return false}if(t.byteLength-r-n<0){e.error="End of input reached before message was fully decoded (inconsistent offset and length values)";return false}return true}__name(checkBufferParams,"checkBufferParams");var D=class{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return concat(this.items)}};__name(D,"ViewWriter");var M=[new Uint8Array([1])];var H="0123456789";var q="name";var V="valueHexView";var j="isHexOnly";var G="idBlock";var F="tagClass";var $="tagNumber";var J="isConstructed";var W="fromBER";var z="toBER";var Y="local";var Q="";var X=new ArrayBuffer(0);var Z=new Uint8Array(0);var ee="EndOfContent";var te="OCTET STRING";var re="BIT STRING";function HexBlock(e){var t;return t=__name(class Some extends e{constructor(...e){var t;super(...e);const r=e[0]||{};this.isHexOnly=(t=r.isHexOnly)!==null&&t!==void 0?t:false;this.valueHexView=r.valueHex?O.toUint8Array(r.valueHex):Z}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}fromBER(e,t,r){const n=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!checkBufferParams(this,n,t,r)){return-1}const s=t+r;this.valueHexView=n.subarray(t,s);if(!this.valueHexView.length){this.warnings.push("Zero buffer length");return t}this.blockLength=r;return s}toBER(e=false){if(!this.isHexOnly){this.error="Flag 'isHexOnly' is not set, abort";return X}if(e){return new ArrayBuffer(this.valueHexView.byteLength)}return this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer}toJSON(){return __spreadProps(__spreadValues({},super.toJSON()),{isHexOnly:this.isHexOnly,valueHex:P.ToHex(this.valueHexView)})}},"Some"),t.NAME="hexBlock",t}__name(HexBlock,"HexBlock");var ne=class{constructor({blockLength:e=0,error:t=Q,warnings:r=[],valueBeforeDecode:n=Z}={}){this.blockLength=e;this.error=t;this.warnings=r;this.valueBeforeDecodeView=O.toUint8Array(n)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:P.ToHex(this.valueBeforeDecodeView)}}};__name(ne,"LocalBaseBlock");ne.NAME="baseBlock";var se=class extends ne{fromBER(e,t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}};__name(se,"ValueBlock");se.NAME="valueBlock";var ie=class extends(HexBlock(ne)){constructor({idBlock:e={}}={}){var t,r,n,s;super();if(e){this.isHexOnly=(t=e.isHexOnly)!==null&&t!==void 0?t:false;this.valueHexView=e.valueHex?O.toUint8Array(e.valueHex):Z;this.tagClass=(r=e.tagClass)!==null&&r!==void 0?r:-1;this.tagNumber=(n=e.tagNumber)!==null&&n!==void 0?n:-1;this.isConstructed=(s=e.isConstructed)!==null&&s!==void 0?s:false}else{this.tagClass=-1;this.tagNumber=-1;this.isConstructed=false}}toBER(e=false){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:this.error="Unknown tag class";return X}if(this.isConstructed)t|=32;if(this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31;t|=e;r[0]=t}return r.buffer}if(!this.isHexOnly){const r=utilToBase(this.tagNumber,7);const n=new Uint8Array(r);const s=r.byteLength;const i=new Uint8Array(s+1);i[0]=t|31;if(!e){for(let e=0;e<s-1;e++)i[e+1]=n[e]|128;i[s]=n[s-1]}return i.buffer}const r=new Uint8Array(this.valueHexView.byteLength+1);r[0]=t|31;if(!e){const e=this.valueHexView;for(let t=0;t<e.length-1;t++)r[t+1]=e[t]|128;r[this.valueHexView.byteLength]=e[e.length-1]}return r.buffer}fromBER(e,t,r){const n=O.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}const s=n.subarray(t,t+r);if(s.length===0){this.error="Zero buffer length";return-1}const i=s[0]&192;switch(i){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:this.error="Unknown tag class";return-1}this.isConstructed=(s[0]&32)===32;this.isHexOnly=false;const o=s[0]&31;if(o!==31){this.tagNumber=o;this.blockLength=1}else{let e=1;let t=this.valueHexView=new Uint8Array(255);let r=255;while(s[e]&128){t[e-1]=s[e]&127;e++;if(e>=s.length){this.error="End of input reached before message was fully decoded";return-1}if(e===r){r+=255;const e=new Uint8Array(r);for(let r=0;r<t.length;r++)e[r]=t[r];t=this.valueHexView=new Uint8Array(r)}}this.blockLength=e+1;t[e-1]=s[e]&127;const n=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=t[r];t=this.valueHexView=new Uint8Array(e);t.set(n);if(this.blockLength<=9)this.tagNumber=utilFromBase(t,7);else{this.isHexOnly=true;this.warnings.push("Tag too long, represented as hex-coded")}}if(this.tagClass===1&&this.isConstructed){switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:this.error="Constructed encoding used for primitive type";return-1}}return t+this.blockLength}toJSON(){return __spreadProps(__spreadValues({},super.toJSON()),{tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed})}};__name(ie,"LocalIdentificationBlock");ie.NAME="identificationBlock";var oe=class extends ne{constructor({lenBlock:e={}}={}){var t,r,n;super();this.isIndefiniteForm=(t=e.isIndefiniteForm)!==null&&t!==void 0?t:false;this.longFormUsed=(r=e.longFormUsed)!==null&&r!==void 0?r:false;this.length=(n=e.length)!==null&&n!==void 0?n:0}fromBER(e,t,r){const n=O.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}const s=n.subarray(t,t+r);if(s.length===0){this.error="Zero buffer length";return-1}if(s[0]===255){this.error="Length block 0xFF is reserved by standard";return-1}this.isIndefiniteForm=s[0]===128;if(this.isIndefiniteForm){this.blockLength=1;return t+this.blockLength}this.longFormUsed=!!(s[0]&128);if(this.longFormUsed===false){this.length=s[0];this.blockLength=1;return t+this.blockLength}const i=s[0]&127;if(i>8){this.error="Too big integer";return-1}if(i+1>s.length){this.error="End of input reached before message was fully decoded";return-1}const o=t+1;const a=n.subarray(o,o+i);if(a[i-1]===0)this.warnings.push("Needlessly long encoded length");this.length=utilFromBase(a,8);if(this.longFormUsed&&this.length<=127)this.warnings.push("Unnecessary usage of long length form");this.blockLength=i+1;return t+this.blockLength}toBER(e=false){let t;let r;if(this.length>127)this.longFormUsed=true;if(this.isIndefiniteForm){t=new ArrayBuffer(1);if(e===false){r=new Uint8Array(t);r[0]=128}return t}if(this.longFormUsed){const n=utilToBase(this.length,8);if(n.byteLength>127){this.error="Too big length";return X}t=new ArrayBuffer(n.byteLength+1);if(e)return t;const s=new Uint8Array(n);r=new Uint8Array(t);r[0]=n.byteLength|128;for(let e=0;e<n.byteLength;e++)r[e+1]=s[e];return t}t=new ArrayBuffer(1);if(e===false){r=new Uint8Array(t);r[0]=this.length}return t}toJSON(){return __spreadProps(__spreadValues({},super.toJSON()),{isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length})}};__name(oe,"LocalLengthBlock");oe.NAME="lengthBlock";var ae={};var ce=class extends ne{constructor(e={},t){var r=e,{name:n=Q,optional:s=false,primitiveSchema:i}=r,o=__objRest(r,["name","optional","primitiveSchema"]);super(o);this.name=n;this.optional=s;if(i){this.primitiveSchema=i}this.idBlock=new ie(o);this.lenBlock=new oe(o);this.valueBlock=t?new t(o):new se(o)}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}toBER(e,t){const r=t||new D;if(!t){prepareIndefiniteForm(this)}const n=this.idBlock.toBER(e);r.write(n);if(this.lenBlock.isIndefiniteForm){r.write(new Uint8Array([128]).buffer);this.valueBlock.toBER(e,r);r.write(new ArrayBuffer(2))}else{const t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;const n=this.lenBlock.toBER(e);r.write(n);r.write(t)}if(!t){return r.final()}return X}toJSON(){const e=__spreadProps(__spreadValues({},super.toJSON()),{idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional});if(this.primitiveSchema)e.primitiveSchema=this.primitiveSchema.toJSON();return e}toString(e="ascii"){if(e==="ascii"){return this.onAsciiEncoding()}return P.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${P.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e){return true}if(!(e instanceof this.constructor)){return false}const t=this.toBER();const r=e.toBER();return isEqualBuffer(t,r)}};__name(ce,"BaseBlock");ce.NAME="BaseBlock";function prepareIndefiniteForm(e){if(e instanceof ae.Constructed){for(const t of e.valueBlock.value){if(prepareIndefiniteForm(t)){e.lenBlock.isIndefiniteForm=true}}}return!!e.lenBlock.isIndefiniteForm}__name(prepareIndefiniteForm,"prepareIndefiniteForm");var ue=class extends ce{constructor(e={},t){var r=e,{value:n=Q}=r,s=__objRest(r,["value"]);super(s,t);if(n){this.fromString(n)}}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}this.fromBuffer(this.valueBlock.valueHexView);if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}};__name(ue,"BaseStringBlock");ue.NAME="BaseStringBlock";var le=class extends(HexBlock(se)){constructor(e={}){var t=e,{isHexOnly:r=true}=t,n=__objRest(t,["isHexOnly"]);super(n);this.isHexOnly=r}};__name(le,"LocalPrimitiveValueBlock");le.NAME="PrimitiveValueBlock";var he;var fe=class extends ce{constructor(e={}){super(e,le);this.idBlock.isConstructed=false}};__name(fe,"Primitive");he=fe;(()=>{ae.Primitive=he})();fe.NAME="PRIMITIVE";function localChangeType(e,t){if(e instanceof t){return e}const r=new t;r.idBlock=e.idBlock;r.lenBlock=e.lenBlock;r.warnings=e.warnings;r.valueBeforeDecodeView=e.valueBeforeDecodeView;return r}__name(localChangeType,"localChangeType");function localFromBER(e,t=0,r=e.length){const n=t;let s=new ce({},se);const i=new ne;if(!checkBufferParams(i,e,t,r)){s.error=i.error;return{offset:-1,result:s}}const o=e.subarray(t,t+r);if(!o.length){s.error="Zero buffer length";return{offset:-1,result:s}}let a=s.idBlock.fromBER(e,t,r);if(s.idBlock.warnings.length){s.warnings.concat(s.idBlock.warnings)}if(a===-1){s.error=s.idBlock.error;return{offset:-1,result:s}}t=a;r-=s.idBlock.blockLength;a=s.lenBlock.fromBER(e,t,r);if(s.lenBlock.warnings.length){s.warnings.concat(s.lenBlock.warnings)}if(a===-1){s.error=s.lenBlock.error;return{offset:-1,result:s}}t=a;r-=s.lenBlock.blockLength;if(!s.idBlock.isConstructed&&s.lenBlock.isIndefiniteForm){s.error="Indefinite length form used for primitive encoding form";return{offset:-1,result:s}}let c=ce;switch(s.idBlock.tagClass){case 1:if(s.idBlock.tagNumber>=37&&s.idBlock.isHexOnly===false){s.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard";return{offset:-1,result:s}}switch(s.idBlock.tagNumber){case 0:if(s.idBlock.isConstructed&&s.lenBlock.length>0){s.error="Type [UNIVERSAL 0] is reserved";return{offset:-1,result:s}}c=ae.EndOfContent;break;case 1:c=ae.Boolean;break;case 2:c=ae.Integer;break;case 3:c=ae.BitString;break;case 4:c=ae.OctetString;break;case 5:c=ae.Null;break;case 6:c=ae.ObjectIdentifier;break;case 10:c=ae.Enumerated;break;case 12:c=ae.Utf8String;break;case 13:c=ae.RelativeObjectIdentifier;break;case 14:c=ae.TIME;break;case 15:s.error="[UNIVERSAL 15] is reserved by ASN.1 standard";return{offset:-1,result:s};case 16:c=ae.Sequence;break;case 17:c=ae.Set;break;case 18:c=ae.NumericString;break;case 19:c=ae.PrintableString;break;case 20:c=ae.TeletexString;break;case 21:c=ae.VideotexString;break;case 22:c=ae.IA5String;break;case 23:c=ae.UTCTime;break;case 24:c=ae.GeneralizedTime;break;case 25:c=ae.GraphicString;break;case 26:c=ae.VisibleString;break;case 27:c=ae.GeneralString;break;case 28:c=ae.UniversalString;break;case 29:c=ae.CharacterString;break;case 30:c=ae.BmpString;break;case 31:c=ae.DATE;break;case 32:c=ae.TimeOfDay;break;case 33:c=ae.DateTime;break;case 34:c=ae.Duration;break;default:{const e=s.idBlock.isConstructed?new ae.Constructed:new ae.Primitive;e.idBlock=s.idBlock;e.lenBlock=s.lenBlock;e.warnings=s.warnings;s=e}}break;case 2:case 3:case 4:default:{c=s.idBlock.isConstructed?ae.Constructed:ae.Primitive}}s=localChangeType(s,c);a=s.fromBER(e,t,s.lenBlock.isIndefiniteForm?r:s.lenBlock.length);s.valueBeforeDecodeView=e.subarray(n,n+s.blockLength);return{offset:a,result:s}}__name(localFromBER,"localFromBER");function fromBER(e){if(!e.byteLength){const e=new ce({},se);e.error="Input buffer has zero length";return{offset:-1,result:e}}return localFromBER(O.toUint8Array(e).slice(),0,e.byteLength)}__name(fromBER,"fromBER");function checkLen(e,t){if(e){return 1}return t}__name(checkLen,"checkLen");var de=class extends se{constructor(e={}){var t=e,{value:r=[],isIndefiniteForm:n=false}=t,s=__objRest(t,["value","isIndefiniteForm"]);super(s);this.value=r;this.isIndefiniteForm=n}fromBER(e,t,r){const n=O.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}this.valueBeforeDecodeView=n.subarray(t,t+r);if(this.valueBeforeDecodeView.length===0){this.warnings.push("Zero buffer length");return t}let s=t;while(checkLen(this.isIndefiniteForm,r)>0){const e=localFromBER(n,s,r);if(e.offset===-1){this.error=e.result.error;this.warnings.concat(e.result.warnings);return-1}s=e.offset;this.blockLength+=e.result.blockLength;r-=e.result.blockLength;this.value.push(e.result);if(this.isIndefiniteForm&&e.result.constructor.NAME===ee){break}}if(this.isIndefiniteForm){if(this.value[this.value.length-1].constructor.NAME===ee){this.value.pop()}else{this.warnings.push("No EndOfContent block encoded")}}return s}toBER(e,t){const r=t||new D;for(let t=0;t<this.value.length;t++){this.value[t].toBER(e,r)}if(!t){return r.final()}return X}toJSON(){const e=__spreadProps(__spreadValues({},super.toJSON()),{isIndefiniteForm:this.isIndefiniteForm,value:[]});for(const t of this.value){e.value.push(t.toJSON())}return e}};__name(de,"LocalConstructedValueBlock");de.NAME="ConstructedValueBlock";var pe;var ye=class extends ce{constructor(e={}){super(e,de);this.idBlock.isConstructed=true}fromBER(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}onAsciiEncoding(){const e=[];for(const t of this.valueBlock.value){e.push(t.toString("ascii").split("\n").map((e=>`  ${e}`)).join("\n"))}const t=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :\n${e.join("\n")}`:`${t} :`}};__name(ye,"Constructed");pe=ye;(()=>{ae.Constructed=pe})();ye.NAME="CONSTRUCTED";var ge=class extends se{fromBER(e,t,r){return t}toBER(e){return X}};__name(ge,"LocalEndOfContentValueBlock");ge.override="EndOfContentValueBlock";var me;var ve=class extends ce{constructor(e={}){super(e,ge);this.idBlock.tagClass=1;this.idBlock.tagNumber=0}};__name(ve,"EndOfContent");me=ve;(()=>{ae.EndOfContent=me})();ve.NAME=ee;var Ee;var Se=class extends ce{constructor(e={}){super(e,se);this.idBlock.tagClass=1;this.idBlock.tagNumber=5}fromBER(e,t,r){if(this.lenBlock.length>0)this.warnings.push("Non-zero length of value block for Null type");if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;this.blockLength+=r;if(t+r>e.byteLength){this.error="End of input reached before message was fully decoded (inconsistent offset and length values)";return-1}return t+r}toBER(e,t){const r=new ArrayBuffer(2);if(!e){const e=new Uint8Array(r);e[0]=5;e[1]=0}if(t){t.write(r)}return r}onAsciiEncoding(){return`${this.constructor.NAME}`}};__name(Se,"Null");Ee=Se;(()=>{ae.Null=Ee})();Se.NAME="NULL";var we=class extends(HexBlock(se)){constructor(e={}){var t=e,{value:r}=t,n=__objRest(t,["value"]);super(n);if(n.valueHex){this.valueHexView=O.toUint8Array(n.valueHex)}else{this.valueHexView=new Uint8Array(1)}if(r){this.value=r}}get value(){for(const e of this.valueHexView){if(e>0){return true}}return false}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,r){const n=O.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}this.valueHexView=n.subarray(t,t+r);if(r>1)this.warnings.push("Boolean value encoded in more then 1 octet");this.isHexOnly=true;utilDecodeTC.call(this);this.blockLength=r;return t+r}toBER(){return this.valueHexView.slice()}toJSON(){return __spreadProps(__spreadValues({},super.toJSON()),{value:this.value})}};__name(we,"LocalBooleanValueBlock");we.NAME="BooleanValueBlock";var Ae;var be=class extends ce{constructor(e={}){super(e,we);this.idBlock.tagClass=1;this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};__name(be,"Boolean");Ae=be;(()=>{ae.Boolean=Ae})();be.NAME="BOOLEAN";var _e=class extends(HexBlock(de)){constructor(e={}){var t=e,{isConstructed:r=false}=t,n=__objRest(t,["isConstructed"]);super(n);this.isConstructed=r}fromBER(e,t,r){let n=0;if(this.isConstructed){this.isHexOnly=false;n=de.prototype.fromBER.call(this,e,t,r);if(n===-1)return n;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.NAME;if(t===ee){if(this.isIndefiniteForm)break;else{this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only";return-1}}if(t!==te){this.error="OCTET STRING may consists of OCTET STRINGs only";return-1}}}else{this.isHexOnly=true;n=super.fromBER(e,t,r);this.blockLength=r}return n}toBER(e,t){if(this.isConstructed)return de.prototype.toBER.call(this,e,t);return e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return __spreadProps(__spreadValues({},super.toJSON()),{isConstructed:this.isConstructed})}};__name(_e,"LocalOctetStringValueBlock");_e.NAME="OctetStringValueBlock";var Ce;var Be=class extends ce{constructor(e={}){var t=e,{idBlock:r={},lenBlock:n={}}=t,s=__objRest(t,["idBlock","lenBlock"]);var i,o;(i=s.isConstructed)!==null&&i!==void 0?i:s.isConstructed=!!((o=s.value)===null||o===void 0?void 0:o.length);super(__spreadValues({idBlock:__spreadValues({isConstructed:s.isConstructed},r),lenBlock:__spreadProps(__spreadValues({},n),{isIndefiniteForm:!!s.isIndefiniteForm})},s),_e);this.idBlock.tagClass=1;this.idBlock.tagNumber=4}fromBER(e,t,r){this.valueBlock.isConstructed=this.idBlock.isConstructed;this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;if(r===0){if(this.idBlock.error.length===0)this.blockLength+=this.idBlock.blockLength;if(this.lenBlock.error.length===0)this.blockLength+=this.lenBlock.blockLength;return t}if(!this.valueBlock.isConstructed){const n=e instanceof ArrayBuffer?new Uint8Array(e):e;const s=n.subarray(t,t+r);try{if(s.byteLength){const e=localFromBER(s,0,s.byteLength);if(e.offset!==-1&&e.offset===r){this.valueBlock.value=[e.result]}}}catch(e){}}return super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length){return ye.prototype.onAsciiEncoding.call(this)}return`${this.constructor.NAME} : ${P.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed){return this.valueBlock.valueHexView.slice().buffer}const e=[];for(const t of this.valueBlock.value){if(t instanceof Be){e.push(t.valueBlock.valueHexView)}}return O.concat(e)}};__name(Be,"OctetString");Ce=Be;(()=>{ae.OctetString=Ce})();Be.NAME=te;var ke=class extends(HexBlock(de)){constructor(e={}){var t=e,{unusedBits:r=0,isConstructed:n=false}=t,s=__objRest(t,["unusedBits","isConstructed"]);super(s);this.unusedBits=r;this.isConstructed=n;this.blockLength=this.valueHexView.byteLength}fromBER(e,t,r){if(!r){return t}let n=-1;if(this.isConstructed){n=de.prototype.fromBER.call(this,e,t,r);if(n===-1)return n;for(const e of this.value){const t=e.constructor.NAME;if(t===ee){if(this.isIndefiniteForm)break;else{this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only";return-1}}if(t!==re){this.error="BIT STRING may consists of BIT STRINGs only";return-1}const r=e.valueBlock;if(this.unusedBits>0&&r.unusedBits>0){this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only';return-1}this.unusedBits=r.unusedBits}return n}const s=O.toUint8Array(e);if(!checkBufferParams(this,s,t,r)){return-1}const i=s.subarray(t,t+r);this.unusedBits=i[0];if(this.unusedBits>7){this.error="Unused bits for BitString must be in range 0-7";return-1}if(!this.unusedBits){const e=i.subarray(1);try{if(e.byteLength){const t=localFromBER(e,0,e.byteLength);if(t.offset!==-1&&t.offset===r-1){this.value=[t.result]}}}catch(e){}}this.valueHexView=i.subarray(1);this.blockLength=i.length;return t+r}toBER(e,t){if(this.isConstructed){return de.prototype.toBER.call(this,e,t)}if(e){return new ArrayBuffer(this.valueHexView.byteLength+1)}if(!this.valueHexView.byteLength){return X}const r=new Uint8Array(this.valueHexView.length+1);r[0]=this.unusedBits;r.set(this.valueHexView,1);return r.buffer}toJSON(){return __spreadProps(__spreadValues({},super.toJSON()),{unusedBits:this.unusedBits,isConstructed:this.isConstructed})}};__name(ke,"LocalBitStringValueBlock");ke.NAME="BitStringValueBlock";var Re;var Ne=class extends ce{constructor(e={}){var t=e,{idBlock:r={},lenBlock:n={}}=t,s=__objRest(t,["idBlock","lenBlock"]);var i,o;(i=s.isConstructed)!==null&&i!==void 0?i:s.isConstructed=!!((o=s.value)===null||o===void 0?void 0:o.length);super(__spreadValues({idBlock:__spreadValues({isConstructed:s.isConstructed},r),lenBlock:__spreadProps(__spreadValues({},n),{isIndefiniteForm:!!s.isIndefiniteForm})},s),ke);this.idBlock.tagClass=1;this.idBlock.tagNumber=3}fromBER(e,t,r){this.valueBlock.isConstructed=this.idBlock.isConstructed;this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;return super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length){return ye.prototype.onAsciiEncoding.call(this)}else{const e=[];const t=this.valueBlock.valueHexView;for(const r of t){e.push(r.toString(2).padStart(8,"0"))}const r=e.join("");return`${this.constructor.NAME} : ${r.substring(0,r.length-this.valueBlock.unusedBits)}`}}};__name(Ne,"BitString");Re=Ne;(()=>{ae.BitString=Re})();Ne.NAME=re;var xe;function viewAdd(e,t){const r=new Uint8Array([0]);const n=new Uint8Array(e);const s=new Uint8Array(t);let i=n.slice(0);const o=i.length-1;const a=s.slice(0);const c=a.length-1;let u=0;const l=c<o?o:c;let h=0;for(let e=l;e>=0;e--,h++){switch(true){case h<a.length:u=i[o-h]+a[c-h]+r[0];break;default:u=i[o-h]+r[0]}r[0]=u/10;switch(true){case h>=i.length:i=utilConcatView(new Uint8Array([u%10]),i);break;default:i[o-h]=u%10}}if(r[0]>0)i=utilConcatView(r,i);return i}__name(viewAdd,"viewAdd");function power2(e){if(e>=M.length){for(let t=M.length;t<=e;t++){const e=new Uint8Array([0]);let r=M[t-1].slice(0);for(let t=r.length-1;t>=0;t--){const n=new Uint8Array([(r[t]<<1)+e[0]]);e[0]=n[0]/10;r[t]=n[0]%10}if(e[0]>0)r=utilConcatView(e,r);M.push(r)}}return M[e]}__name(power2,"power2");function viewSub(e,t){let r=0;const n=new Uint8Array(e);const s=new Uint8Array(t);const i=n.slice(0);const o=i.length-1;const a=s.slice(0);const c=a.length-1;let u;let l=0;for(let e=c;e>=0;e--,l++){u=i[o-l]-a[c-l]-r;switch(true){case u<0:r=1;i[o-l]=u+10;break;default:r=0;i[o-l]=u}}if(r>0){for(let e=o-c+1;e>=0;e--,l++){u=i[o-l]-r;if(u<0){r=1;i[o-l]=u+10}else{r=0;i[o-l]=u;break}}}return i.slice()}__name(viewSub,"viewSub");var Te=class extends(HexBlock(se)){constructor(e={}){var t=e,{value:r}=t,n=__objRest(t,["value"]);super(n);this._valueDec=0;if(n.valueHex){this.setValueHex()}if(r!==void 0){this.valueDec=r}}setValueHex(){if(this.valueHexView.length>=4){this.warnings.push("Too big Integer for decoding, hex only");this.isHexOnly=true;this._valueDec=0}else{this.isHexOnly=false;if(this.valueHexView.length>0){this._valueDec=utilDecodeTC.call(this)}}}set valueDec(e){this._valueDec=e;this.isHexOnly=false;this.valueHexView=new Uint8Array(utilEncodeTC(e))}get valueDec(){return this._valueDec}fromDER(e,t,r,n=0){const s=this.fromBER(e,t,r);if(s===-1)return s;const i=this.valueHexView;if(i[0]===0&&(i[1]&128)!==0){this.valueHexView=i.subarray(1)}else{if(n!==0){if(i.length<n){if(n-i.length>1)n=i.length+1;this.valueHexView=i.subarray(n-i.length)}}}return s}toDER(e=false){const t=this.valueHexView;switch(true){case(t[0]&128)!==0:{const e=new Uint8Array(this.valueHexView.length+1);e[0]=0;e.set(t,1);this.valueHexView=e}break;case t[0]===0&&(t[1]&128)===0:{this.valueHexView=this.valueHexView.subarray(1)}break}return this.toBER(e)}fromBER(e,t,r){const n=super.fromBER(e,t,r);if(n===-1){return n}this.setValueHex();return n}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return __spreadProps(__spreadValues({},super.toJSON()),{valueDec:this.valueDec})}toString(){const e=this.valueHexView.length*8-1;let t=new Uint8Array(this.valueHexView.length*8/3);let r=0;let n;const s=this.valueHexView;let i="";let o=false;for(let o=s.byteLength-1;o>=0;o--){n=s[o];for(let s=0;s<8;s++){if((n&1)===1){switch(r){case e:t=viewSub(power2(r),t);i="-";break;default:t=viewAdd(t,power2(r))}}r++;n>>=1}}for(let e=0;e<t.length;e++){if(t[e])o=true;if(o)i+=H.charAt(t[e])}if(o===false)i+=H.charAt(0);return i}};__name(Te,"LocalIntegerValueBlock");xe=Te;Te.NAME="IntegerValueBlock";(()=>{Object.defineProperty(xe.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e);this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}})})();var Oe;var Ke=class extends ce{constructor(e={}){super(e,Te);this.idBlock.tagClass=1;this.idBlock.tagNumber=2}toBigInt(){assertBigInt();return BigInt(this.valueBlock.toString())}static fromBigInt(e){assertBigInt();const t=BigInt(e);const r=new D;const n=t.toString(16).replace(/^-/,"");const s=new Uint8Array(P.FromHex(n));if(t<0){const e=new Uint8Array(s.length+(s[0]&128?1:0));e[0]|=128;const n=BigInt(`0x${P.ToHex(e)}`);const i=n+t;const o=O.toUint8Array(P.FromHex(i.toString(16)));o[0]|=128;r.write(o)}else{if(s[0]&128){r.write(new Uint8Array([0]))}r.write(s)}const i=new Ke({valueHex:r.final()});return i}convertToDER(){const e=new Ke({valueHex:this.valueBlock.valueHexView});e.valueBlock.toDER();return e}convertFromDER(){return new Ke({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}};__name(Ke,"Integer");Oe=Ke;(()=>{ae.Integer=Oe})();Ke.NAME="INTEGER";var Ie;var Pe=class extends Ke{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=10}};__name(Pe,"Enumerated");Ie=Pe;(()=>{ae.Enumerated=Ie})();Pe.NAME="ENUMERATED";var Ue=class extends(HexBlock(se)){constructor(e={}){var t=e,{valueDec:r=-1,isFirstSid:n=false}=t,s=__objRest(t,["valueDec","isFirstSid"]);super(s);this.valueDec=r;this.isFirstSid=n}fromBER(e,t,r){if(!r){return t}const n=O.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}const s=n.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r;e++){this.valueHexView[e]=s[e]&127;this.blockLength++;if((s[e]&128)===0)break}const i=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++){i[e]=this.valueHexView[e]}this.valueHexView=i;if((s[this.blockLength-1]&128)!==0){this.error="End of input reached before message was fully decoded";return-1}if(this.valueHexView[0]===0)this.warnings.push("Needlessly long format of SID encoding");if(this.blockLength<=8)this.valueDec=utilFromBase(this.valueHexView,7);else{this.isHexOnly=true;this.warnings.push("Too big SID for decoding, hex only")}return t+this.blockLength}set valueBigInt(e){assertBigInt();let t=BigInt(e).toString(2);while(t.length%7){t="0"+t}const r=new Uint8Array(t.length/7);for(let e=0;e<r.length;e++){r[e]=parseInt(t.slice(e*7,e*7+7),2)+(e+1<r.length?128:0)}this.fromBER(r.buffer,0,r.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView;const r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=t[e]|128;r[this.blockLength-1]=t[this.blockLength-1];return r.buffer}const t=utilToBase(this.valueDec,7);if(t.byteLength===0){this.error="Error during encoding SID value";return X}const r=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t);const n=t.byteLength-1;for(let t=0;t<n;t++)r[t]=e[t]|128;r[n]=e[n]}return r}toString(){let e="";if(this.isHexOnly)e=P.ToHex(this.valueHexView);else{if(this.isFirstSid){let t=this.valueDec;if(this.valueDec<=39)e="0.";else{if(this.valueDec<=79){e="1.";t-=40}else{e="2.";t-=80}}e+=t.toString()}else e=this.valueDec.toString()}return e}toJSON(){return __spreadProps(__spreadValues({},super.toJSON()),{valueDec:this.valueDec,isFirstSid:this.isFirstSid})}};__name(Ue,"LocalSidValueBlock");Ue.NAME="sidBlock";var Le=class extends se{constructor(e={}){var t=e,{value:r=Q}=t,n=__objRest(t,["value"]);super(n);this.value=[];if(r){this.fromString(r)}}fromBER(e,t,r){let n=t;while(r>0){const t=new Ue;n=t.fromBER(e,n,r);if(n===-1){this.blockLength=0;this.error=t.error;return n}if(this.value.length===0)t.isFirstSid=true;this.blockLength+=t.blockLength;r-=t.blockLength;this.value.push(t)}return n}toBER(e){const t=[];for(let r=0;r<this.value.length;r++){const n=this.value[r].toBER(e);if(n.byteLength===0){this.error=this.value[r].error;return X}t.push(n)}return concat(t)}fromString(e){this.value=[];let t=0;let r=0;let n="";let s=false;do{r=e.indexOf(".",t);if(r===-1)n=e.substring(t);else n=e.substring(t,r);t=r+1;if(s){const e=this.value[0];let t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:this.value=[];return}const r=parseInt(n,10);if(isNaN(r))return;e.valueDec=r+t;s=false}else{const e=new Ue;if(n>Number.MAX_SAFE_INTEGER){assertBigInt();const t=BigInt(n);e.valueBigInt=t}else{e.valueDec=parseInt(n,10);if(isNaN(e.valueDec))return}if(!this.value.length){e.isFirstSid=true;s=true}this.value.push(e)}}while(r!==-1)}toString(){let e="";let t=false;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();if(r!==0)e=`${e}.`;if(t){n=`{${n}}`;if(this.value[r].isFirstSid)e=`2.{${n} - 80}`;else e+=n}else e+=n}return e}toJSON(){const e=__spreadProps(__spreadValues({},super.toJSON()),{value:this.toString(),sidArray:[]});for(let t=0;t<this.value.length;t++){e.sidArray.push(this.value[t].toJSON())}return e}};__name(Le,"LocalObjectIdentifierValueBlock");Le.NAME="ObjectIdentifierValueBlock";var De;var Me=class extends ce{constructor(e={}){super(e,Le);this.idBlock.tagClass=1;this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return __spreadProps(__spreadValues({},super.toJSON()),{value:this.getValue()})}};__name(Me,"ObjectIdentifier");De=Me;(()=>{ae.ObjectIdentifier=De})();Me.NAME="OBJECT IDENTIFIER";var He=class extends(HexBlock(ne)){constructor(e={}){var t=e,{valueDec:r=0}=t,n=__objRest(t,["valueDec"]);super(n);this.valueDec=r}fromBER(e,t,r){if(r===0)return t;const n=O.toUint8Array(e);if(!checkBufferParams(this,n,t,r))return-1;const s=n.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r;e++){this.valueHexView[e]=s[e]&127;this.blockLength++;if((s[e]&128)===0)break}const i=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)i[e]=this.valueHexView[e];this.valueHexView=i;if((s[this.blockLength-1]&128)!==0){this.error="End of input reached before message was fully decoded";return-1}if(this.valueHexView[0]===0)this.warnings.push("Needlessly long format of SID encoding");if(this.blockLength<=8)this.valueDec=utilFromBase(this.valueHexView,7);else{this.isHexOnly=true;this.warnings.push("Too big SID for decoding, hex only")}return t+this.blockLength}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView;const r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=t[e]|128;r[this.blockLength-1]=t[this.blockLength-1];return r.buffer}const t=utilToBase(this.valueDec,7);if(t.byteLength===0){this.error="Error during encoding SID value";return X}const r=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t);const n=t.byteLength-1;for(let t=0;t<n;t++)r[t]=e[t]|128;r[n]=e[n]}return r.buffer}toString(){let e="";if(this.isHexOnly)e=P.ToHex(this.valueHexView);else{e=this.valueDec.toString()}return e}toJSON(){return __spreadProps(__spreadValues({},super.toJSON()),{valueDec:this.valueDec})}};__name(He,"LocalRelativeSidValueBlock");He.NAME="relativeSidBlock";var qe=class extends se{constructor(e={}){var t=e,{value:r=Q}=t,n=__objRest(t,["value"]);super(n);this.value=[];if(r){this.fromString(r)}}fromBER(e,t,r){let n=t;while(r>0){const t=new He;n=t.fromBER(e,n,r);if(n===-1){this.blockLength=0;this.error=t.error;return n}this.blockLength+=t.blockLength;r-=t.blockLength;this.value.push(t)}return n}toBER(e,t){const r=[];for(let t=0;t<this.value.length;t++){const n=this.value[t].toBER(e);if(n.byteLength===0){this.error=this.value[t].error;return X}r.push(n)}return concat(r)}fromString(e){this.value=[];let t=0;let r=0;let n="";do{r=e.indexOf(".",t);if(r===-1)n=e.substring(t);else n=e.substring(t,r);t=r+1;const s=new He;s.valueDec=parseInt(n,10);if(isNaN(s.valueDec))return true;this.value.push(s)}while(r!==-1);return true}toString(){let e="";let t=false;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();if(r!==0)e=`${e}.`;if(t){n=`{${n}}`;e+=n}else e+=n}return e}toJSON(){const e=__spreadProps(__spreadValues({},super.toJSON()),{value:this.toString(),sidArray:[]});for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}};__name(qe,"LocalRelativeObjectIdentifierValueBlock");qe.NAME="RelativeObjectIdentifierValueBlock";var Ve;var je=class extends ce{constructor(e={}){super(e,qe);this.idBlock.tagClass=1;this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return __spreadProps(__spreadValues({},super.toJSON()),{value:this.getValue()})}};__name(je,"RelativeObjectIdentifier");Ve=je;(()=>{ae.RelativeObjectIdentifier=Ve})();je.NAME="RelativeObjectIdentifier";var Ge;var Fe=class extends ye{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=16}};__name(Fe,"Sequence");Ge=Fe;(()=>{ae.Sequence=Ge})();Fe.NAME="SEQUENCE";var $e;var Je=class extends ye{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=17}};__name(Je,"Set");$e=Je;(()=>{ae.Set=$e})();Je.NAME="SET";var We=class extends(HexBlock(se)){constructor(e={}){var t=__objRest(e,[]);super(t);this.isHexOnly=true;this.value=Q}toJSON(){return __spreadProps(__spreadValues({},super.toJSON()),{value:this.value})}};__name(We,"LocalStringValueBlock");We.NAME="StringValueBlock";var ze=class extends We{};__name(ze,"LocalSimpleStringValueBlock");ze.NAME="SimpleStringValueBlock";var Ye=class extends ue{constructor(e={}){var t=__objRest(e,[]);super(t,ze)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,O.toUint8Array(e))}fromString(e){const t=e.length;const r=this.valueBlock.valueHexView=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}};__name(Ye,"LocalSimpleStringBlock");Ye.NAME="SIMPLE STRING";var Qe=class extends Ye{fromBuffer(e){this.valueBlock.valueHexView=O.toUint8Array(e);try{this.valueBlock.value=P.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`);this.valueBlock.value=P.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(P.FromUtf8String(e));this.valueBlock.value=e}};__name(Qe,"LocalUtf8StringValueBlock");Qe.NAME="Utf8StringValueBlock";var Xe;var Ze=class extends Qe{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=12}};__name(Ze,"Utf8String");Xe=Ze;(()=>{ae.Utf8String=Xe})();Ze.NAME="UTF8String";var et=class extends Ye{fromBuffer(e){this.valueBlock.value=P.ToUtf16String(e);this.valueBlock.valueHexView=O.toUint8Array(e)}fromString(e){this.valueBlock.value=e;this.valueBlock.valueHexView=new Uint8Array(P.FromUtf16String(e))}};__name(et,"LocalBmpStringValueBlock");et.NAME="BmpStringValueBlock";var tt;var rt=class extends et{constructor(e={}){var t=__objRest(e,[]);super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=30}};__name(rt,"BmpString");tt=rt;(()=>{ae.BmpString=tt})();rt.NAME="BMPString";var nt=class extends Ye{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0);const r=new Uint8Array(t);for(let e=0;e<r.length;e+=4){r[e]=r[e+3];r[e+1]=r[e+2];r[e+2]=0;r[e+3]=0}this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length;const r=this.valueBlock.valueHexView=new Uint8Array(t*4);for(let n=0;n<t;n++){const t=utilToBase(e.charCodeAt(n),8);const s=new Uint8Array(t);if(s.length>4)continue;const i=4-s.length;for(let e=s.length-1;e>=0;e--)r[n*4+e+i]=s[e]}this.valueBlock.value=e}};__name(nt,"LocalUniversalStringValueBlock");nt.NAME="UniversalStringValueBlock";var st;var it=class extends nt{constructor(e={}){var t=__objRest(e,[]);super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=28}};__name(it,"UniversalString");st=it;(()=>{ae.UniversalString=st})();it.NAME="UniversalString";var ot;var at=class extends Ye{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=18}};__name(at,"NumericString");ot=at;(()=>{ae.NumericString=ot})();at.NAME="NumericString";var ct;var ut=class extends Ye{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=19}};__name(ut,"PrintableString");ct=ut;(()=>{ae.PrintableString=ct})();ut.NAME="PrintableString";var lt;var ht=class extends Ye{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=20}};__name(ht,"TeletexString");lt=ht;(()=>{ae.TeletexString=lt})();ht.NAME="TeletexString";var ft;var dt=class extends Ye{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=21}};__name(dt,"VideotexString");ft=dt;(()=>{ae.VideotexString=ft})();dt.NAME="VideotexString";var pt;var yt=class extends Ye{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=22}};__name(yt,"IA5String");pt=yt;(()=>{ae.IA5String=pt})();yt.NAME="IA5String";var gt;var mt=class extends Ye{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=25}};__name(mt,"GraphicString");gt=mt;(()=>{ae.GraphicString=gt})();mt.NAME="GraphicString";var vt;var Et=class extends Ye{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=26}};__name(Et,"VisibleString");vt=Et;(()=>{ae.VisibleString=vt})();Et.NAME="VisibleString";var St;var wt=class extends Ye{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=27}};__name(wt,"GeneralString");St=wt;(()=>{ae.GeneralString=St})();wt.NAME="GeneralString";var At;var bt=class extends Ye{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=29}};__name(bt,"CharacterString");At=bt;(()=>{ae.CharacterString=At})();bt.NAME="CharacterString";var _t;var Ct=class extends Et{constructor(e={}){var t=e,{value:r,valueDate:n}=t,s=__objRest(t,["value","valueDate"]);super(s);this.year=0;this.month=0;this.day=0;this.hour=0;this.minute=0;this.second=0;if(r){this.fromString(r);this.valueBlock.valueHexView=new Uint8Array(r.length);for(let e=0;e<r.length;e++)this.valueBlock.valueHexView[e]=r.charCodeAt(e)}if(n){this.fromDate(n);this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())}this.idBlock.tagClass=1;this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,O.toUint8Array(e)))}toBuffer(){const e=this.toString();const t=new ArrayBuffer(e.length);const r=new Uint8Array(t);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear();this.month=e.getUTCMonth()+1;this.day=e.getUTCDate();this.hour=e.getUTCHours();this.minute=e.getUTCMinutes();this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi;const r=t.exec(e);if(r===null){this.error="Wrong input string for conversion";return}const n=parseInt(r[1],10);if(n>=50)this.year=1900+n;else this.year=2e3+n;this.month=parseInt(r[2],10);this.day=parseInt(r[3],10);this.hour=parseInt(r[4],10);this.minute=parseInt(r[5],10);this.second=parseInt(r[6],10)}toString(e="iso"){if(e==="iso"){const e=new Array(7);e[0]=padNumber(this.year<2e3?this.year-1900:this.year-2e3,2);e[1]=padNumber(this.month,2);e[2]=padNumber(this.day,2);e[3]=padNumber(this.hour,2);e[4]=padNumber(this.minute,2);e[5]=padNumber(this.second,2);e[6]="Z";return e.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return __spreadProps(__spreadValues({},super.toJSON()),{year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second})}};__name(Ct,"UTCTime");_t=Ct;(()=>{ae.UTCTime=_t})();Ct.NAME="UTCTime";var Bt;var kt=class extends Ct{constructor(e={}){var t;super(e);(t=this.millisecond)!==null&&t!==void 0?t:this.millisecond=0;this.idBlock.tagClass=1;this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e);this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t=false;let r="";let n="";let s=0;let i;let o=0;let a=0;if(e[e.length-1]==="Z"){r=e.substring(0,e.length-1);t=true}else{const t=new Number(e[e.length-1]);if(isNaN(t.valueOf()))throw new Error("Wrong input string for conversion");r=e}if(t){if(r.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(r.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let e=1;let t=r.indexOf("+");let n="";if(t===-1){t=r.indexOf("-");e=-1}if(t!==-1){n=r.substring(t+1);r=r.substring(0,t);if(n.length!==2&&n.length!==4)throw new Error("Wrong input string for conversion");let s=parseInt(n.substring(0,2),10);if(isNaN(s.valueOf()))throw new Error("Wrong input string for conversion");o=e*s;if(n.length===4){s=parseInt(n.substring(2,4),10);if(isNaN(s.valueOf()))throw new Error("Wrong input string for conversion");a=e*s}}}let c=r.indexOf(".");if(c===-1)c=r.indexOf(",");if(c!==-1){const e=new Number(`0${r.substring(c)}`);if(isNaN(e.valueOf()))throw new Error("Wrong input string for conversion");s=e.valueOf();n=r.substring(0,c)}else n=r;switch(true){case n.length===8:i=/(\d{4})(\d{2})(\d{2})/gi;if(c!==-1)throw new Error("Wrong input string for conversion");break;case n.length===10:i=/(\d{4})(\d{2})(\d{2})(\d{2})/gi;if(c!==-1){let e=60*s;this.minute=Math.floor(e);e=60*(e-this.minute);this.second=Math.floor(e);e=1e3*(e-this.second);this.millisecond=Math.floor(e)}break;case n.length===12:i=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi;if(c!==-1){let e=60*s;this.second=Math.floor(e);e=1e3*(e-this.second);this.millisecond=Math.floor(e)}break;case n.length===14:i=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi;if(c!==-1){const e=1e3*s;this.millisecond=Math.floor(e)}break;default:throw new Error("Wrong input string for conversion")}const u=i.exec(n);if(u===null)throw new Error("Wrong input string for conversion");for(let e=1;e<u.length;e++){switch(e){case 1:this.year=parseInt(u[e],10);break;case 2:this.month=parseInt(u[e],10);break;case 3:this.day=parseInt(u[e],10);break;case 4:this.hour=parseInt(u[e],10)+o;break;case 5:this.minute=parseInt(u[e],10)+a;break;case 6:this.second=parseInt(u[e],10);break;default:throw new Error("Wrong input string for conversion")}}if(t===false){const e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear();this.month=e.getUTCMonth();this.day=e.getUTCDay();this.hour=e.getUTCHours();this.minute=e.getUTCMinutes();this.second=e.getUTCSeconds();this.millisecond=e.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const e=[];e.push(padNumber(this.year,4));e.push(padNumber(this.month,2));e.push(padNumber(this.day,2));e.push(padNumber(this.hour,2));e.push(padNumber(this.minute,2));e.push(padNumber(this.second,2));if(this.millisecond!==0){e.push(".");e.push(padNumber(this.millisecond,3))}e.push("Z");return e.join("")}return super.toString(e)}toJSON(){return __spreadProps(__spreadValues({},super.toJSON()),{millisecond:this.millisecond})}};__name(kt,"GeneralizedTime");Bt=kt;(()=>{ae.GeneralizedTime=Bt})();kt.NAME="GeneralizedTime";var Rt;var Nt=class extends Ze{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=31}};__name(Nt,"DATE");Rt=Nt;(()=>{ae.DATE=Rt})();Nt.NAME="DATE";var xt;var Tt=class extends Ze{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=32}};__name(Tt,"TimeOfDay");xt=Tt;(()=>{ae.TimeOfDay=xt})();Tt.NAME="TimeOfDay";var Ot;var Kt=class extends Ze{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=33}};__name(Kt,"DateTime");Ot=Kt;(()=>{ae.DateTime=Ot})();Kt.NAME="DateTime";var It;var Pt=class extends Ze{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=34}};__name(Pt,"Duration");It=Pt;(()=>{ae.Duration=It})();Pt.NAME="Duration";var Ut;var Lt=class extends Ze{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=14}};__name(Lt,"TIME");Ut=Lt;(()=>{ae.TIME=Ut})();Lt.NAME="TIME";var Dt=class{constructor({name:e=Q,optional:t=false}={}){this.name=e;this.optional=t}};__name(Dt,"Any");var Mt=class extends Dt{constructor(e={}){var t=e,{value:r=[]}=t,n=__objRest(t,["value"]);super(n);this.value=r}};__name(Mt,"Choice");var Ht=class extends Dt{constructor(e={}){var t=e,{value:r=new Dt,local:n=false}=t,s=__objRest(t,["value","local"]);super(s);this.value=r;this.local=n}};__name(Ht,"Repeated");var qt=class{constructor({data:e=Z}={}){this.dataView=O.toUint8Array(e)}get data(){return this.dataView.slice().buffer}set data(e){this.dataView=O.toUint8Array(e)}fromBER(e,t,r){const n=t+r;this.dataView=O.toUint8Array(e).subarray(t,n);return n}toBER(e){return this.dataView.slice().buffer}};__name(qt,"RawData");function compareSchema(e,t,r){if(r instanceof Mt){for(let n=0;n<r.value.length;n++){const s=compareSchema(e,t,r.value[n]);if(s.verified){return{verified:true,result:e}}}{const e={verified:false,result:{error:"Wrong values for Choice type"}};if(r.hasOwnProperty(q))e.name=r.name;return e}}if(r instanceof Dt){if(r.hasOwnProperty(q))e[r.name]=t;return{verified:true,result:e}}if(e instanceof Object===false){return{verified:false,result:{error:"Wrong root object"}}}if(t instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 data"}}}if(r instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(G in r===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(W in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(z in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}const n=r.idBlock.toBER(false);if(n.byteLength===0){return{verified:false,result:{error:"Error encoding idBlock for ASN.1 schema"}}}const s=r.idBlock.fromBER(n,0,n.byteLength);if(s===-1){return{verified:false,result:{error:"Error decoding idBlock for ASN.1 schema"}}}if(r.idBlock.hasOwnProperty(F)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.tagClass!==t.idBlock.tagClass){return{verified:false,result:e}}if(r.idBlock.hasOwnProperty($)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.tagNumber!==t.idBlock.tagNumber){return{verified:false,result:e}}if(r.idBlock.hasOwnProperty(J)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.isConstructed!==t.idBlock.isConstructed){return{verified:false,result:e}}if(!(j in r.idBlock)){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly){return{verified:false,result:e}}if(r.idBlock.isHexOnly){if(V in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}const n=r.idBlock.valueHexView;const s=t.idBlock.valueHexView;if(n.length!==s.length){return{verified:false,result:e}}for(let t=0;t<n.length;t++){if(n[t]!==s[1]){return{verified:false,result:e}}}}if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,Q);if(r.name)e[r.name]=t}if(r instanceof ae.Constructed){let n=0;let s={verified:false,result:{error:"Unknown error"}};let i=r.valueBlock.value.length;if(i>0){if(r.valueBlock.value[0]instanceof Ht){i=t.valueBlock.value.length}}if(i===0){return{verified:true,result:e}}if(t.valueBlock.value.length===0&&r.valueBlock.value.length!==0){let t=true;for(let e=0;e<r.valueBlock.value.length;e++)t=t&&(r.valueBlock.value[e].optional||false);if(t){return{verified:true,result:e}}if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,Q);if(r.name)delete e[r.name]}e.error="Inconsistent object length";return{verified:false,result:e}}for(let o=0;o<i;o++){if(o-n>=t.valueBlock.value.length){if(r.valueBlock.value[o].optional===false){const t={verified:false,result:e};e.error="Inconsistent length between ASN.1 data and schema";if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,Q);if(r.name){delete e[r.name];t.name=r.name}}return t}}else{if(r.valueBlock.value[0]instanceof Ht){s=compareSchema(e,t.valueBlock.value[o],r.valueBlock.value[0].value);if(s.verified===false){if(r.valueBlock.value[0].optional)n++;else{if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,Q);if(r.name)delete e[r.name]}return s}}if(q in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let n={};if(Y in r.valueBlock.value[0]&&r.valueBlock.value[0].local)n=t;else n=e;if(typeof n[r.valueBlock.value[0].name]==="undefined")n[r.valueBlock.value[0].name]=[];n[r.valueBlock.value[0].name].push(t.valueBlock.value[o])}}else{s=compareSchema(e,t.valueBlock.value[o-n],r.valueBlock.value[o]);if(s.verified===false){if(r.valueBlock.value[o].optional)n++;else{if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,Q);if(r.name)delete e[r.name]}return s}}}}}if(s.verified===false){const t={verified:false,result:e};if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,Q);if(r.name){delete e[r.name];t.name=r.name}}return t}return{verified:true,result:e}}if(r.primitiveSchema&&V in t.valueBlock){const n=localFromBER(t.valueBlock.valueHexView);if(n.offset===-1){const t={verified:false,result:n.result};if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,Q);if(r.name){delete e[r.name];t.name=r.name}}return t}return compareSchema(e,n.result,r.primitiveSchema)}return{verified:true,result:e}}__name(compareSchema,"compareSchema");function verifySchema(e,t){if(t instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 schema type"}}}const r=localFromBER(O.toUint8Array(e));if(r.offset===-1){return{verified:false,result:r.result}}return compareSchema(r.result,r.result,t)}__name(verifySchema,"verifySchema");d();var Vt;(function(e){e[e["Sequence"]=0]="Sequence";e[e["Set"]=1]="Set";e[e["Choice"]=2]="Choice"})(Vt||(Vt={}));var jt;(function(e){e[e["Any"]=1]="Any";e[e["Boolean"]=2]="Boolean";e[e["OctetString"]=3]="OctetString";e[e["BitString"]=4]="BitString";e[e["Integer"]=5]="Integer";e[e["Enumerated"]=6]="Enumerated";e[e["ObjectIdentifier"]=7]="ObjectIdentifier";e[e["Utf8String"]=8]="Utf8String";e[e["BmpString"]=9]="BmpString";e[e["UniversalString"]=10]="UniversalString";e[e["NumericString"]=11]="NumericString";e[e["PrintableString"]=12]="PrintableString";e[e["TeletexString"]=13]="TeletexString";e[e["VideotexString"]=14]="VideotexString";e[e["IA5String"]=15]="IA5String";e[e["GraphicString"]=16]="GraphicString";e[e["VisibleString"]=17]="VisibleString";e[e["GeneralString"]=18]="GeneralString";e[e["CharacterString"]=19]="CharacterString";e[e["UTCTime"]=20]="UTCTime";e[e["GeneralizedTime"]=21]="GeneralizedTime";e[e["DATE"]=22]="DATE";e[e["TimeOfDay"]=23]="TimeOfDay";e[e["DateTime"]=24]="DateTime";e[e["Duration"]=25]="Duration";e[e["TIME"]=26]="TIME";e[e["Null"]=27]="Null"})(jt||(jt={}));var Gt={fromASN:e=>e instanceof Se?null:e.valueBeforeDecode,toASN:e=>{if(e===null){return new Se}const t=fromBER(e);if(t.result.error){throw new Error(t.result.error)}return t.result}};var Ft={fromASN:e=>e.valueBlock.valueHex.byteLength>4?e.valueBlock.toString():e.valueBlock.valueDec,toASN:e=>new Ke({value:e})};var $t={fromASN:e=>e.valueBlock.valueDec,toASN:e=>new Pe({value:e})};var Jt={fromASN:e=>e.valueBlock.valueHex,toASN:e=>new Ne({valueHex:e})};var Wt={fromASN:e=>e.valueBlock.toString(),toASN:e=>new Me({value:e})};var zt={fromASN:e=>e.valueBlock.value,toASN:e=>new be({value:e})};var Yt={fromASN:e=>e.valueBlock.valueHex,toASN:e=>new Be({valueHex:e})};function createStringConverter(e){return{fromASN:e=>e.valueBlock.value,toASN:t=>new e({value:t})}}__name(createStringConverter,"createStringConverter");var Qt=createStringConverter(Ze);var Xt=createStringConverter(rt);var Zt=createStringConverter(it);var er=createStringConverter(at);var tr=createStringConverter(ut);var rr=createStringConverter(ht);var nr=createStringConverter(dt);var sr=createStringConverter(yt);var ir=createStringConverter(mt);var or=createStringConverter(Et);var ar=createStringConverter(wt);var cr=createStringConverter(bt);var ur={fromASN:e=>e.toDate(),toASN:e=>new Ct({valueDate:e})};var lr={fromASN:e=>e.toDate(),toASN:e=>new kt({valueDate:e})};var hr={fromASN:e=>null,toASN:e=>new Se};function defaultConverter(e){switch(e){case jt.Any:return Gt;case jt.BitString:return Jt;case jt.BmpString:return Xt;case jt.Boolean:return zt;case jt.CharacterString:return cr;case jt.Enumerated:return $t;case jt.GeneralString:return ar;case jt.GeneralizedTime:return lr;case jt.GraphicString:return ir;case jt.IA5String:return sr;case jt.Integer:return Ft;case jt.Null:return hr;case jt.NumericString:return er;case jt.ObjectIdentifier:return Wt;case jt.OctetString:return Yt;case jt.PrintableString:return tr;case jt.TeletexString:return rr;case jt.UTCTime:return ur;case jt.UniversalString:return Zt;case jt.Utf8String:return Qt;case jt.VideotexString:return nr;case jt.VisibleString:return or;default:return null}}__name(defaultConverter,"defaultConverter");d();d();d();d();d();d();d();function isConvertible(e){if(e&&e.prototype){if(e.prototype.toASN&&e.prototype.fromASN){return true}else{return isConvertible(e.prototype)}}else{return!!(e&&e.toASN&&e.fromASN)}}__name(isConvertible,"isConvertible");function isTypeOfArray(e){var t;if(e){const r=Object.getPrototypeOf(e);if(((t=r===null||r===void 0?void 0:r.prototype)===null||t===void 0?void 0:t.constructor)===Array){return true}return isTypeOfArray(r)}return false}__name(isTypeOfArray,"isTypeOfArray");function isArrayEqual(e,t){if(!(e&&t)){return false}if(e.byteLength!==t.byteLength){return false}const r=new Uint8Array(e);const n=new Uint8Array(t);for(let t=0;t<e.byteLength;t++){if(r[t]!==n[t]){return false}}return true}__name(isArrayEqual,"isArrayEqual");var fr=class{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e){var t,r,n;const s=this.items.get(e);if(!s){throw new Error(`Cannot get schema for '${(n=(r=(t=e===null||e===void 0?void 0:e.prototype)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.name)!==null&&n!==void 0?n:e}' target`)}return s}cache(e){const t=this.get(e);if(!t.schema){t.schema=this.create(e,true)}}createDefault(e){const t={type:Vt.Sequence,items:{}};const r=this.findParentSchema(e);if(r){Object.assign(t,r);t.items=Object.assign({},t.items,r.items)}return t}create(e,t){const r=this.items.get(e)||this.createDefault(e);const n=[];for(const e in r.items){const s=r.items[e];const i=t?e:"";let o;if(typeof s.type==="number"){const e=jt[s.type];const t=U[e];if(!t){throw new Error(`Cannot get ASN1 class by name '${e}'`)}o=new t({name:i})}else if(isConvertible(s.type)){const e=new s.type;o=e.toSchema(i)}else if(s.optional){const e=this.get(s.type);if(e.type===Vt.Choice){o=new Dt({name:i})}else{o=this.create(s.type,false);o.name=i}}else{o=new Dt({name:i})}const a=!!s.optional||s.defaultValue!==void 0;if(s.repeated){o.name="";const e=s.repeated==="set"?Je:Fe;o=new e({name:"",value:[new Ht({name:i,value:o})]})}if(s.context!==null&&s.context!==void 0){if(s.implicit){if(typeof s.type==="number"||isConvertible(s.type)){const e=s.repeated?ye:fe;n.push(new e({name:i,optional:a,idBlock:{tagClass:3,tagNumber:s.context}}))}else{this.cache(s.type);const e=!!s.repeated;let t=!e?this.get(s.type).schema:o;t=t.valueBlock?t.valueBlock.value:t.value;n.push(new ye({name:!e?i:"",optional:a,idBlock:{tagClass:3,tagNumber:s.context},value:t}))}}else{n.push(new ye({optional:a,idBlock:{tagClass:3,tagNumber:s.context},value:[o]}))}}else{o.optional=a;n.push(o)}}switch(r.type){case Vt.Sequence:return new Fe({value:n,name:""});case Vt.Set:return new Je({value:n,name:""});case Vt.Choice:return new Mt({value:n,name:""});default:throw new Error(`Unsupported ASN1 type in use`)}}set(e,t){this.items.set(e,t);return this}findParentSchema(e){const t=e.__proto__;if(t){const e=this.items.get(t);return e||this.findParentSchema(t)}return null}};__name(fr,"AsnSchemaStorage");var dr=new fr;var pr=__name((e=>t=>{let r;if(!dr.has(t)){r=dr.createDefault(t);dr.set(t,r)}else{r=dr.get(t)}Object.assign(r,e)}),"AsnType");var yr=__name((e=>(t,r)=>{let n;if(!dr.has(t.constructor)){n=dr.createDefault(t.constructor);dr.set(t.constructor,n)}else{n=dr.get(t.constructor)}const s=Object.assign({},e);if(typeof s.type==="number"&&!s.converter){const n=defaultConverter(e.type);if(!n){throw new Error(`Cannot get default converter for property '${r}' of ${t.constructor.name}`)}s.converter=n}n.items[r]=s}),"AsnProp");d();d();d();var gr=class extends Error{constructor(){super(...arguments);this.schemas=[]}};__name(gr,"AsnSchemaValidationError");var mr=class{static parse(e,t){let r;if(e instanceof ArrayBuffer){r=e}else if(typeof Buffer!=="undefined"&&Buffer.isBuffer(e)){r=new Uint8Array(e).buffer}else if(ArrayBuffer.isView(e)||e.buffer instanceof ArrayBuffer){r=e.buffer}else{throw new TypeError("Wrong type of 'data' argument")}const n=fromBER(r);if(n.result.error){throw new Error(n.result.error)}const s=this.fromASN(n.result,t);return s}static fromASN(e,t){var r;try{if(isConvertible(t)){const r=new t;return r.fromASN(e)}const n=dr.get(t);dr.cache(t);let s=n.schema;if(e.constructor===ye&&n.type!==Vt.Choice){s=new ye({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:n.schema.valueBlock.value});for(const t in n.items){delete e[t]}}const i=compareSchema(e,e,s);if(!i.verified){throw new gr(`Data does not match to ${t.name} ASN1 schema. ${i.result.error}`)}const o=new t;if(isTypeOfArray(t)){if(typeof n.itemType==="number"){const r=defaultConverter(n.itemType);if(!r){throw new Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`)}return t.from(e.valueBlock.value,(e=>r.fromASN(e)))}else{return t.from(e.valueBlock.value,(e=>this.fromASN(e,n.itemType)))}}for(const t in n.items){if(!e[t]){continue}const s=n.items[t];if(typeof s.type==="number"||isConvertible(s.type)){const n=(r=s.converter)!==null&&r!==void 0?r:isConvertible(s.type)?new s.type:null;if(!n){throw new Error("Converter is empty")}if(s.repeated){if(s.implicit){const r=s.repeated==="sequence"?Fe:Je;const i=new r;i.valueBlock=e[t].valueBlock;const a=fromBER(i.toBER(false)).result.valueBlock.value;o[t]=Array.from(a,(e=>n.fromASN(e)))}else{o[t]=Array.from(e[t],(e=>n.fromASN(e)))}}else{let r=e[t];if(s.implicit){let e;if(isConvertible(s.type)){e=(new s.type).toSchema("")}else{const t=jt[s.type];const r=U[t];if(!r){throw new Error(`Cannot get '${t}' class from asn1js module`)}e=new r}e.valueBlock=r.valueBlock;r=fromBER(e.toBER(false)).result}o[t]=n.fromASN(r)}}else{if(s.repeated){o[t]=Array.from(e[t],(e=>this.fromASN(e,s.type)))}else{o[t]=this.fromASN(e[t],s.type)}}}return o}catch(e){if(e instanceof gr){e.schemas.push(t.name)}throw e}}};__name(mr,"AsnParser");d();var vr=class{static serialize(e){if(e instanceof ce){return e.toBER(false)}return this.toASN(e).toBER(false)}static toASN(e){if(e&&isConvertible(e.constructor)){return e.toASN()}const t=e.constructor;const r=dr.get(t);dr.cache(t);let n=[];if(r.itemType){if(typeof r.itemType==="number"){const s=defaultConverter(r.itemType);if(!s){throw new Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`)}n=e.map((e=>s.toASN(e)))}else{n=e.map((e=>this.toAsnItem({type:r.itemType},"[]",t,e)))}}else{for(const s in r.items){const i=r.items[s];const o=e[s];if(o===void 0||i.defaultValue===o||typeof i.defaultValue==="object"&&typeof o==="object"&&isArrayEqual(this.serialize(i.defaultValue),this.serialize(o))){continue}let a=vr.toAsnItem(i,s,t,o);if(typeof i.context==="number"){if(i.implicit){if(!i.repeated&&(typeof i.type==="number"||isConvertible(i.type))){const e={};e.valueHex=a instanceof Se?a.valueBeforeDecode:a.valueBlock.toBER();n.push(new fe(__spreadValues({optional:i.optional,idBlock:{tagClass:3,tagNumber:i.context}},e)))}else{n.push(new ye({optional:i.optional,idBlock:{tagClass:3,tagNumber:i.context},value:a.valueBlock.value}))}}else{n.push(new ye({optional:i.optional,idBlock:{tagClass:3,tagNumber:i.context},value:[a]}))}}else if(i.repeated){n=n.concat(a)}else{n.push(a)}}}let s;switch(r.type){case Vt.Sequence:s=new Fe({value:n});break;case Vt.Set:s=new Je({value:n});break;case Vt.Choice:if(!n[0]){throw new Error(`Schema '${t.name}' has wrong data. Choice cannot be empty.`)}s=n[0];break}return s}static toAsnItem(e,t,r,n){let s;if(typeof e.type==="number"){const i=e.converter;if(!i){throw new Error(`Property '${t}' doesn't have converter for type ${jt[e.type]} in schema '${r.name}'`)}if(e.repeated){const t=Array.from(n,(e=>i.toASN(e)));const r=e.repeated==="sequence"?Fe:Je;s=new r({value:t})}else{s=i.toASN(n)}}else{if(e.repeated){const t=Array.from(n,(e=>this.toASN(e)));const r=e.repeated==="sequence"?Fe:Je;s=new r({value:t})}else{s=this.toASN(n)}}return s}};__name(vr,"AsnSerializer");d();d();var Er=class{static serialize(e){return vr.serialize(e)}static parse(e,t){return mr.parse(e,t)}static toString(e){const t=O.isBufferSource(e)?O.toArrayBuffer(e):Er.serialize(e);const r=fromBER(t);if(r.offset===-1){throw new Error(`Cannot decode ASN.1 data. ${r.result.error}`)}return r.result.toString()}};__name(Er,"AsnConvert");d();var Sr=__toESM(p(),1);var{__extends:wr,__assign:Ar,__rest:br,__decorate:_r,__param:Cr,__metadata:Br,__awaiter:kr,__generator:Rr,__exportStar:Nr,__createBinding:xr,__values:Tr,__read:Or,__spread:Kr,__spreadArrays:Ir,__spreadArray:Pr,__await:Ur,__asyncGenerator:Lr,__asyncDelegator:Dr,__asyncValues:Mr,__makeTemplateObject:Hr,__importStar:qr,__importDefault:Vr,__classPrivateFieldGet:jr,__classPrivateFieldSet:Gr,__classPrivateFieldIn:Fr}=Sr.default;d();var $r=class extends Error{constructor(e,t){super(t?`${e}. See the inner exception for more details.`:e);this.message=e;this.innerError=t}};__name($r,"JsonError");var Jr=class extends $r{constructor(e,t,r){super(t,r);this.schema=e}};__name(Jr,"TransformError");var Wr=class extends Jr{constructor(e,t,r){super(e,`JSON doesn't match to '${e.target.name}' schema. ${t}`,r)}};__name(Wr,"ParserError");var zr=class extends $r{};__name(zr,"ValidationError");var Yr=class extends $r{constructor(e,t,r){super(`Cannot serialize by '${e}' schema. ${t}`,r);this.schemaName=e}};__name(Yr,"SerializerError");var Qr=class extends Wr{constructor(e,t,r={}){super(e,"Some keys doesn't match to schema");this.keys=t;this.errors=r}};__name(Qr,"KeyError");var Xr;(function(e){e[e["Any"]=0]="Any";e[e["Boolean"]=1]="Boolean";e[e["Number"]=2]="Number";e[e["String"]=3]="String"})(Xr||(Xr={}));function checkType(e,t){switch(t){case Xr.Boolean:return typeof e==="boolean";case Xr.Number:return typeof e==="number";case Xr.String:return typeof e==="string"}return true}__name(checkType,"checkType");function throwIfTypeIsWrong(e,t){if(!checkType(e,t)){throw new TypeError(`Value must be ${Xr[t]}`)}}__name(throwIfTypeIsWrong,"throwIfTypeIsWrong");function isConvertible2(e){if(e&&e.prototype){if(e.prototype.toJSON&&e.prototype.fromJSON){return true}else{return isConvertible2(e.prototype)}}else{return!!(e&&e.toJSON&&e.fromJSON)}}__name(isConvertible2,"isConvertible");var Zr=class{constructor(){this.items=new Map}has(e){return this.items.has(e)||!!this.findParentSchema(e)}get(e){const t=this.items.get(e)||this.findParentSchema(e);if(!t){throw new Error("Cannot get schema for current target")}return t}create(e){const t={names:{}};const r=this.findParentSchema(e);if(r){Object.assign(t,r);t.names={};for(const e in r.names){t.names[e]=Object.assign({},r.names[e])}}t.target=e;return t}set(e,t){this.items.set(e,t);return this}findParentSchema(e){const t=e.__proto__;if(t){const e=this.items.get(t);return e||this.findParentSchema(t)}return null}};__name(Zr,"JsonSchemaStorage");var en="default";var tn=new Zr;var rn=class{constructor(e){this.pattern=new RegExp(e)}validate(e){const t=new RegExp(this.pattern.source,this.pattern.flags);if(typeof e!=="string"){throw new zr("Incoming value must be string")}if(!t.exec(e)){throw new zr(`Value doesn't match to pattern '${t.toString()}'`)}}};__name(rn,"PatternValidation");var nn=class{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e;this.max=t}validate(e){throwIfTypeIsWrong(e,Xr.Number);if(!(this.min<=e&&e<=this.max)){const e=this.min===Number.MIN_VALUE?"MIN":this.min;const t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new zr(`Value doesn't match to diapason [${e},${t}]`)}}};__name(nn,"InclusiveValidation");var sn=class{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e;this.max=t}validate(e){throwIfTypeIsWrong(e,Xr.Number);if(!(this.min<e&&e<this.max)){const e=this.min===Number.MIN_VALUE?"MIN":this.min;const t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new zr(`Value doesn't match to diapason (${e},${t})`)}}};__name(sn,"ExclusiveValidation");var on=class{constructor(e,t,r){this.length=e;this.minLength=t;this.maxLength=r}validate(e){if(this.length!==void 0){if(e.length!==this.length){throw new zr(`Value length must be exactly ${this.length}.`)}return}if(this.minLength!==void 0){if(e.length<this.minLength){throw new zr(`Value length must be more than ${this.minLength}.`)}}if(this.maxLength!==void 0){if(e.length>this.maxLength){throw new zr(`Value length must be less than ${this.maxLength}.`)}}}};__name(on,"LengthValidation");var an=class{constructor(e){this.enumeration=e}validate(e){throwIfTypeIsWrong(e,Xr.String);if(!this.enumeration.includes(e)){throw new zr(`Value must be one of ${this.enumeration.map((e=>`'${e}'`)).join(", ")}`)}}};__name(an,"EnumerationValidation");var cn=class{static checkValues(e,t){const r=Array.isArray(e)?e:[e];for(const n of r){for(const r of t.validations){if(r instanceof on&&t.repeated){r.validate(e)}else{r.validate(n)}}}}static checkTypes(e,t){if(t.repeated&&!Array.isArray(e)){throw new TypeError("Value must be Array")}if(typeof t.type==="number"){const r=Array.isArray(e)?e:[e];for(const e of r){throwIfTypeIsWrong(e,t.type)}}}static getSchemaByName(e,t=en){return __spreadValues(__spreadValues({},e.names[en]),e.names[t])}};__name(cn,"JsonTransform");var un=class extends cn{static serialize(e,t,r,n){const s=this.toJSON(e,t);return JSON.stringify(s,r,n)}static toJSON(e,t={}){let r;let n=t.targetSchema;const s=t.schemaName||en;if(isConvertible2(e)){return e.toJSON()}if(Array.isArray(e)){r=[];for(const n of e){r.push(this.toJSON(n,t))}}else if(typeof e==="object"){if(n&&!tn.has(n)){throw new $r("Cannot get schema for `targetSchema` param")}n=n||e.constructor;if(tn.has(n)){const t=tn.get(n);r={};const i=this.getSchemaByName(t,s);for(const o in i){try{const t=i[o];const a=e[o];let c;if(t.optional&&a===void 0||t.defaultValue!==void 0&&a===t.defaultValue){continue}if(!t.optional&&a===void 0){throw new Yr(n.name,`Property '${o}' is required.`)}if(typeof t.type==="number"){if(t.converter){if(t.repeated){c=a.map((r=>t.converter.toJSON(r,e)))}else{c=t.converter.toJSON(a,e)}}else{c=a}}else{if(t.repeated){c=a.map((e=>this.toJSON(e,{schemaName:s})))}else{c=this.toJSON(a,{schemaName:s})}}this.checkTypes(c,t);this.checkValues(c,t);r[t.name||o]=c}catch(e){if(e instanceof Yr){throw e}else{throw new Yr(t.target.name,`Property '${o}' is wrong. ${e.message}`,e)}}}}else{r={};for(const t in e){r[t]=this.toJSON(e[t],{schemaName:s})}}}else{r=e}return r}};__name(un,"JsonSerializer");var ln=class extends cn{static parse(e,t){const r=JSON.parse(e);return this.fromJSON(r,t)}static fromJSON(e,t){const r=t.targetSchema;const n=t.schemaName||en;const s=new r;if(isConvertible2(s)){return s.fromJSON(e)}const i=tn.get(r);const o=this.getSchemaByName(i,n);const a={};if(t.strictProperty&&!Array.isArray(e)){ln.checkStrictProperty(e,o,i)}for(const r in o){try{const a=o[r];const c=a.name||r;const u=e[c];if(u===void 0&&(a.optional||a.defaultValue!==void 0)){continue}if(!a.optional&&u===void 0){throw new Wr(i,`Property '${c}' is required.`)}this.checkTypes(u,a);this.checkValues(u,a);if(typeof a.type==="number"){if(a.converter){if(a.repeated){s[r]=u.map((e=>a.converter.fromJSON(e,s)))}else{s[r]=a.converter.fromJSON(u,s)}}else{s[r]=u}}else{const e=__spreadProps(__spreadValues({},t),{targetSchema:a.type,schemaName:n});if(a.repeated){s[r]=u.map((t=>this.fromJSON(t,e)))}else{s[r]=this.fromJSON(u,e)}}}catch(e){if(!(e instanceof Wr)){e=new Wr(i,`Property '${r}' is wrong. ${e.message}`,e)}if(t.strictAllKeys){a[r]=e}else{throw e}}}const c=Object.keys(a);if(c.length){throw new Qr(i,c,a)}return s}static checkStrictProperty(e,t,r){const n=Object.keys(e);const s=Object.keys(t);const i=[];for(const e of n){if(s.indexOf(e)===-1){i.push(e)}}if(i.length){throw new Qr(r,i)}}};__name(ln,"JsonParser");function getValidations(e){const t=[];if(e.pattern){t.push(new rn(e.pattern))}if(e.type===Xr.Number||e.type===Xr.Any){if(e.minInclusive!==void 0||e.maxInclusive!==void 0){t.push(new nn(e.minInclusive,e.maxInclusive))}if(e.minExclusive!==void 0||e.maxExclusive!==void 0){t.push(new sn(e.minExclusive,e.maxExclusive))}if(e.enumeration!==void 0){t.push(new an(e.enumeration))}}if(e.type===Xr.String||e.repeated||e.type===Xr.Any){if(e.length!==void 0||e.minLength!==void 0||e.maxLength!==void 0){t.push(new on(e.length,e.minLength,e.maxLength))}}return t}__name(getValidations,"getValidations");var hn=__name(((e={})=>(t,r)=>{const n=`Cannot set type for ${r} property of ${t.constructor.name} schema`;let s;if(!tn.has(t.constructor)){s=tn.create(t.constructor);tn.set(t.constructor,s)}else{s=tn.get(t.constructor);if(s.target!==t.constructor){s=tn.create(t.constructor);tn.set(t.constructor,s)}}const i={type:Xr.Any,validations:[]};const o=Object.assign(i,e);o.validations=getValidations(o);if(typeof o.type!=="number"){if(!tn.has(o.type)&&!isConvertible2(o.type)){throw new Error(`${n}. Assigning type doesn't have schema.`)}}let a;if(Array.isArray(e.schema)){a=e.schema}else{a=[e.schema||en]}for(const e of a){if(!s.names[e]){s.names[e]={}}const t=s.names[e];t[r]=o}}),"JsonProp");var fn=class extends Error{};__name(fn,"CryptoError");var dn=class extends fn{};__name(dn,"AlgorithmError");var pn=class extends fn{constructor(e){super(`Unsupported operation: ${e?`${e}`:""}`)}};__name(pn,"UnsupportedOperationError");var yn=class extends fn{};__name(yn,"OperationError");var gn=class extends fn{constructor(e){super(`${e}: Missing required property`)}};__name(gn,"RequiredPropertyError");function isJWK(e){return typeof e==="object"&&"kty"in e}__name(isJWK,"isJWK");var mn=class{async digest(...e){this.checkDigest.apply(this,e);return this.onDigest.apply(this,e)}checkDigest(e,t){this.checkAlgorithmName(e)}async onDigest(e,t){throw new pn("digest")}async generateKey(...e){this.checkGenerateKey.apply(this,e);return this.onGenerateKey.apply(this,e)}checkGenerateKey(e,t,r,...n){this.checkAlgorithmName(e);this.checkGenerateKeyParams(e);if(!(r&&r.length)){throw new TypeError(`Usages cannot be empty when creating a key.`)}let s;if(Array.isArray(this.usages)){s=this.usages}else{s=this.usages.privateKey.concat(this.usages.publicKey)}this.checkKeyUsages(r,s)}checkGenerateKeyParams(e){}async onGenerateKey(e,t,r,...n){throw new pn("generateKey")}async sign(...e){this.checkSign.apply(this,e);return this.onSign.apply(this,e)}checkSign(e,t,r,...n){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,"sign")}async onSign(e,t,r,...n){throw new pn("sign")}async verify(...e){this.checkVerify.apply(this,e);return this.onVerify.apply(this,e)}checkVerify(e,t,r,n,...s){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,"verify")}async onVerify(e,t,r,n,...s){throw new pn("verify")}async encrypt(...e){this.checkEncrypt.apply(this,e);return this.onEncrypt.apply(this,e)}checkEncrypt(e,t,r,n={},...s){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,n.keyUsage?"encrypt":void 0)}async onEncrypt(e,t,r,...n){throw new pn("encrypt")}async decrypt(...e){this.checkDecrypt.apply(this,e);return this.onDecrypt.apply(this,e)}checkDecrypt(e,t,r,n={},...s){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,n.keyUsage?"decrypt":void 0)}async onDecrypt(e,t,r,...n){throw new pn("decrypt")}async deriveBits(...e){this.checkDeriveBits.apply(this,e);return this.onDeriveBits.apply(this,e)}checkDeriveBits(e,t,r,n={},...s){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,n.keyUsage?"deriveBits":void 0);if(r%8!==0){throw new yn("length: Is not multiple of 8")}}async onDeriveBits(e,t,r,...n){throw new pn("deriveBits")}async exportKey(...e){this.checkExportKey.apply(this,e);return this.onExportKey.apply(this,e)}checkExportKey(e,t,...r){this.checkKeyFormat(e);this.checkCryptoKey(t);if(!t.extractable){throw new fn("key: Is not extractable")}}async onExportKey(e,t,...r){throw new pn("exportKey")}async importKey(...e){this.checkImportKey.apply(this,e);return this.onImportKey.apply(this,e)}checkImportKey(e,t,r,n,s,...i){this.checkKeyFormat(e);this.checkKeyData(e,t);this.checkAlgorithmName(r);this.checkImportParams(r);if(Array.isArray(this.usages)){this.checkKeyUsages(s,this.usages)}}async onImportKey(e,t,r,n,s,...i){throw new pn("importKey")}checkAlgorithmName(e){if(e.name.toLowerCase()!==this.name.toLowerCase()){throw new dn("Unrecognized name")}}checkAlgorithmParams(e){}checkDerivedKeyParams(e){}checkKeyUsages(e,t){for(const r of e){if(t.indexOf(r)===-1){throw new TypeError("Cannot create a key using the specified key usages")}}}checkCryptoKey(e,t){this.checkAlgorithmName(e.algorithm);if(t&&e.usages.indexOf(t)===-1){throw new fn(`key does not match that of operation`)}}checkRequiredProperty(e,t){if(!(t in e)){throw new gn(t)}}checkHashAlgorithm(e,t){for(const r of t){if(r.toLowerCase()===e.name.toLowerCase()){return}}throw new yn(`hash: Must be one of ${t.join(", ")}`)}checkImportParams(e){}checkKeyFormat(e){switch(e){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw new TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(e,t){if(!t){throw new TypeError("keyData: Cannot be empty on empty on key importing")}if(e==="jwk"){if(!isJWK(t)){throw new TypeError("keyData: Is not JsonWebToken")}}else if(!O.isBufferSource(t)){throw new TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}}prepareData(e){return O.toArrayBuffer(e)}};__name(mn,"ProviderCrypto");var vn=class extends mn{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not of type Number")}switch(e.length){case 128:case 192:case 256:break;default:throw new TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}};__name(vn,"AesProvider");var En=class extends vn{constructor(){super(...arguments);this.name="AES-CBC";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength!==16){throw new TypeError("iv: Must have length 16 bytes")}}};__name(En,"AesCbcProvider");var Sn=class extends vn{constructor(){super(...arguments);this.name="AES-CMAC";this.usages=["sign","verify"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not a Number")}if(e.length<1){throw new yn("length: Must be more than 0")}}};__name(Sn,"AesCmacProvider");var wn=class extends vn{constructor(){super(...arguments);this.name="AES-CTR";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"counter");if(!(e.counter instanceof ArrayBuffer||ArrayBuffer.isView(e.counter))){throw new TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.counter.byteLength!==16){throw new TypeError("iv: Must have length 16 bytes")}this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not a Number")}if(e.length<1){throw new yn("length: Must be more than 0")}}};__name(wn,"AesCtrProvider");var An=class extends vn{constructor(){super(...arguments);this.name="AES-ECB";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}};__name(An,"AesEcbProvider");var bn=class extends vn{constructor(){super(...arguments);this.name="AES-GCM";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength<1){throw new yn("iv: Must have length more than 0 and less than 2^64 - 1")}if(!("tagLength"in e)){e.tagLength=128}switch(e.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new yn("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}};__name(bn,"AesGcmProvider");var _n=class extends vn{constructor(){super(...arguments);this.name="AES-KW";this.usages=["wrapKey","unwrapKey"]}};__name(_n,"AesKwProvider");var Cn=class extends mn{constructor(){super(...arguments);this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.ivSize){this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength!==this.ivSize){throw new TypeError(`iv: Must have length ${this.ivSize} bytes`)}}}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not of type Number")}if(e.length!==this.keySizeBits){throw new yn(`algorithm.length: Must be ${this.keySizeBits}`)}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}};__name(Cn,"DesProvider");var Bn=class extends mn{constructor(){super(...arguments);this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);this.checkRequiredProperty(e,"publicExponent");if(!(e.publicExponent&&e.publicExponent instanceof Uint8Array)){throw new TypeError("publicExponent: Missing or not a Uint8Array")}const t=P.ToBase64(e.publicExponent);if(!(t==="Aw=="||t==="AQAB")){throw new TypeError("publicExponent: Must be [3] or [1,0,1]")}this.checkRequiredProperty(e,"modulusLength");if(e.modulusLength%8||e.modulusLength<256||e.modulusLength>16384){throw new TypeError("The modulus length must be a multiple of 8 bits and >= 256 and <= 16384")}}checkImportParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}};__name(Bn,"RsaProvider");var kn=class extends Bn{constructor(){super(...arguments);this.name="RSASSA-PKCS1-v1_5";this.usages={privateKey:["sign"],publicKey:["verify"]}}};__name(kn,"RsaSsaProvider");var Rn=class extends Bn{constructor(){super(...arguments);this.name="RSA-PSS";this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(e){this.checkRequiredProperty(e,"saltLength");if(typeof e.saltLength!=="number"){throw new TypeError("saltLength: Is not a Number")}if(e.saltLength<0){throw new RangeError("saltLength: Must be positive number")}}};__name(Rn,"RsaPssProvider");var Nn=class extends Bn{constructor(){super(...arguments);this.name="RSA-OAEP";this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(e){if(e.label&&!(e.label instanceof ArrayBuffer||ArrayBuffer.isView(e.label))){throw new TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}};__name(Nn,"RsaOaepProvider");var xn=class extends mn{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"namedCurve");this.checkNamedCurve(e.namedCurve)}checkNamedCurve(e){for(const t of this.namedCurves){if(t.toLowerCase()===e.toLowerCase()){return}}throw new yn(`namedCurve: Must be one of ${this.namedCurves.join(", ")}`)}};__name(xn,"EllipticProvider");var Tn=class extends xn{constructor(){super(...arguments);this.name="ECDSA";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages={privateKey:["sign"],publicKey:["verify"]};this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}};__name(Tn,"EcdsaProvider");var On=["secret","private","public"];var Kn=class{static create(e,t,r,n){const s=new this;s.algorithm=e;s.type=t;s.extractable=r;s.usages=n;return s}static isKeyType(e){return On.indexOf(e)!==-1}get[Symbol.toStringTag](){return"CryptoKey"}};__name(Kn,"CryptoKey");var In=class extends xn{constructor(){super(...arguments);this.name="ECDH";this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]};this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"public");if(!(e.public instanceof Kn)){throw new TypeError("public: Is not a CryptoKey")}if(e.public.type!=="public"){throw new yn("public: Is not a public key")}if(e.public.algorithm.name!==this.name){throw new yn(`public: Is not ${this.name} key`)}}};__name(In,"EcdhProvider");var Pn=class extends In{constructor(){super(...arguments);this.name="ECDH-ES";this.namedCurves=["X25519","X448"]}};__name(Pn,"EcdhEsProvider");var Un=class extends xn{constructor(){super(...arguments);this.name="EdDSA";this.usages={privateKey:["sign"],publicKey:["verify"]};this.namedCurves=["Ed25519","Ed448"]}};__name(Un,"EdDsaProvider");var Ln=__name(class ObjectIdentifier3{constructor(e){if(e){this.value=e}}},"ObjectIdentifier");_r([yr({type:jt.ObjectIdentifier})],Ln.prototype,"value",void 0);Ln=_r([pr({type:Vt.Choice})],Ln);var Dn=class{constructor(e){Object.assign(this,e)}};__name(Dn,"AlgorithmIdentifier");_r([yr({type:jt.ObjectIdentifier})],Dn.prototype,"algorithm",void 0);_r([yr({type:jt.Any,optional:true})],Dn.prototype,"parameters",void 0);var Mn=class{constructor(){this.version=0;this.privateKeyAlgorithm=new Dn;this.privateKey=new ArrayBuffer(0)}};__name(Mn,"PrivateKeyInfo");_r([yr({type:jt.Integer})],Mn.prototype,"version",void 0);_r([yr({type:Dn})],Mn.prototype,"privateKeyAlgorithm",void 0);_r([yr({type:jt.OctetString})],Mn.prototype,"privateKey",void 0);_r([yr({type:jt.Any,optional:true})],Mn.prototype,"attributes",void 0);var Hn=class{constructor(){this.publicKeyAlgorithm=new Dn;this.publicKey=new ArrayBuffer(0)}};__name(Hn,"PublicKeyInfo");_r([yr({type:Dn})],Hn.prototype,"publicKeyAlgorithm",void 0);_r([yr({type:jt.BitString})],Hn.prototype,"publicKey",void 0);var qn={fromJSON:e=>P.FromBase64Url(e),toJSON:e=>P.ToBase64Url(new Uint8Array(e))};var Vn={fromASN:e=>{const t=e.valueBlock.valueHex;return!new Uint8Array(t)[0]?e.valueBlock.valueHex.slice(1):e.valueBlock.valueHex},toASN:e=>{const t=new Uint8Array(e)[0]>127?combine(new Uint8Array([0]).buffer,e):e;return new Ke({valueHex:t})}};var jn=class{constructor(){this.version=0;this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0);this.privateExponent=new ArrayBuffer(0);this.prime1=new ArrayBuffer(0);this.prime2=new ArrayBuffer(0);this.exponent1=new ArrayBuffer(0);this.exponent2=new ArrayBuffer(0);this.coefficient=new ArrayBuffer(0)}};__name(jn,"RsaPrivateKey");_r([yr({type:jt.Integer,converter:Ft})],jn.prototype,"version",void 0);_r([yr({type:jt.Integer,converter:Vn}),hn({name:"n",converter:qn})],jn.prototype,"modulus",void 0);_r([yr({type:jt.Integer,converter:Vn}),hn({name:"e",converter:qn})],jn.prototype,"publicExponent",void 0);_r([yr({type:jt.Integer,converter:Vn}),hn({name:"d",converter:qn})],jn.prototype,"privateExponent",void 0);_r([yr({type:jt.Integer,converter:Vn}),hn({name:"p",converter:qn})],jn.prototype,"prime1",void 0);_r([yr({type:jt.Integer,converter:Vn}),hn({name:"q",converter:qn})],jn.prototype,"prime2",void 0);_r([yr({type:jt.Integer,converter:Vn}),hn({name:"dp",converter:qn})],jn.prototype,"exponent1",void 0);_r([yr({type:jt.Integer,converter:Vn}),hn({name:"dq",converter:qn})],jn.prototype,"exponent2",void 0);_r([yr({type:jt.Integer,converter:Vn}),hn({name:"qi",converter:qn})],jn.prototype,"coefficient",void 0);_r([yr({type:jt.Any,optional:true})],jn.prototype,"otherPrimeInfos",void 0);var Gn=class{constructor(){this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0)}};__name(Gn,"RsaPublicKey");_r([yr({type:jt.Integer,converter:Vn}),hn({name:"n",converter:qn})],Gn.prototype,"modulus",void 0);_r([yr({type:jt.Integer,converter:Vn}),hn({name:"e",converter:qn})],Gn.prototype,"publicExponent",void 0);var Fn=__name(class EcPublicKey2{constructor(e){this.value=new ArrayBuffer(0);if(e){this.value=e}}toJSON(){let e=new Uint8Array(this.value);if(e[0]!==4){throw new fn("Wrong ECPoint. Current version supports only Uncompressed (0x04) point")}e=new Uint8Array(this.value.slice(1));const t=e.length/2;const r=0;const n={x:P.ToBase64Url(e.buffer.slice(r,r+t)),y:P.ToBase64Url(e.buffer.slice(r+t,r+t+t))};return n}fromJSON(e){if(!("x"in e)){throw new Error("x: Missing required property")}if(!("y"in e)){throw new Error("y: Missing required property")}const t=P.FromBase64Url(e.x);const r=P.FromBase64Url(e.y);const n=combine(new Uint8Array([4]).buffer,t,r);this.value=new Uint8Array(n).buffer;return this}},"EcPublicKey");_r([yr({type:jt.OctetString})],Fn.prototype,"value",void 0);Fn=_r([pr({type:Vt.Choice})],Fn);var $n=class{constructor(){this.version=1;this.privateKey=new ArrayBuffer(0)}fromJSON(e){if(!("d"in e)){throw new Error("d: Missing required property")}this.privateKey=P.FromBase64Url(e.d);if("x"in e){const t=new Fn;t.fromJSON(e);this.publicKey=vr.toASN(t).valueBlock.valueHex}return this}toJSON(){const e={};e.d=P.ToBase64Url(this.privateKey);if(this.publicKey){Object.assign(e,new Fn(this.publicKey).toJSON())}return e}};__name($n,"EcPrivateKey");_r([yr({type:jt.Integer,converter:Ft})],$n.prototype,"version",void 0);_r([yr({type:jt.OctetString})],$n.prototype,"privateKey",void 0);_r([yr({context:0,type:jt.Any,optional:true})],$n.prototype,"parameters",void 0);_r([yr({context:1,type:jt.BitString,optional:true})],$n.prototype,"publicKey",void 0);var Jn={fromASN:e=>{const t=new Uint8Array(e.valueBlock.valueHex);return t[0]===0?t.buffer.slice(1):t.buffer},toASN:e=>{const t=new Uint8Array(e);if(t[0]>127){const e=new Uint8Array(t.length+1);e.set(t,1);return new Ke({valueHex:e.buffer})}return new Ke({valueHex:e})}};var Wn=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter:Jn});var zn=class{static decodePoint(e,t){const r=O.toUint8Array(e);if(r.length===0||r[0]!==4){throw new Error("Only uncompressed point format supported")}const n=(r.length-1)/2;if(n!==Math.ceil(t/8)){throw new Error("Point does not match field size")}const s=r.slice(1,n+1);const i=r.slice(n+1,n+1+n);return{x:s,y:i}}static encodePoint(e,t){const r=Math.ceil(t/8);if(e.x.byteLength!==r||e.y.byteLength!==r){throw new Error("X,Y coordinates don't match point size criteria")}const n=O.toUint8Array(e.x);const s=O.toUint8Array(e.y);const i=new Uint8Array(r*2+1);i[0]=4;i.set(n,1);i.set(s,r+1);return i}static getSize(e){return Math.ceil(e/8)}static encodeSignature(e,t){const r=this.getSize(t);const n=O.toUint8Array(e.r);const s=O.toUint8Array(e.s);const i=new Uint8Array(r*2);i.set(this.padStart(n,r));i.set(this.padStart(s,r),r);return i}static decodeSignature(e,t){const r=this.getSize(t);const n=O.toUint8Array(e);if(n.length!==r*2){throw new Error("Incorrect size of the signature")}const s=n.slice(0,r);const i=n.slice(r);return{r:this.trimStart(s),s:this.trimStart(i)}}static trimStart(e){let t=0;while(t<e.length-1&&e[t]===0){t++}if(t===0){return e}return e.slice(t,e.length)}static padStart(e,t){if(t===e.length){return e}const r=new Uint8Array(t);r.set(e,t-e.length);return r}};__name(zn,"EcUtils");var Yn=class{constructor(){this.r=new ArrayBuffer(0);this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(e){const t=e.byteLength/2;const r=zn.decodeSignature(e,t*8);const n=new Yn;n.r=O.toArrayBuffer(r.r);n.s=O.toArrayBuffer(r.s);return n}toWebCryptoSignature(e){e!==null&&e!==void 0?e:e=Math.max(this.r.byteLength,this.s.byteLength)*8;const t=zn.encodeSignature(this,e);return t.buffer}};__name(Yn,"EcDsaSignature");_r([yr({type:jt.Integer,converter:Jn})],Yn.prototype,"r",void 0);_r([yr({type:jt.Integer,converter:Jn})],Yn.prototype,"s",void 0);var Qn=class extends Mn{};__name(Qn,"OneAsymmetricKey");_r([yr({context:1,implicit:true,type:jt.BitString,optional:true})],Qn.prototype,"publicKey",void 0);var Xn=__name(class EdPrivateKey2{constructor(){this.value=new ArrayBuffer(0)}fromJSON(e){if(!e.d){throw new Error("d: Missing required property")}this.value=P.FromBase64Url(e.d);return this}toJSON(){const e={d:P.ToBase64Url(this.value)};return e}},"EdPrivateKey");_r([yr({type:jt.OctetString})],Xn.prototype,"value",void 0);Xn=_r([pr({type:Vt.Choice})],Xn);var Zn=__name(class EdPublicKey2{constructor(e){this.value=new ArrayBuffer(0);if(e){this.value=e}}toJSON(){const e={x:P.ToBase64Url(this.value)};return e}fromJSON(e){if(!("x"in e)){throw new Error("x: Missing required property")}this.value=P.FromBase64Url(e.x);return this}},"EdPublicKey");_r([yr({type:jt.BitString})],Zn.prototype,"value",void 0);Zn=_r([pr({type:Vt.Choice})],Zn);var es=__name(class CurvePrivateKey2{},"CurvePrivateKey");_r([yr({type:jt.OctetString}),hn({type:Xr.String,converter:qn})],es.prototype,"d",void 0);es=_r([pr({type:Vt.Choice})],es);var ts="1.2.840.10045.3.1.7";var rs="1.3.132.0";var ns=`${rs}.34`;var ss=`${rs}.35`;var is=`${rs}.10`;var os="1.3.36.3.3.2.8.1.1";var as=`${os}.1`;var cs=`${os}.2`;var us=`${os}.3`;var ls=`${os}.4`;var hs=`${os}.5`;var fs=`${os}.6`;var ds=`${os}.7`;var ps=`${os}.8`;var ys=`${os}.9`;var gs=`${os}.10`;var ms=`${os}.11`;var vs=`${os}.12`;var Es=`${os}.13`;var Ss=`${os}.14`;var ws="1.3.101.110";var As="1.3.101.111";var bs="1.3.101.112";var _s="1.3.101.113";var Cs=Object.freeze({__proto__:null,converters:Wn,get ObjectIdentifier(){return Ln},AlgorithmIdentifier:Dn,PrivateKeyInfo:Mn,PublicKeyInfo:Hn,RsaPrivateKey:jn,RsaPublicKey:Gn,EcPrivateKey:$n,get EcPublicKey(){return Fn},EcDsaSignature:Yn,OneAsymmetricKey:Qn,get EdPrivateKey(){return Xn},get EdPublicKey(){return Zn},get CurvePrivateKey(){return es},idSecp256r1:ts,idEllipticCurve:rs,idSecp384r1:ns,idSecp521r1:ss,idSecp256k1:is,idVersionOne:os,idBrainpoolP160r1:as,idBrainpoolP160t1:cs,idBrainpoolP192r1:us,idBrainpoolP192t1:ls,idBrainpoolP224r1:hs,idBrainpoolP224t1:fs,idBrainpoolP256r1:ds,idBrainpoolP256t1:ps,idBrainpoolP320r1:ys,idBrainpoolP320t1:gs,idBrainpoolP384r1:ms,idBrainpoolP384t1:vs,idBrainpoolP512r1:Es,idBrainpoolP512t1:Ss,idX25519:ws,idX448:As,idEd25519:bs,idEd448:_s});var Bs=class{constructor(){}static register(e){const t=new Ln;t.value=e.id;const r=Er.serialize(t);this.items.push(__spreadProps(__spreadValues({},e),{raw:r}));this.names.push(e.name)}static find(e){e=e.toUpperCase();for(const t of this.items){if(t.name.toUpperCase()===e||t.id.toUpperCase()===e){return t}}return null}static get(e){const t=this.find(e);if(!t){throw new Error(`Unsupported EC named curve '${e}'`)}return t}};__name(Bs,"EcCurves");Bs.items=[];Bs.names=[];Bs.register({name:"P-256",id:ts,size:256});Bs.register({name:"P-384",id:ns,size:384});Bs.register({name:"P-521",id:ss,size:521});Bs.register({name:"K-256",id:is,size:256});Bs.register({name:"brainpoolP160r1",id:as,size:160});Bs.register({name:"brainpoolP160t1",id:cs,size:160});Bs.register({name:"brainpoolP192r1",id:us,size:192});Bs.register({name:"brainpoolP192t1",id:ls,size:192});Bs.register({name:"brainpoolP224r1",id:hs,size:224});Bs.register({name:"brainpoolP224t1",id:fs,size:224});Bs.register({name:"brainpoolP256r1",id:ds,size:256});Bs.register({name:"brainpoolP256t1",id:ps,size:256});Bs.register({name:"brainpoolP320r1",id:ys,size:320});Bs.register({name:"brainpoolP320t1",id:gs,size:320});Bs.register({name:"brainpoolP384r1",id:ms,size:384});Bs.register({name:"brainpoolP384t1",id:vs,size:384});Bs.register({name:"brainpoolP512r1",id:Es,size:512});Bs.register({name:"brainpoolP512t1",id:Ss,size:512});var ks=class extends mn{constructor(){super(...arguments);this.name="HMAC";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages=["sign","verify"]}getDefaultLength(e){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw new Error(`Unknown algorithm name '${e}'`)}}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);if("length"in e){if(typeof e.length!=="number"){throw new TypeError("length: Is not a Number")}if(e.length<1){throw new RangeError("length: Number is out of range")}}}checkImportParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}};__name(ks,"HmacProvider");var Rs=class extends mn{constructor(){super(...arguments);this.name="PBKDF2";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);this.checkRequiredProperty(e,"salt");if(!(e.salt instanceof ArrayBuffer||ArrayBuffer.isView(e.salt))){throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}this.checkRequiredProperty(e,"iterations");if(typeof e.iterations!=="number"){throw new TypeError("iterations: Is not a Number")}if(e.iterations<1){throw new TypeError("iterations: Is less than 1")}}checkImportKey(e,t,r,n,s,...i){super.checkImportKey(e,t,r,n,s);if(n){throw new SyntaxError("extractable: Must be 'false'")}}};__name(Rs,"Pbkdf2Provider");var Ns=class extends mn{constructor(){super(...arguments);this.name="HKDF";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages=["deriveKey","deriveBits"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);this.checkRequiredProperty(e,"salt");if(!O.isBufferSource(e.salt)){throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}this.checkRequiredProperty(e,"info");if(!O.isBufferSource(e.info)){throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}checkImportKey(e,t,r,n,s,...i){super.checkImportKey(e,t,r,n,s);if(n){throw new SyntaxError("extractable: Must be 'false'")}}};__name(Ns,"HkdfProvider");var xs=class extends mn{constructor(){super(...arguments);this.usages=[];this.defaultLength=0}digest(...e){e[0]=__spreadValues({length:this.defaultLength},e[0]);return super.digest.apply(this,e)}checkDigest(e,t){super.checkDigest(e,t);const r=e.length||0;if(typeof r!=="number"){throw new TypeError("length: Is not a Number")}if(r<0){throw new TypeError("length: Is negative")}}};__name(xs,"ShakeProvider");var Ts=class extends xs{constructor(){super(...arguments);this.name="shake128";this.defaultLength=16}};__name(Ts,"Shake128Provider");var Os=class extends xs{constructor(){super(...arguments);this.name="shake256";this.defaultLength=32}};__name(Os,"Shake256Provider");var Ks=class{get[Symbol.toStringTag](){return"Crypto"}randomUUID(){const e=this.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64;e[8]=e[8]&63|128;const t=P.ToHex(e).toLowerCase();return`${t.substring(0,8)}-${t.substring(8,12)}-${t.substring(12,16)}-${t.substring(16)}`}};__name(Ks,"Crypto");var Is=class{constructor(){this.items={}}get(e){return this.items[e.toLowerCase()]||null}set(e){this.items[e.name.toLowerCase()]=e}removeAt(e){const t=this.get(e.toLowerCase());if(t){delete this.items[e]}return t}has(e){return!!this.get(e)}get length(){return Object.keys(this.items).length}get algorithms(){const e=[];for(const t in this.items){const r=this.items[t];e.push(r.name)}return e.sort()}};__name(Is,"ProviderStorage");var Ps=class{constructor(){this.providers=new Is}static isHashedAlgorithm(e){return e&&typeof e==="object"&&"name"in e&&"hash"in e?true:false}get[Symbol.toStringTag](){return"SubtleCrypto"}async digest(...e){this.checkRequiredArguments(e,2,"digest");const[t,r,...n]=e;const s=this.prepareAlgorithm(t);const i=O.toArrayBuffer(r);const o=this.getProvider(s.name);const a=await o.digest(s,i,...n);return a}async generateKey(...e){this.checkRequiredArguments(e,3,"generateKey");const[t,r,n,...s]=e;const i=this.prepareAlgorithm(t);const o=this.getProvider(i.name);const a=await o.generateKey(__spreadProps(__spreadValues({},i),{name:o.name}),r,n,...s);return a}async sign(...e){this.checkRequiredArguments(e,3,"sign");const[t,r,n,...s]=e;this.checkCryptoKey(r);const i=this.prepareAlgorithm(t);const o=O.toArrayBuffer(n);const a=this.getProvider(i.name);const c=await a.sign(__spreadProps(__spreadValues({},i),{name:a.name}),r,o,...s);return c}async verify(...e){this.checkRequiredArguments(e,4,"verify");const[t,r,n,s,...i]=e;this.checkCryptoKey(r);const o=this.prepareAlgorithm(t);const a=O.toArrayBuffer(s);const c=O.toArrayBuffer(n);const u=this.getProvider(o.name);const l=await u.verify(__spreadProps(__spreadValues({},o),{name:u.name}),r,c,a,...i);return l}async encrypt(...e){this.checkRequiredArguments(e,3,"encrypt");const[t,r,n,...s]=e;this.checkCryptoKey(r);const i=this.prepareAlgorithm(t);const o=O.toArrayBuffer(n);const a=this.getProvider(i.name);const c=await a.encrypt(__spreadProps(__spreadValues({},i),{name:a.name}),r,o,{keyUsage:true},...s);return c}async decrypt(...e){this.checkRequiredArguments(e,3,"decrypt");const[t,r,n,...s]=e;this.checkCryptoKey(r);const i=this.prepareAlgorithm(t);const o=O.toArrayBuffer(n);const a=this.getProvider(i.name);const c=await a.decrypt(__spreadProps(__spreadValues({},i),{name:a.name}),r,o,{keyUsage:true},...s);return c}async deriveBits(...e){this.checkRequiredArguments(e,3,"deriveBits");const[t,r,n,...s]=e;this.checkCryptoKey(r);const i=this.prepareAlgorithm(t);const o=this.getProvider(i.name);const a=await o.deriveBits(__spreadProps(__spreadValues({},i),{name:o.name}),r,n,{keyUsage:true},...s);return a}async deriveKey(...e){this.checkRequiredArguments(e,5,"deriveKey");const[t,r,n,s,i,...o]=e;const a=this.prepareAlgorithm(n);const c=this.getProvider(a.name);c.checkDerivedKeyParams(a);const u=this.prepareAlgorithm(t);const l=this.getProvider(u.name);l.checkCryptoKey(r,"deriveKey");const h=await l.deriveBits(__spreadProps(__spreadValues({},u),{name:l.name}),r,n.length||512,{keyUsage:false},...o);return this.importKey("raw",h,n,s,i,...o)}async exportKey(...e){this.checkRequiredArguments(e,2,"exportKey");const[t,r,...n]=e;this.checkCryptoKey(r);const s=this.getProvider(r.algorithm.name);const i=await s.exportKey(t,r,...n);return i}async importKey(...e){this.checkRequiredArguments(e,5,"importKey");const[t,r,n,s,i,...o]=e;const a=this.prepareAlgorithm(n);const c=this.getProvider(a.name);if(["pkcs8","spki","raw"].indexOf(t)!==-1){const e=O.toArrayBuffer(r);return c.importKey(t,e,__spreadProps(__spreadValues({},a),{name:c.name}),s,i,...o)}else{if(!r.kty){throw new TypeError("keyData: Is not JSON")}}return c.importKey(t,r,__spreadProps(__spreadValues({},a),{name:c.name}),s,i,...o)}async wrapKey(e,t,r,n,...s){let i=await this.exportKey(e,t,...s);if(e==="jwk"){const e=JSON.stringify(i);i=P.FromUtf8String(e)}const o=this.prepareAlgorithm(n);const a=O.toArrayBuffer(i);const c=this.getProvider(o.name);return c.encrypt(__spreadProps(__spreadValues({},o),{name:c.name}),r,a,{keyUsage:false},...s)}async unwrapKey(e,t,r,n,s,i,o,...a){const c=this.prepareAlgorithm(n);const u=O.toArrayBuffer(t);const l=this.getProvider(c.name);let h=await l.decrypt(__spreadProps(__spreadValues({},c),{name:l.name}),r,u,{keyUsage:false},...a);if(e==="jwk"){try{h=JSON.parse(P.ToUtf8String(h))}catch(e){const t=new TypeError("wrappedKey: Is not a JSON");t.internal=e;throw t}}return this.importKey(e,h,s,i,o,...a)}checkRequiredArguments(e,t,r){if(e.length<t){throw new TypeError(`Failed to execute '${r}' on 'SubtleCrypto': ${t} arguments required, but only ${e.length} present`)}}prepareAlgorithm(e){if(typeof e==="string"){return{name:e}}if(Ps.isHashedAlgorithm(e)){const t=__spreadValues({},e);t.hash=this.prepareAlgorithm(e.hash);return t}return __spreadValues({},e)}getProvider(e){const t=this.providers.get(e);if(!t){throw new dn("Unrecognized name")}return t}checkCryptoKey(e){if(!(e instanceof Kn)){throw new TypeError(`Key is not of type 'CryptoKey'`)}}};__name(Ps,"SubtleCrypto");var Us=__toESM(r(113));var Ls=__toESM(r(113));var Ds=__toESM(r(282));var Ms={fromJSON:e=>Buffer.from(P.FromBase64Url(e)),toJSON:e=>P.ToBase64Url(e)};var Hs=class extends Kn{constructor(){super(...arguments);this.data=Buffer.alloc(0);this.algorithm={name:""};this.extractable=false;this.type="secret";this.usages=[];this.kty="oct";this.alg=""}};__name(Hs,"CryptoKey");_r([hn({name:"ext",type:Xr.Boolean,optional:true})],Hs.prototype,"extractable",void 0);_r([hn({name:"key_ops",type:Xr.String,repeated:true,optional:true})],Hs.prototype,"usages",void 0);_r([hn({type:Xr.String})],Hs.prototype,"kty",void 0);_r([hn({type:Xr.String,optional:true})],Hs.prototype,"alg",void 0);var qs=class extends Hs{constructor(){super(...arguments);this.kty="oct";this.type="secret"}};__name(qs,"SymmetricKey");var Vs=class extends Hs{};__name(Vs,"AsymmetricKey");var js=class extends qs{get alg(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-KW":return`A${this.algorithm.length}KW`;case"AES-CMAC":return`A${this.algorithm.length}CMAC`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new dn("Unsupported algorithm name")}}set alg(e){}};__name(js,"AesCryptoKey");_r([hn({name:"k",converter:Ms})],js.prototype,"data",void 0);var Gs=new WeakMap;function getCryptoKey(e){const t=Gs.get(e);if(!t){throw new yn("Cannot get CryptoKey from secure storage")}return t}__name(getCryptoKey,"getCryptoKey");function setCryptoKey(e){const t=Kn.create(e.algorithm,e.type,e.extractable,e.usages);Object.freeze(t);Gs.set(t,e);return t}__name(setCryptoKey,"setCryptoKey");var Fs=class{static async generateKey(e,t,r){const n=new js;n.algorithm=e;n.extractable=t;n.usages=r;n.data=Ls.default.randomBytes(e.length>>3);return n}static async exportKey(e,t){if(!(t instanceof js)){throw new Error("key: Is not AesCryptoKey")}switch(e.toLowerCase()){case"jwk":return un.toJSON(t);case"raw":return new Uint8Array(t.data).buffer;default:throw new yn("format: Must be 'jwk' or 'raw'")}}static async importKey(e,t,r,n,s){let i;switch(e.toLowerCase()){case"jwk":i=ln.fromJSON(t,{targetSchema:js});break;case"raw":i=new js;i.data=Buffer.from(t);break;default:throw new yn("format: Must be 'jwk' or 'raw'")}i.algorithm=r;i.algorithm.length=i.data.length<<3;i.extractable=n;i.usages=s;switch(i.algorithm.length){case 128:case 192:case 256:break;default:throw new yn("keyData: Is wrong key length")}return i}static async encrypt(e,t,r){switch(e.name.toUpperCase()){case"AES-CBC":return this.encryptAesCBC(e,t,Buffer.from(r));case"AES-CTR":return this.encryptAesCTR(e,t,Buffer.from(r));case"AES-GCM":return this.encryptAesGCM(e,t,Buffer.from(r));case"AES-KW":return this.encryptAesKW(e,t,Buffer.from(r));case"AES-ECB":return this.encryptAesECB(e,t,Buffer.from(r));default:throw new yn("algorithm: Is not recognized")}}static async decrypt(e,t,r){if(!(t instanceof js)){throw new Error("key: Is not AesCryptoKey")}switch(e.name.toUpperCase()){case"AES-CBC":return this.decryptAesCBC(e,t,Buffer.from(r));case"AES-CTR":return this.decryptAesCTR(e,t,Buffer.from(r));case"AES-GCM":return this.decryptAesGCM(e,t,Buffer.from(r));case"AES-KW":return this.decryptAesKW(e,t,Buffer.from(r));case"AES-ECB":return this.decryptAesECB(e,t,Buffer.from(r));default:throw new yn("algorithm: Is not recognized")}}static async encryptAesCBC(e,t,r){const n=Ls.default.createCipheriv(`aes-${t.algorithm.length}-cbc`,t.data,new Uint8Array(e.iv));let s=n.update(r);s=Buffer.concat([s,n.final()]);const i=new Uint8Array(s).buffer;return i}static async decryptAesCBC(e,t,r){const n=Ls.default.createDecipheriv(`aes-${t.algorithm.length}-cbc`,t.data,new Uint8Array(e.iv));let s=n.update(r);s=Buffer.concat([s,n.final()]);return new Uint8Array(s).buffer}static async encryptAesCTR(e,t,r){const n=Ls.default.createCipheriv(`aes-${t.algorithm.length}-ctr`,t.data,Buffer.from(e.counter));let s=n.update(r);s=Buffer.concat([s,n.final()]);const i=new Uint8Array(s).buffer;return i}static async decryptAesCTR(e,t,r){const n=Ls.default.createDecipheriv(`aes-${t.algorithm.length}-ctr`,t.data,new Uint8Array(e.counter));let s=n.update(r);s=Buffer.concat([s,n.final()]);return new Uint8Array(s).buffer}static async encryptAesGCM(e,t,r){const n=Ls.default.createCipheriv(`aes-${t.algorithm.length}-gcm`,t.data,Buffer.from(e.iv),{authTagLength:(e.tagLength||128)>>3});if(e.additionalData){n.setAAD(Buffer.from(e.additionalData))}let s=n.update(r);s=Buffer.concat([s,n.final(),n.getAuthTag()]);const i=new Uint8Array(s).buffer;return i}static async decryptAesGCM(e,t,r){const n=Ls.default.createDecipheriv(`aes-${t.algorithm.length}-gcm`,t.data,new Uint8Array(e.iv));const s=(e.tagLength||128)>>3;const i=r.slice(0,r.length-s);const o=r.slice(r.length-s);if(e.additionalData){n.setAAD(Buffer.from(e.additionalData))}n.setAuthTag(o);let a=n.update(i);a=Buffer.concat([a,n.final()]);return new Uint8Array(a).buffer}static async encryptAesKW(e,t,r){const n=Ls.default.createCipheriv(`id-aes${t.algorithm.length}-wrap`,t.data,this.AES_KW_IV);let s=n.update(r);s=Buffer.concat([s,n.final()]);return new Uint8Array(s).buffer}static async decryptAesKW(e,t,r){const n=Ls.default.createDecipheriv(`id-aes${t.algorithm.length}-wrap`,t.data,this.AES_KW_IV);let s=n.update(r);s=Buffer.concat([s,n.final()]);return new Uint8Array(s).buffer}static async encryptAesECB(e,t,r){const n=Ls.default.createCipheriv(`aes-${t.algorithm.length}-ecb`,t.data,new Uint8Array(0));let s=n.update(r);s=Buffer.concat([s,n.final()]);const i=new Uint8Array(s).buffer;return i}static async decryptAesECB(e,t,r){const n=Ls.default.createDecipheriv(`aes-${t.algorithm.length}-ecb`,t.data,new Uint8Array(0));let s=n.update(r);s=Buffer.concat([s,n.final()]);return new Uint8Array(s).buffer}};__name(Fs,"AesCrypto");Fs.AES_KW_IV=Buffer.from("A6A6A6A6A6A6A6A6","hex");var $s=class extends En{async onGenerateKey(e,t,r){const n=await Fs.generateKey({name:this.name,length:e.length},t,r);return setCryptoKey(n)}async onEncrypt(e,t,r){return Fs.encrypt(e,getCryptoKey(t),new Uint8Array(r))}async onDecrypt(e,t,r){return Fs.decrypt(e,getCryptoKey(t),new Uint8Array(r))}async onExportKey(e,t){return Fs.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await Fs.importKey(e,t,{name:r.name},n,s);return setCryptoKey(i)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof js)){throw new TypeError("key: Is not a AesCryptoKey")}}};__name($s,"AesCbcProvider");var Js=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);var Ws=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,135]);var zs=16;function bitShiftLeft(e){const t=Buffer.alloc(e.length);const r=e.length-1;for(let n=0;n<r;n++){t[n]=e[n]<<1;if(e[n+1]&128){t[n]+=1}}t[r]=e[r]<<1;return t}__name(bitShiftLeft,"bitShiftLeft");function xor(e,t){const r=Math.min(e.length,t.length);const n=Buffer.alloc(r);for(let s=0;s<r;s++){n[s]=e[s]^t[s]}return n}__name(xor,"xor");function aes(e,t){const r=Us.createCipheriv(`aes${e.length<<3}`,e,Js);const n=r.update(t);r.final();return n}__name(aes,"aes");function getMessageBlock(e,t){const r=Buffer.alloc(zs);const n=t*zs;const s=n+zs;e.copy(r,0,n,s);return r}__name(getMessageBlock,"getMessageBlock");function getPaddedMessageBlock(e,t){const r=Buffer.alloc(zs);const n=t*zs;const s=e.length;r.fill(0);e.copy(r,0,n,s);r[s-n]=128;return r}__name(getPaddedMessageBlock,"getPaddedMessageBlock");function generateSubkeys(e){const t=aes(e,Js);let r=bitShiftLeft(t);if(t[0]&128){r=xor(r,Ws)}let n=bitShiftLeft(r);if(r[0]&128){n=xor(n,Ws)}return{subkey1:r,subkey2:n}}__name(generateSubkeys,"generateSubkeys");function aesCmac(e,t){const r=generateSubkeys(e);let n=Math.ceil(t.length/zs);let s;let i;if(n===0){n=1;s=false}else{s=t.length%zs===0}const o=n-1;if(s){i=xor(getMessageBlock(t,o),r.subkey1)}else{i=xor(getPaddedMessageBlock(t,o),r.subkey2)}let a=Js;let c;for(let r=0;r<o;r++){c=xor(a,getMessageBlock(t,r));a=aes(e,c)}c=xor(i,a);return aes(e,c)}__name(aesCmac,"aesCmac");var Ys=class extends Sn{async onGenerateKey(e,t,r){const n=await Fs.generateKey({name:this.name,length:e.length},t,r);return setCryptoKey(n)}async onSign(e,t,r){const n=aesCmac(getCryptoKey(t).data,Buffer.from(r));return new Uint8Array(n).buffer}async onVerify(e,t,r,n){const s=await this.sign(e,t,n);return Buffer.from(r).compare(Buffer.from(s))===0}async onExportKey(e,t){return Fs.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await Fs.importKey(e,t,{name:r.name},n,s);return setCryptoKey(i)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof js)){throw new TypeError("key: Is not a AesCryptoKey")}}};__name(Ys,"AesCmacProvider");var Qs=class extends wn{async onGenerateKey(e,t,r){const n=await Fs.generateKey({name:this.name,length:e.length},t,r);return setCryptoKey(n)}async onEncrypt(e,t,r){return Fs.encrypt(e,getCryptoKey(t),new Uint8Array(r))}async onDecrypt(e,t,r){return Fs.decrypt(e,getCryptoKey(t),new Uint8Array(r))}async onExportKey(e,t){return Fs.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await Fs.importKey(e,t,{name:r.name},n,s);return setCryptoKey(i)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof js)){throw new TypeError("key: Is not a AesCryptoKey")}}};__name(Qs,"AesCtrProvider");var Xs=class extends bn{async onGenerateKey(e,t,r){const n=await Fs.generateKey({name:this.name,length:e.length},t,r);return setCryptoKey(n)}async onEncrypt(e,t,r){return Fs.encrypt(e,getCryptoKey(t),new Uint8Array(r))}async onDecrypt(e,t,r){return Fs.decrypt(e,getCryptoKey(t),new Uint8Array(r))}async onExportKey(e,t){return Fs.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await Fs.importKey(e,t,{name:r.name},n,s);return setCryptoKey(i)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof js)){throw new TypeError("key: Is not a AesCryptoKey")}}};__name(Xs,"AesGcmProvider");var Zs=class extends _n{async onGenerateKey(e,t,r){const n=await Fs.generateKey({name:this.name,length:e.length},t,r);return setCryptoKey(n)}async onExportKey(e,t){return Fs.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await Fs.importKey(e,t,{name:r.name},n,s);return setCryptoKey(i)}async onEncrypt(e,t,r){return Fs.encrypt(e,getCryptoKey(t),new Uint8Array(r))}async onDecrypt(e,t,r){return Fs.decrypt(e,getCryptoKey(t),new Uint8Array(r))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof js)){throw new TypeError("key: Is not a AesCryptoKey")}}};__name(Zs,"AesKwProvider");var ei=class extends An{async onGenerateKey(e,t,r){const n=await Fs.generateKey({name:this.name,length:e.length},t,r);return setCryptoKey(n)}async onEncrypt(e,t,r){return Fs.encrypt(e,getCryptoKey(t),new Uint8Array(r))}async onDecrypt(e,t,r){return Fs.decrypt(e,getCryptoKey(t),new Uint8Array(r))}async onExportKey(e,t){return Fs.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await Fs.importKey(e,t,{name:r.name},n,s);return setCryptoKey(i)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof js)){throw new TypeError("key: Is not a AesCryptoKey")}}};__name(ei,"AesEcbProvider");var ti=class extends qs{get alg(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return`DES-CBC`;case"DES-EDE3-CBC":return`3DES-CBC`;default:throw new dn("Unsupported algorithm name")}}set alg(e){}};__name(ti,"DesCryptoKey");_r([hn({name:"k",converter:Ms})],ti.prototype,"data",void 0);var ri=class{static async generateKey(e,t,r){const n=new ti;n.algorithm=e;n.extractable=t;n.usages=r;n.data=Ls.default.randomBytes(e.length>>3);return n}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return un.toJSON(t);case"raw":return new Uint8Array(t.data).buffer;default:throw new yn("format: Must be 'jwk' or 'raw'")}}static async importKey(e,t,r,n,s){let i;switch(e.toLowerCase()){case"jwk":i=ln.fromJSON(t,{targetSchema:ti});break;case"raw":i=new ti;i.data=Buffer.from(t);break;default:throw new yn("format: Must be 'jwk' or 'raw'")}i.algorithm=r;i.extractable=n;i.usages=s;return i}static async encrypt(e,t,r){switch(e.name.toUpperCase()){case"DES-CBC":return this.encryptDesCBC(e,t,Buffer.from(r));case"DES-EDE3-CBC":return this.encryptDesEDE3CBC(e,t,Buffer.from(r));default:throw new yn("algorithm: Is not recognized")}}static async decrypt(e,t,r){if(!(t instanceof ti)){throw new Error("key: Is not DesCryptoKey")}switch(e.name.toUpperCase()){case"DES-CBC":return this.decryptDesCBC(e,t,Buffer.from(r));case"DES-EDE3-CBC":return this.decryptDesEDE3CBC(e,t,Buffer.from(r));default:throw new yn("algorithm: Is not recognized")}}static async encryptDesCBC(e,t,r){const n=Ls.default.createCipheriv(`des-cbc`,t.data,new Uint8Array(e.iv));let s=n.update(r);s=Buffer.concat([s,n.final()]);const i=new Uint8Array(s).buffer;return i}static async decryptDesCBC(e,t,r){const n=Ls.default.createDecipheriv(`des-cbc`,t.data,new Uint8Array(e.iv));let s=n.update(r);s=Buffer.concat([s,n.final()]);return new Uint8Array(s).buffer}static async encryptDesEDE3CBC(e,t,r){const n=Ls.default.createCipheriv(`des-ede3-cbc`,t.data,Buffer.from(e.iv));let s=n.update(r);s=Buffer.concat([s,n.final()]);const i=new Uint8Array(s).buffer;return i}static async decryptDesEDE3CBC(e,t,r){const n=Ls.default.createDecipheriv(`des-ede3-cbc`,t.data,new Uint8Array(e.iv));let s=n.update(r);s=Buffer.concat([s,n.final()]);return new Uint8Array(s).buffer}};__name(ri,"DesCrypto");var ni=class extends Cn{constructor(){super(...arguments);this.keySizeBits=64;this.ivSize=8;this.name="DES-CBC"}async onGenerateKey(e,t,r){const n=await ri.generateKey({name:this.name,length:this.keySizeBits},t,r);return setCryptoKey(n)}async onEncrypt(e,t,r){return ri.encrypt(e,getCryptoKey(t),new Uint8Array(r))}async onDecrypt(e,t,r){return ri.decrypt(e,getCryptoKey(t),new Uint8Array(r))}async onExportKey(e,t){return ri.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await ri.importKey(e,t,{name:this.name,length:this.keySizeBits},n,s);if(i.data.length!==this.keySizeBits>>3){throw new yn("keyData: Wrong key size")}return setCryptoKey(i)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof ti)){throw new TypeError("key: Is not a DesCryptoKey")}}};__name(ni,"DesCbcProvider");var si=class extends Cn{constructor(){super(...arguments);this.keySizeBits=192;this.ivSize=8;this.name="DES-EDE3-CBC"}async onGenerateKey(e,t,r){const n=await ri.generateKey({name:this.name,length:this.keySizeBits},t,r);return setCryptoKey(n)}async onEncrypt(e,t,r){return ri.encrypt(e,getCryptoKey(t),new Uint8Array(r))}async onDecrypt(e,t,r){return ri.decrypt(e,getCryptoKey(t),new Uint8Array(r))}async onExportKey(e,t){return ri.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await ri.importKey(e,t,{name:this.name,length:this.keySizeBits},n,s);if(i.data.length!==this.keySizeBits>>3){throw new yn("keyData: Wrong key size")}return setCryptoKey(i)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof ti)){throw new TypeError("key: Is not a DesCryptoKey")}}};__name(si,"DesEde3CbcProvider");function getJwkAlgorithm(e){switch(e.name.toUpperCase()){case"RSA-OAEP":{const t=/(\d+)$/.exec(e.hash.name)[1];return`RSA-OAEP${t!=="1"?`-${t}`:""}`}case"RSASSA-PKCS1-V1_5":return`RS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PSS":return`PS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PKCS1":return`RS1`;default:throw new yn("algorithm: Is not recognized")}}__name(getJwkAlgorithm,"getJwkAlgorithm");var ii=class extends Vs{constructor(){super(...arguments);this.type="private"}getKey(){const e=mr.parse(this.data,Cs.PrivateKeyInfo);return mr.parse(e.privateKey,Cs.RsaPrivateKey)}toJSON(){const e=this.getKey();const t={kty:"RSA",alg:getJwkAlgorithm(this.algorithm),key_ops:this.usages,ext:this.extractable};return Object.assign(t,un.toJSON(e))}fromJSON(e){const t=ln.fromJSON(e,{targetSchema:Cs.RsaPrivateKey});const r=new Cs.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1";r.privateKeyAlgorithm.parameters=null;r.privateKey=vr.serialize(t);this.data=Buffer.from(vr.serialize(r))}};__name(ii,"RsaPrivateKey");var oi=class extends Vs{constructor(){super(...arguments);this.type="public"}getKey(){const e=mr.parse(this.data,Cs.PublicKeyInfo);return mr.parse(e.publicKey,Cs.RsaPublicKey)}toJSON(){const e=this.getKey();const t={kty:"RSA",alg:getJwkAlgorithm(this.algorithm),key_ops:this.usages,ext:this.extractable};return Object.assign(t,un.toJSON(e))}fromJSON(e){const t=ln.fromJSON(e,{targetSchema:Cs.RsaPublicKey});const r=new Cs.PublicKeyInfo;r.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1";r.publicKeyAlgorithm.parameters=null;r.publicKey=vr.serialize(t);this.data=Buffer.from(vr.serialize(r))}};__name(oi,"RsaPublicKey");var ai=class{static async generateKey(e,t,r){const n=new ii;n.algorithm=e;n.extractable=t;n.usages=r.filter((e=>this.privateKeyUsages.indexOf(e)!==-1));const s=new oi;s.algorithm=e;s.extractable=true;s.usages=r.filter((e=>this.publicKeyUsages.indexOf(e)!==-1));const i=Buffer.concat([Buffer.alloc(4-e.publicExponent.byteLength,0),Buffer.from(e.publicExponent)]).readInt32BE(0);const o=Ls.default.generateKeyPairSync("rsa",{modulusLength:e.modulusLength,publicExponent:i,publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});n.data=o.privateKey;s.data=o.publicKey;const a={privateKey:n,publicKey:s};return a}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return un.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;default:throw new yn("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async importKey(e,t,r,n,s){switch(e.toLowerCase()){case"jwk":{const e=t;if(e.d){const e=ln.fromJSON(t,{targetSchema:Cs.RsaPrivateKey});return this.importPrivateKey(e,r,n,s)}else{const e=ln.fromJSON(t,{targetSchema:Cs.RsaPublicKey});return this.importPublicKey(e,r,n,s)}}case"spki":{const e=mr.parse(new Uint8Array(t),Cs.PublicKeyInfo);const i=mr.parse(e.publicKey,Cs.RsaPublicKey);return this.importPublicKey(i,r,n,s)}case"pkcs8":{const e=mr.parse(new Uint8Array(t),Cs.PrivateKeyInfo);const i=mr.parse(e.privateKey,Cs.RsaPrivateKey);return this.importPrivateKey(i,r,n,s)}default:throw new yn("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async sign(e,t,r){switch(e.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.signRsa(e,t,r);default:throw new yn("algorithm: Is not recognized")}}static async verify(e,t,r,n){switch(e.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.verifySSA(e,t,n,r);default:throw new yn("algorithm: Is not recognized")}}static async encrypt(e,t,r){switch(e.name.toUpperCase()){case"RSA-OAEP":return this.encryptOAEP(e,t,r);default:throw new yn("algorithm: Is not recognized")}}static async decrypt(e,t,r){switch(e.name.toUpperCase()){case"RSA-OAEP":return this.decryptOAEP(e,t,r);default:throw new yn("algorithm: Is not recognized")}}static importPrivateKey(e,t,r,n){const s=new Cs.PrivateKeyInfo;s.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1";s.privateKeyAlgorithm.parameters=null;s.privateKey=vr.serialize(e);const i=new ii;i.data=Buffer.from(vr.serialize(s));i.algorithm=Object.assign({},t);i.algorithm.publicExponent=new Uint8Array(e.publicExponent);i.algorithm.modulusLength=e.modulus.byteLength<<3;i.extractable=r;i.usages=n;return i}static importPublicKey(e,t,r,n){const s=new Cs.PublicKeyInfo;s.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1";s.publicKeyAlgorithm.parameters=null;s.publicKey=vr.serialize(e);const i=new oi;i.data=Buffer.from(vr.serialize(s));i.algorithm=Object.assign({},t);i.algorithm.publicExponent=new Uint8Array(e.publicExponent);i.algorithm.modulusLength=e.modulus.byteLength<<3;i.extractable=r;i.usages=n;return i}static getCryptoAlgorithm(e){switch(e.hash.name.toUpperCase()){case"SHA-1":return"RSA-SHA1";case"SHA-256":return"RSA-SHA256";case"SHA-384":return"RSA-SHA384";case"SHA-512":return"RSA-SHA512";case"SHA3-256":return"RSA-SHA3-256";case"SHA3-384":return"RSA-SHA3-384";case"SHA3-512":return"RSA-SHA3-512";default:throw new yn("algorithm.hash: Is not recognized")}}static signRsa(e,t,r){const n=this.getCryptoAlgorithm(t.algorithm);const s=Ls.default.createSign(n);s.update(Buffer.from(r));if(!t.pem){t.pem=`-----BEGIN PRIVATE KEY-----\n${t.data.toString("base64")}\n-----END PRIVATE KEY-----`}const i={key:t.pem};if(e.name.toUpperCase()==="RSA-PSS"){i.padding=Ls.default.constants.RSA_PKCS1_PSS_PADDING;i.saltLength=e.saltLength}const o=s.sign(i);return new Uint8Array(o).buffer}static verifySSA(e,t,r,n){const s=this.getCryptoAlgorithm(t.algorithm);const i=Ls.default.createVerify(s);i.update(Buffer.from(r));if(!t.pem){t.pem=`-----BEGIN PUBLIC KEY-----\n${t.data.toString("base64")}\n-----END PUBLIC KEY-----`}const o={key:t.pem};if(e.name.toUpperCase()==="RSA-PSS"){o.padding=Ls.default.constants.RSA_PKCS1_PSS_PADDING;o.saltLength=e.saltLength}const a=i.verify(o,n);return a}static encryptOAEP(e,t,r){const n={key:`-----BEGIN PUBLIC KEY-----\n${t.data.toString("base64")}\n-----END PUBLIC KEY-----`,padding:Ls.default.constants.RSA_PKCS1_OAEP_PADDING};if(e.label);return new Uint8Array(Ls.default.publicEncrypt(n,r)).buffer}static decryptOAEP(e,t,r){const n={key:`-----BEGIN PRIVATE KEY-----\n${t.data.toString("base64")}\n-----END PRIVATE KEY-----`,padding:Ls.default.constants.RSA_PKCS1_OAEP_PADDING};if(e.label);return new Uint8Array(Ls.default.privateDecrypt(n,r)).buffer}};__name(ai,"RsaCrypto");ai.publicKeyUsages=["verify","encrypt","wrapKey"];ai.privateKeyUsages=["sign","decrypt","unwrapKey"];var ci=class extends kn{constructor(){super(...arguments);this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){const n=await ai.generateKey(__spreadProps(__spreadValues({},e),{name:this.name}),t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onSign(e,t,r){return ai.sign(e,getCryptoKey(t),new Uint8Array(r))}async onVerify(e,t,r,n){return ai.verify(e,getCryptoKey(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return ai.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await ai.importKey(e,t,__spreadProps(__spreadValues({},r),{name:this.name}),n,s);return setCryptoKey(i)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);const r=getCryptoKey(e);if(!(r instanceof ii||r instanceof oi)){throw new TypeError("key: Is not RSA CryptoKey")}}};__name(ci,"RsaSsaProvider");var ui=class extends Rn{constructor(){super(...arguments);this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){const n=await ai.generateKey(__spreadProps(__spreadValues({},e),{name:this.name}),t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onSign(e,t,r){return ai.sign(e,getCryptoKey(t),new Uint8Array(r))}async onVerify(e,t,r,n){return ai.verify(e,getCryptoKey(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return ai.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await ai.importKey(e,t,__spreadProps(__spreadValues({},r),{name:this.name}),n,s);return setCryptoKey(i)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);const r=getCryptoKey(e);if(!(r instanceof ii||r instanceof oi)){throw new TypeError("key: Is not RSA CryptoKey")}}};__name(ui,"RsaPssProvider");var li=class{static size(e){switch(e.name.toUpperCase()){case"SHA-1":return 160;case"SHA-256":case"SHA3-256":return 256;case"SHA-384":case"SHA3-384":return 384;case"SHA-512":case"SHA3-512":return 512;default:throw new Error("Unrecognized name")}}static getAlgorithmName(e){switch(e.name.toUpperCase()){case"SHA-1":return"sha1";case"SHA-256":return"sha256";case"SHA-384":return"sha384";case"SHA-512":return"sha512";case"SHA3-256":return"sha3-256";case"SHA3-384":return"sha3-384";case"SHA3-512":return"sha3-512";default:throw new Error("Unrecognized name")}}static digest(e,t){const r=this.getAlgorithmName(e);const n=Ls.default.createHash(r).update(Buffer.from(t)).digest();return new Uint8Array(n).buffer}};__name(li,"ShaCrypto");var hi=class extends Nn{async onGenerateKey(e,t,r){const n=await ai.generateKey(__spreadProps(__spreadValues({},e),{name:this.name}),t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onEncrypt(e,t,r){const n=getCryptoKey(t);const s=new Uint8Array(r);const i=Math.ceil(n.algorithm.modulusLength>>3);const o=li.size(n.algorithm.hash)>>3;const a=s.byteLength;const c=i-a-2*o-2;if(a>i-2*o-2){throw new Error("Data too large")}const u=new Uint8Array(i);const l=u.subarray(1,o+1);const h=u.subarray(o+1);h.set(s,o+c+1);const f=Ls.default.createHash(n.algorithm.hash.name.replace("-","")).update(O.toUint8Array(e.label||new Uint8Array(0))).digest();h.set(f,0);h[o+c]=1;Ls.default.randomFillSync(l);const d=this.mgf1(n.algorithm.hash,l,h.length);for(let e=0;e<h.length;e++){h[e]^=d[e]}const p=this.mgf1(n.algorithm.hash,h,l.length);for(let e=0;e<l.length;e++){l[e]^=p[e]}if(!n.pem){n.pem=`-----BEGIN PUBLIC KEY-----\n${n.data.toString("base64")}\n-----END PUBLIC KEY-----`}const y=Ls.default.publicEncrypt({key:n.pem,padding:Ls.default.constants.RSA_NO_PADDING},Buffer.from(u));return new Uint8Array(y).buffer}async onDecrypt(e,t,r){const n=getCryptoKey(t);const s=Math.ceil(n.algorithm.modulusLength>>3);const i=li.size(n.algorithm.hash)>>3;const o=r.byteLength;if(o!==s){throw new Error("Bad data")}if(!n.pem){n.pem=`-----BEGIN PRIVATE KEY-----\n${n.data.toString("base64")}\n-----END PRIVATE KEY-----`}let a=Ls.default.privateDecrypt({key:n.pem,padding:Ls.default.constants.RSA_NO_PADDING},Buffer.from(r));const c=a[0];const u=a.subarray(1,i+1);const l=a.subarray(i+1);if(c!==0){throw new Error("Decryption failed")}const h=this.mgf1(n.algorithm.hash,l,u.length);for(let e=0;e<u.length;e++){u[e]^=h[e]}const f=this.mgf1(n.algorithm.hash,u,l.length);for(let e=0;e<l.length;e++){l[e]^=f[e]}const d=Ls.default.createHash(n.algorithm.hash.name.replace("-","")).update(O.toUint8Array(e.label||new Uint8Array(0))).digest();for(let e=0;e<i;e++){if(d[e]!==l[e]){throw new Error("Decryption failed")}}let p=i;for(;p<l.length;p++){const e=l[p];if(e===1){break}if(e!==0){throw new Error("Decryption failed")}}if(p===l.length){throw new Error("Decryption failed")}a=l.subarray(p+1);return new Uint8Array(a).buffer}async onExportKey(e,t){return ai.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await ai.importKey(e,t,__spreadProps(__spreadValues({},r),{name:this.name}),n,s);return setCryptoKey(i)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);const r=getCryptoKey(e);if(!(r instanceof ii||r instanceof oi)){throw new TypeError("key: Is not RSA CryptoKey")}}mgf1(e,t,r=0){const n=li.size(e)>>3;const s=new Uint8Array(r);const i=new Uint8Array(4);const o=Math.ceil(r/n);for(let r=0;r<o;r++){i[0]=r>>>24;i[1]=r>>>16&255;i[2]=r>>>8&255;i[3]=r&255;const o=s.subarray(r*n);let a=Ls.default.createHash(e.name.replace("-","")).update(t).update(i).digest();if(a.length>o.length){a=a.subarray(0,o.length)}o.set(a)}return s}};__name(hi,"RsaOaepProvider");var fi=class extends mn{constructor(){super(...arguments);this.name="RSAES-PKCS1-v1_5";this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]}}async onGenerateKey(e,t,r){const n=await ai.generateKey(__spreadProps(__spreadValues({},e),{name:this.name}),t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"publicExponent");if(!(e.publicExponent&&e.publicExponent instanceof Uint8Array)){throw new TypeError("publicExponent: Missing or not a Uint8Array")}const t=P.ToBase64(e.publicExponent);if(!(t==="Aw=="||t==="AQAB")){throw new TypeError("publicExponent: Must be [3] or [1,0,1]")}this.checkRequiredProperty(e,"modulusLength");switch(e.modulusLength){case 1024:case 2048:case 4096:break;default:throw new TypeError("modulusLength: Must be 1024, 2048, or 4096")}}async onEncrypt(e,t,r){const n=this.toCryptoOptions(t);const s=Us.publicEncrypt(n,new Uint8Array(r));return new Uint8Array(s).buffer}async onDecrypt(e,t,r){const n=this.toCryptoOptions(t);const s=Us.privateDecrypt(n,new Uint8Array(r));return new Uint8Array(s).buffer}async onExportKey(e,t){return ai.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await ai.importKey(e,t,__spreadProps(__spreadValues({},r),{name:this.name}),n,s);return setCryptoKey(i)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);const r=getCryptoKey(e);if(!(r instanceof ii||r instanceof oi)){throw new TypeError("key: Is not RSA CryptoKey")}}toCryptoOptions(e){const t=e.type.toUpperCase();return{key:`-----BEGIN ${t} KEY-----\n${getCryptoKey(e).data.toString("base64")}\n-----END ${t} KEY-----`,padding:Us.constants.RSA_PKCS1_PADDING}}};__name(fi,"RsaEsProvider");var di={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10",brainpoolP160r1:"1.3.36.3.3.2.8.1.1.1","1.3.36.3.3.2.8.1.1.1":"brainpoolP160r1",brainpoolP160t1:"1.3.36.3.3.2.8.1.1.2","1.3.36.3.3.2.8.1.1.2":"brainpoolP160t1",brainpoolP192r1:"1.3.36.3.3.2.8.1.1.3","1.3.36.3.3.2.8.1.1.3":"brainpoolP192r1",brainpoolP192t1:"1.3.36.3.3.2.8.1.1.4","1.3.36.3.3.2.8.1.1.4":"brainpoolP192t1",brainpoolP224r1:"1.3.36.3.3.2.8.1.1.5","1.3.36.3.3.2.8.1.1.5":"brainpoolP224r1",brainpoolP224t1:"1.3.36.3.3.2.8.1.1.6","1.3.36.3.3.2.8.1.1.6":"brainpoolP224t1",brainpoolP256r1:"1.3.36.3.3.2.8.1.1.7","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1",brainpoolP256t1:"1.3.36.3.3.2.8.1.1.8","1.3.36.3.3.2.8.1.1.8":"brainpoolP256t1",brainpoolP320r1:"1.3.36.3.3.2.8.1.1.9","1.3.36.3.3.2.8.1.1.9":"brainpoolP320r1",brainpoolP320t1:"1.3.36.3.3.2.8.1.1.10","1.3.36.3.3.2.8.1.1.10":"brainpoolP320t1",brainpoolP384r1:"1.3.36.3.3.2.8.1.1.11","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1",brainpoolP384t1:"1.3.36.3.3.2.8.1.1.12","1.3.36.3.3.2.8.1.1.12":"brainpoolP384t1",brainpoolP512r1:"1.3.36.3.3.2.8.1.1.13","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1",brainpoolP512t1:"1.3.36.3.3.2.8.1.1.14","1.3.36.3.3.2.8.1.1.14":"brainpoolP512t1"};function getOidByNamedCurve$1(e){const t=di[e];if(!t){throw new yn(`Cannot convert WebCrypto named curve '${e}' to OID`)}return t}__name(getOidByNamedCurve$1,"getOidByNamedCurve$1");var pi=class extends Vs{constructor(){super(...arguments);this.type="private"}getKey(){const e=mr.parse(this.data,Cs.PrivateKeyInfo);return mr.parse(e.privateKey,Cs.EcPrivateKey)}toJSON(){const e=this.getKey();const t={kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(t,un.toJSON(e))}fromJSON(e){if(!e.crv){throw new yn(`Cannot get named curve from JWK. Property 'crv' is required`)}const t=new Cs.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1";t.privateKeyAlgorithm.parameters=vr.serialize(new Cs.ObjectIdentifier(getOidByNamedCurve$1(e.crv)));const r=ln.fromJSON(e,{targetSchema:Cs.EcPrivateKey});t.privateKey=vr.serialize(r);this.data=Buffer.from(vr.serialize(t));return this}};__name(pi,"EcPrivateKey");var yi=class extends Vs{constructor(){super(...arguments);this.type="public"}getKey(){const e=mr.parse(this.data,Cs.PublicKeyInfo);return new Cs.EcPublicKey(e.publicKey)}toJSON(){const e=this.getKey();const t={kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(t,un.toJSON(e))}fromJSON(e){if(!e.crv){throw new yn(`Cannot get named curve from JWK. Property 'crv' is required`)}const t=ln.fromJSON(e,{targetSchema:Cs.EcPublicKey});const r=new Cs.PublicKeyInfo;r.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1";r.publicKeyAlgorithm.parameters=vr.serialize(new Cs.ObjectIdentifier(getOidByNamedCurve$1(e.crv)));r.publicKey=vr.toASN(t).valueHex;this.data=Buffer.from(vr.serialize(r));return this}};__name(yi,"EcPublicKey");var gi=class extends mn{constructor(){super(...arguments);this.name="SHA-1";this.usages=[]}async onDigest(e,t){return li.digest(e,t)}};__name(gi,"Sha1Provider");var mi=class extends mn{constructor(){super(...arguments);this.name="SHA-256";this.usages=[]}async onDigest(e,t){return li.digest(e,t)}};__name(mi,"Sha256Provider");var vi=class extends mn{constructor(){super(...arguments);this.name="SHA-384";this.usages=[]}async onDigest(e,t){return li.digest(e,t)}};__name(vi,"Sha384Provider");var Ei=class extends mn{constructor(){super(...arguments);this.name="SHA-512";this.usages=[]}async onDigest(e,t){return li.digest(e,t)}};__name(Ei,"Sha512Provider");var Si=class extends mn{constructor(){super(...arguments);this.name="SHA3-256";this.usages=[]}async onDigest(e,t){return li.digest(e,t)}};__name(Si,"Sha3256Provider");var wi=class extends mn{constructor(){super(...arguments);this.name="SHA3-384";this.usages=[]}async onDigest(e,t){return li.digest(e,t)}};__name(wi,"Sha3384Provider");var Ai=class extends mn{constructor(){super(...arguments);this.name="SHA3-512";this.usages=[]}async onDigest(e,t){return li.digest(e,t)}};__name(Ai,"Sha3512Provider");var bi=class{static async generateKey(e,t,r){const n=new pi;n.algorithm=e;n.extractable=t;n.usages=r.filter((e=>this.privateKeyUsages.indexOf(e)!==-1));const s=new yi;s.algorithm=e;s.extractable=true;s.usages=r.filter((e=>this.publicKeyUsages.indexOf(e)!==-1));const i=Ls.default.generateKeyPairSync("ec",{namedCurve:this.getOpenSSLNamedCurve(e.namedCurve),publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});n.data=i.privateKey;s.data=i.publicKey;const o={privateKey:n,publicKey:s};return o}static async sign(e,t,r){const n=li.getAlgorithmName(e.hash);const s=Ls.default.createSign(n);s.update(Buffer.from(r));if(!t.pem){t.pem=`-----BEGIN PRIVATE KEY-----\n${t.data.toString("base64")}\n-----END PRIVATE KEY-----`}const i={key:t.pem};const o=s.sign(i);const a=mr.parse(o,Cs.EcDsaSignature);const c=zn.encodeSignature(a,Bs.get(t.algorithm.namedCurve).size);return c.buffer}static async verify(e,t,r,n){const s=li.getAlgorithmName(e.hash);const i=Ls.default.createVerify(s);i.update(Buffer.from(n));if(!t.pem){t.pem=`-----BEGIN PUBLIC KEY-----\n${t.data.toString("base64")}\n-----END PUBLIC KEY-----`}const o={key:t.pem};const a=new Cs.EcDsaSignature;const c=Bs.get(t.algorithm.namedCurve);const u=zn.decodeSignature(r,c.size);a.r=O.toArrayBuffer(u.r);a.s=O.toArrayBuffer(u.s);const l=Buffer.from(vr.serialize(a));const h=i.verify(o,l);return h}static async deriveBits(e,t,r){const n=this.getOpenSSLNamedCurve(t.algorithm.namedCurve);const s=Ls.default.createECDH(n);const i=mr.parse(t.data,Cs.PrivateKeyInfo);const o=mr.parse(i.privateKey,Cs.EcPrivateKey);s.setPrivateKey(Buffer.from(o.privateKey));const a=mr.parse(e.public.data,Cs.PublicKeyInfo);const c=s.computeSecret(Buffer.from(a.publicKey));return new Uint8Array(c).buffer.slice(0,r>>3)}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return un.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;case"raw":{const e=mr.parse(t.data,Cs.PublicKeyInfo);return e.publicKey}default:throw new yn("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(e,t,r,n,s){switch(e.toLowerCase()){case"jwk":{const e=t;if(e.d){const e=ln.fromJSON(t,{targetSchema:Cs.EcPrivateKey});return this.importPrivateKey(e,r,n,s)}else{const e=ln.fromJSON(t,{targetSchema:Cs.EcPublicKey});return this.importPublicKey(e,r,n,s)}}case"raw":{const e=new Cs.EcPublicKey(t);return this.importPublicKey(e,r,n,s)}case"spki":{const e=mr.parse(new Uint8Array(t),Cs.PublicKeyInfo);const i=new Cs.EcPublicKey(e.publicKey);this.assertKeyParameters(e.publicKeyAlgorithm.parameters,r.namedCurve);return this.importPublicKey(i,r,n,s)}case"pkcs8":{const e=mr.parse(new Uint8Array(t),Cs.PrivateKeyInfo);const i=mr.parse(e.privateKey,Cs.EcPrivateKey);this.assertKeyParameters(e.privateKeyAlgorithm.parameters,r.namedCurve);return this.importPrivateKey(i,r,n,s)}default:throw new yn("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static assertKeyParameters(e,t){if(!e){throw new fn("Key info doesn't have required parameters")}let r="";try{r=mr.parse(e,Cs.ObjectIdentifier).value}catch(e){throw new fn("Cannot read key info parameters")}if(getOidByNamedCurve$1(t)!==r){throw new fn("Key info parameter doesn't match to named curve")}}static async importPrivateKey(e,t,r,n){const s=new Cs.PrivateKeyInfo;s.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1";s.privateKeyAlgorithm.parameters=vr.serialize(new Cs.ObjectIdentifier(getOidByNamedCurve$1(t.namedCurve)));s.privateKey=vr.serialize(e);const i=new pi;i.data=Buffer.from(vr.serialize(s));i.algorithm=Object.assign({},t);i.extractable=r;i.usages=n;return i}static async importPublicKey(e,t,r,n){const s=new Cs.PublicKeyInfo;s.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1";const i=getOidByNamedCurve$1(t.namedCurve);s.publicKeyAlgorithm.parameters=vr.serialize(new Cs.ObjectIdentifier(i));s.publicKey=e.value;const o=new yi;o.data=Buffer.from(vr.serialize(s));o.algorithm=Object.assign({},t);o.extractable=r;o.usages=n;return o}static getOpenSSLNamedCurve(e){switch(e.toUpperCase()){case"P-256":return"prime256v1";case"K-256":return"secp256k1";case"P-384":return"secp384r1";case"P-521":return"secp521r1";default:return e}}};__name(bi,"EcCrypto");bi.publicKeyUsages=["verify"];bi.privateKeyUsages=["sign","deriveKey","deriveBits"];var _i=class extends Tn{constructor(){super(...arguments);this.namedCurves=Bs.names;this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){const n=await bi.generateKey(__spreadProps(__spreadValues({},e),{name:this.name}),t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onSign(e,t,r){return bi.sign(e,getCryptoKey(t),new Uint8Array(r))}async onVerify(e,t,r,n){return bi.verify(e,getCryptoKey(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return bi.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await bi.importKey(e,t,__spreadProps(__spreadValues({},r),{name:this.name}),n,s);return setCryptoKey(i)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);const r=getCryptoKey(e);if(!(r instanceof pi||r instanceof yi)){throw new TypeError("key: Is not EC CryptoKey")}}};__name(_i,"EcdsaProvider");var Ci=class extends In{constructor(){super(...arguments);this.namedCurves=Bs.names}async onGenerateKey(e,t,r){const n=await bi.generateKey(__spreadProps(__spreadValues({},e),{name:this.name}),t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onExportKey(e,t){return bi.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await bi.importKey(e,t,__spreadProps(__spreadValues({},r),{name:this.name}),n,s);return setCryptoKey(i)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);const r=getCryptoKey(e);if(!(r instanceof pi||r instanceof yi)){throw new TypeError("key: Is not EC CryptoKey")}}async onDeriveBits(e,t,r){const n=await bi.deriveBits(__spreadProps(__spreadValues({},e),{public:getCryptoKey(e.public)}),getCryptoKey(t),r);return n}};__name(Ci,"EcdhProvider");var Bi={[Cs.idEd448]:"Ed448",ed448:Cs.idEd448,[Cs.idX448]:"X448",x448:Cs.idX448,[Cs.idEd25519]:"Ed25519",ed25519:Cs.idEd25519,[Cs.idX25519]:"X25519",x25519:Cs.idX25519};function getOidByNamedCurve(e){const t=Bi[e.toLowerCase()];if(!t){throw new yn(`Cannot convert WebCrypto named curve '${e}' to OID`)}return t}__name(getOidByNamedCurve,"getOidByNamedCurve");var ki=class extends Vs{constructor(){super(...arguments);this.type="private"}getKey(){const e=mr.parse(this.data,Cs.PrivateKeyInfo);return mr.parse(e.privateKey,Cs.CurvePrivateKey)}toJSON(){const e=this.getKey();const t={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(t,un.toJSON(e))}fromJSON(e){if(!e.crv){throw new yn(`Cannot get named curve from JWK. Property 'crv' is required`)}const t=new Cs.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm=getOidByNamedCurve(e.crv);const r=ln.fromJSON(e,{targetSchema:Cs.CurvePrivateKey});t.privateKey=vr.serialize(r);this.data=Buffer.from(vr.serialize(t));return this}};__name(ki,"EdPrivateKey");var Ri=class extends Vs{constructor(){super(...arguments);this.type="public"}getKey(){const e=mr.parse(this.data,Cs.PublicKeyInfo);return e.publicKey}toJSON(){const e=this.getKey();const t={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(t,{x:P.ToBase64Url(e)})}fromJSON(e){if(!e.crv){throw new yn(`Cannot get named curve from JWK. Property 'crv' is required`)}if(!e.x){throw new yn(`Cannot get property from JWK. Property 'x' is required`)}const t=new Cs.PublicKeyInfo;t.publicKeyAlgorithm.algorithm=getOidByNamedCurve(e.crv);t.publicKey=P.FromBase64Url(e.x);this.data=Buffer.from(vr.serialize(t));return this}};__name(Ri,"EdPublicKey");var Ni=class{static async generateKey(e,t,r){const n=new ki;n.algorithm=e;n.extractable=t;n.usages=r.filter((e=>this.privateKeyUsages.indexOf(e)!==-1));const s=new Ri;s.algorithm=e;s.extractable=true;s.usages=r.filter((e=>this.publicKeyUsages.indexOf(e)!==-1));const i=e.namedCurve.toLowerCase();const o=Ls.default.generateKeyPairSync(i,{publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});n.data=o.privateKey;s.data=o.publicKey;const a={privateKey:n,publicKey:s};return a}static async sign(e,t,r){if(!t.pem){t.pem=`-----BEGIN PRIVATE KEY-----\n${t.data.toString("base64")}\n-----END PRIVATE KEY-----`}const n={key:t.pem};const s=Ls.default.sign(null,Buffer.from(r),n);return O.toArrayBuffer(s)}static async verify(e,t,r,n){if(!t.pem){t.pem=`-----BEGIN PUBLIC KEY-----\n${t.data.toString("base64")}\n-----END PUBLIC KEY-----`}const s={key:t.pem};const i=Ls.default.verify(null,Buffer.from(n),s,Buffer.from(r));return i}static async deriveBits(e,t,r){const n=Ls.default.createPublicKey({key:e.public.data,format:"der",type:"spki"});const s=Ls.default.createPrivateKey({key:t.data,format:"der",type:"pkcs8"});const i=Ls.default.diffieHellman({publicKey:n,privateKey:s});return new Uint8Array(i).buffer.slice(0,r>>3)}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return un.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;case"raw":{const e=mr.parse(t.data,Cs.PublicKeyInfo);return e.publicKey}default:throw new yn("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(e,t,r,n,s){switch(e.toLowerCase()){case"jwk":{const e=t;if(e.d){const e=ln.fromJSON(t,{targetSchema:Cs.CurvePrivateKey});return this.importPrivateKey(e,r,n,s)}else{if(!e.x){throw new TypeError("keyData: Cannot get required 'x' filed")}return this.importPublicKey(P.FromBase64Url(e.x),r,n,s)}}case"raw":{return this.importPublicKey(t,r,n,s)}case"spki":{const e=mr.parse(new Uint8Array(t),Cs.PublicKeyInfo);return this.importPublicKey(e.publicKey,r,n,s)}case"pkcs8":{const e=mr.parse(new Uint8Array(t),Cs.PrivateKeyInfo);const i=mr.parse(e.privateKey,Cs.CurvePrivateKey);return this.importPrivateKey(i,r,n,s)}default:throw new yn("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static importPrivateKey(e,t,r,n){const s=new ki;s.fromJSON({crv:t.namedCurve,d:P.ToBase64Url(e.d)});s.algorithm=Object.assign({},t);s.extractable=r;s.usages=n;return s}static async importPublicKey(e,t,r,n){const s=new Ri;s.fromJSON({crv:t.namedCurve,x:P.ToBase64Url(e)});s.algorithm=Object.assign({},t);s.extractable=r;s.usages=n;return s}};__name(Ni,"EdCrypto");Ni.publicKeyUsages=["verify"];Ni.privateKeyUsages=["sign","deriveKey","deriveBits"];var xi=class extends Un{async onGenerateKey(e,t,r){const n=await Ni.generateKey({name:this.name,namedCurve:e.namedCurve.replace(/^ed/i,"Ed")},t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onSign(e,t,r){return Ni.sign(e,getCryptoKey(t),new Uint8Array(r))}async onVerify(e,t,r,n){return Ni.verify(e,getCryptoKey(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return Ni.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await Ni.importKey(e,t,__spreadProps(__spreadValues({},r),{name:this.name}),n,s);return setCryptoKey(i)}};__name(xi,"EdDsaProvider");var Ti=class extends Pn{async onGenerateKey(e,t,r){const n=await Ni.generateKey({name:this.name,namedCurve:e.namedCurve.toUpperCase()},t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onDeriveBits(e,t,r){const n=await Ni.deriveBits(__spreadProps(__spreadValues({},e),{public:getCryptoKey(e.public)}),getCryptoKey(t),r);return n}async onExportKey(e,t){return Ni.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,s){const i=await Ni.importKey(e,t,__spreadProps(__spreadValues({},r),{name:this.name}),n,s);return setCryptoKey(i)}};__name(Ti,"EcdhEsProvider");var Oi=class extends Hs{};__name(Oi,"PbkdfCryptoKey");var Ki=class extends Rs{async onDeriveBits(e,t,r){return new Promise(((n,s)=>{const i=O.toArrayBuffer(e.salt);const o=e.hash.name.replace("-","");Ls.default.pbkdf2(getCryptoKey(t).data,Buffer.from(i),e.iterations,r>>3,o,((e,t)=>{if(e){s(e)}else{n(new Uint8Array(t).buffer)}}))}))}async onImportKey(e,t,r,n,s){if(e==="raw"){const e=new Oi;e.data=Buffer.from(t);e.algorithm={name:this.name};e.extractable=false;e.usages=s;return setCryptoKey(e)}throw new yn("format: Must be 'raw'")}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof Oi)){throw new TypeError("key: Is not PBKDF CryptoKey")}}};__name(Ki,"Pbkdf2Provider");var Ii=class extends Hs{get alg(){const e=this.algorithm.hash.name.toUpperCase();return`HS${e.replace("SHA-","")}`}set alg(e){}};__name(Ii,"HmacCryptoKey");_r([hn({name:"k",converter:Ms})],Ii.prototype,"data",void 0);var Pi=class extends ks{async onGenerateKey(e,t,r){const n=(e.length||this.getDefaultLength(e.hash.name))>>3<<3;const s=new Ii;s.algorithm=__spreadProps(__spreadValues({},e),{length:n,name:this.name});s.extractable=t;s.usages=r;s.data=Ls.default.randomBytes(n>>3);return setCryptoKey(s)}async onSign(e,t,r){const n=li.getAlgorithmName(t.algorithm.hash);const s=Ls.default.createHmac(n,getCryptoKey(t).data).update(Buffer.from(r)).digest();return new Uint8Array(s).buffer}async onVerify(e,t,r,n){const s=li.getAlgorithmName(t.algorithm.hash);const i=Ls.default.createHmac(s,getCryptoKey(t).data).update(Buffer.from(n)).digest();return i.compare(Buffer.from(r))===0}async onImportKey(e,t,r,n,s){let i;switch(e.toLowerCase()){case"jwk":i=ln.fromJSON(t,{targetSchema:Ii});break;case"raw":i=new Ii;i.data=Buffer.from(t);break;default:throw new yn("format: Must be 'jwk' or 'raw'")}i.algorithm={hash:{name:r.hash.name},name:this.name,length:i.data.length<<3};i.extractable=n;i.usages=s;return setCryptoKey(i)}async onExportKey(e,t){switch(e.toLowerCase()){case"jwk":return un.toJSON(getCryptoKey(t));case"raw":return new Uint8Array(getCryptoKey(t).data).buffer;default:throw new yn("format: Must be 'jwk' or 'raw'")}}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof Ii)){throw new TypeError("key: Is not HMAC CryptoKey")}}};__name(Pi,"HmacProvider");var Ui=class extends Hs{};__name(Ui,"HkdfCryptoKey");var Li=class extends Ns{async onImportKey(e,t,r,n,s){if(e.toLowerCase()!=="raw"){throw new yn("Operation not supported")}const i=new Ui;i.data=Buffer.from(t);i.algorithm={name:this.name};i.extractable=n;i.usages=s;return setCryptoKey(i)}async onDeriveBits(e,t,r){const n=e.hash.name.replace("-","");const s=Ls.default.createHash(n).digest().length;const i=r/8;const o=O.toUint8Array(e.info);const a=Ls.default.createHmac(n,O.toUint8Array(e.salt)).update(O.toUint8Array(getCryptoKey(t).data)).digest();const c=[Buffer.alloc(0)];const u=Math.ceil(i/s)+1;for(let e=1;e<u;++e){c.push(Ls.default.createHmac(n,a).update(Buffer.concat([c[e-1],o,Buffer.from([e])])).digest())}return Buffer.concat(c).slice(0,i)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof Ui)){throw new TypeError("key: Is not HKDF CryptoKey")}}};__name(Li,"HkdfProvider");var Di=class{static digest(e,t){const r=Ls.default.createHash(e.name.toLowerCase(),{outputLength:e.length}).update(Buffer.from(t)).digest();return new Uint8Array(r).buffer}};__name(Di,"ShakeCrypto");var Mi=class extends Ts{async onDigest(e,t){return Di.digest(e,t)}};__name(Mi,"Shake128Provider");var Hi=class extends Os{async onDigest(e,t){return Di.digest(e,t)}};__name(Hi,"Shake256Provider");var qi=class extends Ps{constructor(){var e;super();this.providers.set(new $s);this.providers.set(new Qs);this.providers.set(new Xs);this.providers.set(new Ys);this.providers.set(new Zs);this.providers.set(new ei);this.providers.set(new ni);this.providers.set(new si);this.providers.set(new ci);this.providers.set(new ui);this.providers.set(new hi);this.providers.set(new fi);this.providers.set(new _i);this.providers.set(new Ci);this.providers.set(new gi);this.providers.set(new mi);this.providers.set(new vi);this.providers.set(new Ei);this.providers.set(new Ki);this.providers.set(new Pi);this.providers.set(new Li);const t=(e=/^v(\d+)/.exec(Ds.version))===null||e===void 0?void 0:e[1];if(t&&parseInt(t,10)>=12){this.providers.set(new Mi);this.providers.set(new Hi)}const r=Us.getHashes();if(r.includes("sha3-256")){this.providers.set(new Si)}if(r.includes("sha3-384")){this.providers.set(new wi)}if(r.includes("sha3-512")){this.providers.set(new Ai)}if(t&&parseInt(t,10)>=14){this.providers.set(new xi);this.providers.set(new Ti)}}};__name(qi,"SubtleCrypto");var Vi=class extends Ks{constructor(){super(...arguments);this.subtle=new qi}getRandomValues(e){if(!ArrayBuffer.isView(e)){throw new TypeError("Failed to execute 'getRandomValues' on 'Crypto': parameter 1 is not of type 'ArrayBufferView'")}const t=Buffer.from(e.buffer,e.byteOffset,e.byteLength);Ls.default.randomFillSync(t);return e}};__name(Vi,"Crypto");d();var ji=__toESM(N(),1);var Gi=ji.default.v1;var Fi=ji.default.v3;var $i=ji.default.v4;var Ji=ji.default.v5;var Wi=ji.default.NIL;var zi=ji.default.version;var Yi=ji.default.validate;var Qi=ji.default.stringify;var Xi=ji.default.parse;var Zi;var eo=class extends Vi{constructor(){super(...arguments);__privateAdd(this,Zi,$i)}};__name(eo,"Crypto");Zi=new WeakMap;function SubtleCrypto3(){if(!(this instanceof SubtleCrypto3))return new SubtleCrypto3;throw TypeError("Illegal constructor")}__name(SubtleCrypto3,"SubtleCrypto");function SubtleCryptoToString(){return"function SubtleCrypto() { [native code] }"}__name(SubtleCryptoToString,"SubtleCryptoToString");Object.defineProperty(SubtleCryptoToString,"name",{configurable:true,enumerable:false,value:"toString() { [native code] }",writable:true});Object.defineProperty(SubtleCrypto3,"toString",{configurable:true,enumerable:false,value:SubtleCryptoToString,writable:true});var to=new eo;0&&0},392:(__unused_webpack_module,exports,__nccwpck_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EdgeVM=void 0;const buffer_1=__nccwpck_require__(300);const require_1=__nccwpck_require__(178);const vm_1=__nccwpck_require__(462);class EdgeVM extends vm_1.VM{constructor(e={}){super({...e,extend:t=>e.extend?e.extend(addPrimitives(t)):addPrimitives(t)})}}exports.EdgeVM=EdgeVM;function addPrimitives(context){defineProperty(context,"self",{enumerable:true,value:context});defineProperty(context,"globalThis",{value:context});defineProperty(context,"Symbol",{value:Symbol});defineProperty(context,"clearInterval",{value:clearInterval});defineProperty(context,"clearTimeout",{value:clearTimeout});defineProperty(context,"setInterval",{value:setInterval});defineProperty(context,"setTimeout",{value:setTimeout});defineProperties(context,{exports:(0,require_1.requireWithCache)({context:context,path:require.resolve("next/dist/compiled/@edge-runtime/primitives/console"),scopedContext:{console:console}}),nonenumerable:["console"]});defineProperties(context,{exports:(0,require_1.requireWithCache)({context:context,path:require.resolve("next/dist/compiled/@edge-runtime/primitives/encoding"),scopedContext:{Buffer:buffer_1.Buffer}}),nonenumerable:["atob","btoa","TextEncoder","TextDecoder"]});const streams=(0,require_1.requireWithCache)({path:require.resolve("next/dist/compiled/@edge-runtime/primitives/streams"),context:context});defineProperties(context,{exports:streams,nonenumerable:["ReadableStream","ReadableStreamBYOBReader","ReadableStreamDefaultReader","TransformStream","WritableStream","WritableStreamDefaultWriter"]});const abort=(0,require_1.requireWithCache)({context:context,path:require.resolve("next/dist/compiled/@edge-runtime/primitives/abort-controller")});defineProperties(context,{exports:abort,nonenumerable:["AbortController","AbortSignal"]});defineProperties(context,{exports:(0,require_1.requireWithCache)({cache:new Map([["punycode",{exports:__nccwpck_require__(477)}]]),context:context,path:require.resolve("next/dist/compiled/@edge-runtime/primitives/url")}),nonenumerable:["URL","URLSearchParams","URLPattern"]});const blob=(0,require_1.requireWithCache)({context:context,path:require.resolve("next/dist/compiled/@edge-runtime/primitives/blob")});defineProperties(context,{exports:blob,nonenumerable:["Blob"]});const webFetch=(0,require_1.requireWithCache)({context:context,cache:new Map([["abort-controller",{exports:abort}],["assert",{exports:__nccwpck_require__(491)}],["buffer",{exports:__nccwpck_require__(300)}],["events",{exports:__nccwpck_require__(361)}],["http",{exports:__nccwpck_require__(685)}],["net",{exports:__nccwpck_require__(808)}],["perf_hooks",{exports:__nccwpck_require__(74)}],["stream",{exports:__nccwpck_require__(781)}],["tls",{exports:__nccwpck_require__(404)}],["util",{exports:__nccwpck_require__(837)}],["zlib",{exports:__nccwpck_require__(796)}],[require.resolve("next/dist/compiled/@edge-runtime/primitives/streams"),{exports:streams}],[require.resolve("next/dist/compiled/@edge-runtime/primitives/blob"),{exports:blob}]]),path:require.resolve("next/dist/compiled/@edge-runtime/primitives/fetch"),scopedContext:{Buffer:buffer_1.Buffer,FinalizationRegistry:function(){return{register:function(){}}},global:{},queueMicrotask:queueMicrotask,setImmediate:setImmediate}});defineProperties(context,{exports:webFetch,nonenumerable:["fetch","File","FormData","Headers","Request","Response"]});defineProperties(context,{exports:(0,require_1.requireWithCache)({cache:new Map([[require.resolve("next/dist/compiled/@edge-runtime/primitives/fetch"),{exports:webFetch}]]),context:context,path:require.resolve("next/dist/compiled/@edge-runtime/primitives/cache"),scopedContext:{global:{}}}),enumerable:["caches"],nonenumerable:["Cache","CacheStorage"]});defineProperties(context,{exports:(0,require_1.requireWithCache)({context:context,cache:new Map([["crypto",{exports:__nccwpck_require__(113)}],["process",{exports:__nccwpck_require__(282)}]]),path:require.resolve("next/dist/compiled/@edge-runtime/primitives/crypto"),scopedContext:{Buffer:buffer_1.Buffer}}),enumerable:["crypto"],nonenumerable:["Crypto","CryptoKey","SubtleCrypto"]});defineProperties(context,{exports:(0,require_1.requireWithCache)({context:context,path:require.resolve("next/dist/compiled/@edge-runtime/primitives/events")}),nonenumerable:["Event","EventTarget","FetchEvent","PromiseRejectionEvent"]});defineProperties(context,{exports:(0,require_1.requireWithCache)({context:context,path:require.resolve("next/dist/compiled/@edge-runtime/primitives/structured-clone")}),nonenumerable:["structuredClone"]});return context}function defineProperty(e,t,r){var n,s,i;Object.defineProperty(e,t,{configurable:(n=r.configurable)!==null&&n!==void 0?n:false,enumerable:(s=r.enumerable)!==null&&s!==void 0?s:false,value:r.value,writable:(i=r.writable)!==null&&i!==void 0?i:true})}function defineProperties(e,t){var r,n;for(const n of(r=t.enumerable)!==null&&r!==void 0?r:[]){if(!t.exports[n]){throw new Error(`Attempt to export a nullable value for "${n}"`)}defineProperty(e,n,{enumerable:true,value:t.exports[n]})}for(const r of(n=t.nonenumerable)!==null&&n!==void 0?n:[]){if(!t.exports[r]){throw new Error(`Attempt to export a nullable value for "${r}"`)}defineProperty(e,r,{value:t.exports[r]})}}},305:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VM=t.EdgeVM=void 0;var n=r(392);Object.defineProperty(t,"EdgeVM",{enumerable:true,get:function(){return n.EdgeVM}});var s=r(462);Object.defineProperty(t,"VM",{enumerable:true,get:function(){return s.VM}})},178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.requireWithCache=t.createRequire=t.requireDependencies=void 0;const n=r(147);const s=r(144);const i=r(17);function requireDependencies(e){const{context:t,requireCache:r,dependencies:n}=e;const s=createRequire(t,r);for(const{path:e,mapExports:r}of n){const n=s(e,e);for(const e of Object.keys(r)){t[r[e]]=n[e]}}}t.requireDependencies=requireDependencies;function createRequire(e,t,r,o={}){return function requireFn(a,c){const u=require.resolve(c,{paths:[(0,i.dirname)(a)]});const l=t.get(c)||t.get(u);if(l!==undefined&&l!==null){return l.exports}const h={exports:{},loaded:false,id:u};t.set(u,h);r===null||r===void 0?void 0:r.add(u);const f=(0,s.runInContext)(`(function(module,exports,require,__dirname,__filename,${Object.keys(o).join(",")}) {${(0,n.readFileSync)(u,"utf-8")}\n})`,e);try{f(h,h.exports,requireFn.bind(null,u),(0,i.dirname)(u),u,...Object.values(o))}catch(e){t.delete(u);throw e}h.loaded=true;return h.exports}}t.createRequire=createRequire;function requireWithCache(e){var t;return createRequire(e.context,(t=e.cache)!==null&&t!==void 0?t:new Map,e.references,e.scopedContext).call(null,e.path,e.path)}t.requireWithCache=requireWithCache},429:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.tempFile=void 0;const s=r(150);const i=n(r(17));const o=n(r(147));const a=n(r(37));function tempFile(e){const t=i.default.join(a.default.tmpdir(),s.crypto.randomUUID());o.default.writeFileSync(t,e);return{path:t,remove:()=>o.default.unlinkSync(t)}}t.tempFile=tempFile},462:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VM=void 0;const n=r(144);const s=r(178);const i=r(429);class VM{constructor(e={}){var t,r,i,o;const a=(0,n.createContext)({},{name:"Edge Runtime",codeGeneration:(t=e.codeGeneration)!==null&&t!==void 0?t:{strings:false,wasm:true}});this.requireCache=(r=e.requireCache)!==null&&r!==void 0?r:new Map;this.context=(o=(i=e.extend)===null||i===void 0?void 0:i.call(e,a))!==null&&o!==void 0?o:a;this.requireFn=(0,s.createRequire)(this.context,this.requireCache)}evaluate(e){return(0,n.runInContext)(e,this.context)}require(e){return this.requireFn(e,e)}requireInContext(e){const t=this.require(e);for(const[e,r]of Object.entries(t)){this.context[e]=r}}requireInlineInContext(e){const t=(0,i.tempFile)(e);this.requireInContext(t.path);t.remove()}}t.VM=VM},734:e=>{"use strict";e.exports=e=>{const t=e[0]*1e9+e[1];const r=t/1e6;const n=t/1e9;return{seconds:n,milliseconds:r,nanoseconds:t}}},928:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EdgeRuntime=void 0;const n=r(305);let s;let i;class EdgeRuntime extends n.EdgeVM{constructor(e){super({...e,extend:t=>{var r,n;return(n=(r=e===null||e===void 0?void 0:e.extend)===null||r===void 0?void 0:r.call(e,t))!==null&&n!==void 0?n:t}});defineHandlerProps({object:this,setterName:"__onUnhandledRejectionHandler",setter:e=>s=e,getterName:"__rejectionHandlers",getter:()=>s});defineHandlerProps({object:this,setterName:"__onErrorHandler",setter:e=>i=e,getterName:"__errorHandlers",getter:()=>i});Object.defineProperty(this.context,"EdgeRuntime",{configurable:false,enumerable:false,writable:false,value:"edge-runtime"});this.evaluate(getDefineEventListenersCode());this.dispatchFetch=this.evaluate(getDispatchFetchCode());if(e===null||e===void 0?void 0:e.initialCode){this.evaluate(e.initialCode)}}}t.EdgeRuntime=EdgeRuntime;process.on("unhandledRejection",(function invokeRejectionHandlers(e,t){s===null||s===void 0?void 0:s.forEach((r=>r(e,t)))}));process.on("uncaughtException",(function invokeErrorHandlers(e){i===null||i===void 0?void 0:i.forEach((t=>t(e)))}));function getDefineEventListenersCode(){return`\n    Object.defineProperty(self, '__listeners', {\n      configurable: false,\n      enumerable: false,\n      value: {},\n      writable: true,\n    })\n\n    function conditionallyUpdatesHandlerList(eventType) {\n      if (eventType === 'unhandledrejection') {\n        self.__onUnhandledRejectionHandler = self.__listeners[eventType];\n      } else if (eventType === 'error') {\n        self.__onErrorHandler = self.__listeners[eventType];\n      }\n    }\n\n    function addEventListener(type, handler) {\n      const eventType = type.toLowerCase();\n      if (eventType === 'fetch' && self.__listeners.fetch) {\n        throw new TypeError('You can register just one "fetch" event listener');\n      }\n\n      self.__listeners[eventType] = self.__listeners[eventType] || [];\n      self.__listeners[eventType].push(handler);\n      conditionallyUpdatesHandlerList(eventType);\n    }\n\n    function removeEventListener(type, handler) {\n      const eventType = type.toLowerCase();\n      if (self.__listeners[eventType]) {\n        self.__listeners[eventType] = self.__listeners[eventType].filter(item => {\n          return item !== handler;\n        });\n\n        if (self.__listeners[eventType].length === 0) {\n          delete self.__listeners[eventType];\n        }\n      }\n      conditionallyUpdatesHandlerList(eventType);\n    }\n  `}function getDispatchFetchCode(){return`(async function dispatchFetch(input, init) {\n    const request = new Request(input, init);\n    const event = new FetchEvent(request);\n    if (!self.__listeners.fetch) {\n      throw new Error("No fetch event listeners found");\n    }\n\n    const getResponse = ({ response, error }) => {\n     if (error || !response || !(response instanceof Response)) {\n        console.error(error ? error : 'The event listener did not respond')\n        response = new Response(null, {\n          statusText: 'Internal Server Error',\n          status: 500\n        })\n      }\n\n      response.waitUntil = () => Promise.all(event.awaiting);\n      return response;\n    }\n\n    try {\n      await self.__listeners.fetch[0].call(event, event)\n    } catch (error) {\n      return getResponse({ error })\n    }\n\n    return Promise.resolve(event.response)\n      .then(response => getResponse({ response }))\n      .catch(error => getResponse({ error }))\n  })`}function defineHandlerProps({object:e,setterName:t,setter:r,getterName:n,getter:s}){Object.defineProperty(e.context,t,{set:r,configurable:false,enumerable:false});Object.defineProperty(e,n,{get:s,configurable:false,enumerable:false})}},725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getClonableBodyStream=void 0;const n=r(781);function getClonableBodyStream(e,t){let r=null;return{finalize(){if(r){replaceRequestBody(e,bodyStreamToNodeStream(r))}},cloneBodyStream(){const n=r!==null&&r!==void 0?r:requestToBodyStream(e,t);const[s,i]=n.tee();r=s;return i}}}t.getClonableBodyStream=getClonableBodyStream;function requestToBodyStream(e,t){const r=new t({start(t){e.on("data",(e=>t.enqueue(e)));e.on("end",(()=>t.terminate()));e.on("error",(e=>t.error(e)))}});return r.readable}function bodyStreamToNodeStream(e){const t=e.getReader();return n.Readable.from(async function*(){while(true){const{done:e,value:r}=await t.read();if(e){return}yield r}}())}function replaceRequestBody(e,t){for(const r in t){let n=t[r];if(typeof n==="function"){n=n.bind(t)}e[r]=n}return e}},188:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.createHandler=void 0;const s=r(725);const i=n(r(720));const o=n(r(242));const a=n(r(504));function createHandler(e){const t=new Set;return{handler:async(r,n)=>{var c,u;const l=(0,a.default)();const h=r.method!=="GET"&&r.method!=="HEAD"?(0,s.getClonableBodyStream)(r,e.runtime.context.TransformStream):undefined;const f=await e.runtime.dispatchFetch(String(getURL(r)),{headers:toRequestInitHeaders(r),method:r.method,body:h===null||h===void 0?void 0:h.cloneBodyStream()});const d=f.waitUntil();t.add(d);d.finally((()=>t.delete(d)));n.statusCode=f.status;n.statusMessage=f.statusText;for(const[e,t]of Object.entries(toNodeHeaders(f.headers))){if(e!=="content-encoding"&&t!==undefined){n.setHeader(e,t)}}if(f.body){for await(const e of f.body){n.write(e)}}const p=`${r.socket.remoteAddress} ${r.method} ${r.url}`;const y=`${(c=(0,i.default)(l()).match(/[a-zA-Z]+|[0-9]+/g))===null||c===void 0?void 0:c.join(" ")}`;const g=`${n.statusCode} ${o.default[n.statusCode]}`;(u=e.logger)===null||u===void 0?void 0:u.debug(`${p} → ${g} in ${y}`);n.end()},waitUntil:()=>Promise.all(t)}}t.createHandler=createHandler;function getURL(e){var t;const r=((t=e.socket)===null||t===void 0?void 0:t.encrypted)?"https":"http";return new URL(String(e.url),`${r}://${String(e.headers.host)}`)}function toRequestInitHeaders(e){return Object.keys(e.headers).map((t=>{const r=e.headers[t];return[t,Array.isArray(r)?r.join(", "):r!==null&&r!==void 0?r:""]}))}function toNodeHeaders(e){const t={};if(e){for(const[r,n]of e.entries()){t[r]=r.toLowerCase()==="set-cookie"?e.getAll("set-cookie"):n}}return t}},938:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.runServer=t.createHandler=void 0;var n=r(188);Object.defineProperty(t,"createHandler",{enumerable:true,get:function(){return n.createHandler}});var s=r(792);Object.defineProperty(t,"runServer",{enumerable:true,get:function(){return s.runServer}})},792:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.runServer=void 0;const s=r(188);const i=r(361);const o=n(r(685));async function runServer(e){const{handler:t,waitUntil:r}=(0,s.createHandler)(e);const n=o.default.createServer(t);n.listen(e.port);try{await(0,i.once)(n,"listening")}catch(t){if((t===null||t===void 0?void 0:t.code)==="EADDRINUSE"){return runServer({...e,port:undefined})}throw t}const a=n.address();const c=typeof a==="string"||a==null?String(a):`http://localhost:${a.port}`;return{url:c,close:async()=>{await r();await new Promise(((e,t)=>n.close((r=>{if(r)t(r);e()}))))},waitUntil:r}}t.runServer=runServer},242:e=>{var t;t={"1xx":"Informational","1xx_NAME":"INFORMATIONAL","1xx_MESSAGE":"Indicates an interim response for communicating connection status or request progress prior to completing the requested action and sending a final response.",INFORMATIONAL:"1xx","2xx":"Successful","2xx_NAME":"SUCCESSFUL","2xx_MESSAGE":"Indicates that the client's request was successfully received, understood, and accepted.",SUCCESSFUL:"2xx","3xx":"Redirection","3xx_NAME":"REDIRECTION","3xx_MESSAGE":"Indicates that further action needs to be taken by the user agent in order to fulfill the request.",REDIRECTION:"3xx","4xx":"Client Error","4xx_NAME":"CLIENT_ERROR","4xx_MESSAGE":"Indicates that the client seems to have erred.",CLIENT_ERROR:"4xx","5xx":"Server Error","5xx_NAME":"SERVER_ERROR","5xx_MESSAGE":"Indicates that the server is aware that it has erred or is incapable of performing the requested method.",SERVER_ERROR:"5xx"};e.exports={classes:t,100:"Continue","100_NAME":"CONTINUE","100_MESSAGE":"The server has received the request headers and the client should proceed to send the request body.","100_CLASS":t.INFORMATIONAL,CONTINUE:100,101:"Switching Protocols","101_NAME":"SWITCHING_PROTOCOLS","101_MESSAGE":"The requester has asked the server to switch protocols and the server has agreed to do so.","101_CLASS":t.INFORMATIONAL,SWITCHING_PROTOCOLS:101,102:"Processing","102_NAME":"PROCESSING","102_MESSAGE":"A WebDAV request may contain many sub-requests involving file operations, requiring a long time to complete the request. This code indicates that the server has received and is processing the request, but no response is available yet.[7] This prevents the client from timing out and assuming the request was lost.","102_CLASS":t.INFORMATIONAL,PROCESSING:102,103:"Early Hints","103_NAME":"EARLY_HINTS","103_MESSAGE":"Used to return some response headers before final HTTP message.","103_CLASS":t.INFORMATIONAL,EARLY_HINTS:103,200:"OK","200_NAME":"OK","200_MESSAGE":"Standard response for successful HTTP requests.","200_CLASS":t.SUCCESSFUL,OK:200,201:"Created","201_NAME":"CREATED","201_MESSAGE":"The request has been fulfilled, resulting in the creation of a new resource.","201_CLASS":t.SUCCESSFUL,CREATED:201,202:"Accepted","202_NAME":"ACCEPTED","202_MESSAGE":"The request has been accepted for processing, but the processing has not been completed.","202_CLASS":t.SUCCESSFUL,ACCEPTED:202,203:"Non-Authoritative Information","203_NAME":"NON_AUTHORITATIVE_INFORMATION","203_MESSAGE":"The server is a transforming proxy (e.g. a Web accelerator) that received a 200 OK from its origin, but is returning a modified version of the origin's response.","203_CLASS":t.SUCCESSFUL,NON_AUTHORITATIVE_INFORMATION:203,204:"No Content","204_NAME":"NO_CONTENT","204_MESSAGE":"The server successfully processed the request and is not returning any content.","204_CLASS":t.SUCCESSFUL,NO_CONTENT:204,205:"Reset Content","205_NAME":"RESET_CONTENT","205_MESSAGE":"The server successfully processed the request, but is not returning any content. Unlike a 204 response, this response requires that the requester reset the document view.","205_CLASS":t.SUCCESSFUL,RESET_CONTENT:205,206:"Partial Content","206_NAME":"PARTIAL_CONTENT","206_MESSAGE":"The server is delivering only part of the resource (byte serving) due to a range header sent by the client.","206_CLASS":t.SUCCESSFUL,PARTIAL_CONTENT:206,207:"Multi Status","207_NAME":"MULTI_STATUS","207_MESSAGE":"The message body that follows is by default an XML message and can contain a number of separate response codes, depending on how many sub-requests were made.","207_CLASS":t.SUCCESSFUL,MULTI_STATUS:207,208:"Already Reported","208_NAME":"ALREADY_REPORTED","208_MESSAGE":"The members of a DAV binding have already been enumerated in a preceding part of the (multistatus) response, and are not being included again.","208_CLASS":t.SUCCESSFUL,ALREADY_REPORTED:208,226:"IM Used","226_NAME":"IM_USED","226_MESSAGE":"The server has fulfilled a request for the resource, and the response is a representation of the result of one or more instance-manipulations applied to the current instance.","226_CLASS":t.SUCCESSFUL,IM_USED:226,300:"Multiple Choices","300_NAME":"MULTIPLE_CHOICES","300_MESSAGE":"Indicates multiple options for the resource from which the client may choose.","300_CLASS":t.REDIRECTION,MULTIPLE_CHOICES:300,301:"Moved Permanently","301_NAME":"MOVED_PERMANENTLY","301_MESSAGE":"This and all future requests should be directed to the given URI.","301_CLASS":t.REDIRECTION,MOVED_PERMANENTLY:301,302:"Found","302_NAME":"FOUND","302_MESSAGE":'This is an example of industry practice contradicting the standard. The HTTP/1.0 specification (RFC 1945) required the client to perform a temporary redirect (the original describing phrase was "Moved Temporarily"), but popular browsers implemented 302 with the functionality of a 303 See Other. Therefore, HTTP/1.1 added status codes 303 and 307 to distinguish between the two behaviours.',"302_CLASS":t.REDIRECTION,FOUND:302,303:"See Other","303_NAME":"SEE_OTHER","303_MESSAGE":"The response to the request can be found under another URI using the GET method.","303_CLASS":t.REDIRECTION,SEE_OTHER:303,304:"Not Modified","304_NAME":"NOT_MODIFIED","304_MESSAGE":"Indicates that the resource has not been modified since the version specified by the request headers If-Modified-Since or If-None-Match.","304_CLASS":t.REDIRECTION,NOT_MODIFIED:304,305:"Use Proxy","305_NAME":"USE_PROXY","305_MESSAGE":"The requested resource is available only through a proxy, the address for which is provided in the response.","305_CLASS":t.REDIRECTION,USE_PROXY:305,306:"Switch Proxy","306_NAME":"SWITCH_PROXY","306_MESSAGE":'No longer used. Originally meant "Subsequent requests should use the specified proxy.',"306_CLASS":t.REDIRECTION,SWITCH_PROXY:306,307:"Temporary Redirect","307_NAME":"TEMPORARY_REDIRECT","307_MESSAGE":"In this case, the request should be repeated with another URI; however, future requests should still use the original URI.","307_CLASS":t.REDIRECTION,TEMPORARY_REDIRECT:307,308:"Permanent Redirect","308_NAME":"PERMANENT_REDIRECT","308_MESSAGE":"The request and all future requests should be repeated using another URI.","308_CLASS":t.REDIRECTION,PERMANENT_REDIRECT:308,400:"Bad Request","400_NAME":"BAD_REQUEST","400_MESSAGE":"The server cannot or will not process the request due to an apparent client error.","400_CLASS":t.CLIENT_ERROR,BAD_REQUEST:400,401:"Unauthorized","401_NAME":"UNAUTHORIZED","401_MESSAGE":"Similar to 403 Forbidden, but specifically for use when authentication is required and has failed or has not yet been provided.","401_CLASS":t.CLIENT_ERROR,UNAUTHORIZED:401,402:"Payment Required","402_NAME":"PAYMENT_REQUIRED","402_MESSAGE":"Reserved for future use. The original intention was that this code might be used as part of some form of digital cash or micropayment scheme, as proposed for example by GNU Taler, but that has not yet happened, and this code is not usually used.","402_CLASS":t.CLIENT_ERROR,PAYMENT_REQUIRED:402,403:"Forbidden","403_NAME":"FORBIDDEN","403_MESSAGE":"The request was valid, but the server is refusing action.","403_CLASS":t.CLIENT_ERROR,FORBIDDEN:403,404:"Not Found","404_NAME":"NOT_FOUND","404_MESSAGE":"The requested resource could not be found but may be available in the future. Subsequent requests by the client are permissible.","404_CLASS":t.CLIENT_ERROR,NOT_FOUND:404,405:"Method Not Allowed","405_NAME":"METHOD_NOT_ALLOWED","405_MESSAGE":"A request method is not supported for the requested resource.","405_CLASS":t.CLIENT_ERROR,METHOD_NOT_ALLOWED:405,406:"Not Acceptable","406_NAME":"NOT_ACCEPTABLE","406_MESSAGE":"The requested resource is capable of generating only content not acceptable according to the Accept headers sent in the request.","406_CLASS":t.CLIENT_ERROR,NOT_ACCEPTABLE:406,407:"Proxy Authentication Required","407_NAME":"PROXY_AUTHENTICATION_REQUIRED","407_MESSAGE":"The client must first authenticate itself with the proxy.","407_CLASS":t.CLIENT_ERROR,PROXY_AUTHENTICATION_REQUIRED:407,408:"Request Time-out","408_NAME":"REQUEST_TIMEOUT","408_MESSAGE":"The server timed out waiting for the request.","408_CLASS":t.CLIENT_ERROR,REQUEST_TIMEOUT:408,409:"Conflict","409_NAME":"CONFLICT","409_MESSAGE":"Indicates that the request could not be processed because of conflict in the request, such as an edit conflict between multiple simultaneous updates.","409_CLASS":t.CLIENT_ERROR,CONFLICT:409,410:"Gone","410_NAME":"GONE","410_MESSAGE":"Indicates that the resource requested is no longer available and will not be available again.","410_CLASS":t.CLIENT_ERROR,GONE:410,411:"Length Required","411_NAME":"LENGTH_REQUIRED","411_MESSAGE":"The request did not specify the length of its content, which is required by the requested resource.","411_CLASS":t.CLIENT_ERROR,LENGTH_REQUIRED:411,412:"Precondition Failed","412_NAME":"PRECONDITION_FAILED","412_MESSAGE":"The server does not meet one of the preconditions that the requester put on the request.","412_CLASS":t.CLIENT_ERROR,PRECONDITION_FAILED:412,413:"Request Entity Too Large","413_NAME":"REQUEST_ENTITY_TOO_LARGE","413_MESSAGE":'The request is larger than the server is willing or able to process. Previously called "Request Entity Too Large".',"413_CLASS":t.CLIENT_ERROR,REQUEST_ENTITY_TOO_LARGE:413,414:"Request-URI Too Large","414_NAME":"REQUEST_URI_TOO_LONG","414_MESSAGE":"The URI provided was too long for the server to process.","414_CLASS":t.CLIENT_ERROR,REQUEST_URI_TOO_LONG:414,415:"Unsupported Media Type","415_NAME":"UNSUPPORTED_MEDIA_TYPE","415_MESSAGE":"The request entity has a media type which the server or resource does not support.","415_CLASS":t.CLIENT_ERROR,UNSUPPORTED_MEDIA_TYPE:415,416:"Requested Range not Satisfiable","416_NAME":"REQUESTED_RANGE_NOT_SATISFIABLE","416_MESSAGE":"The client has asked for a portion of the file (byte serving), but the server cannot supply that portion.","416_CLASS":t.CLIENT_ERROR,REQUESTED_RANGE_NOT_SATISFIABLE:416,417:"Expectation Failed","417_NAME":"EXPECTATION_FAILED","417_MESSAGE":"The server cannot meet the requirements of the Expect request-header field.","417_CLASS":t.CLIENT_ERROR,EXPECTATION_FAILED:417,418:"I'm a teapot","418_NAME":"IM_A_TEAPOT","418_MESSAGE":'Any attempt to brew coffee with a teapot should result in the error code "418 I\'m a teapot". The resulting entity body MAY be short and stout.',"418_CLASS":t.CLIENT_ERROR,IM_A_TEAPOT:418,421:"Misdirected Request","421_NAME":"MISDIRECTED_REQUEST","421_MESSAGE":"The request was directed at a server that is not able to produce a response.","421_CLASS":t.CLIENT_ERROR,MISDIRECTED_REQUEST:421,422:"Unprocessable Entity","422_NAME":"UNPROCESSABLE_ENTITY","422_MESSAGE":"The request was well-formed but was unable to be followed due to semantic errors.","422_CLASS":t.CLIENT_ERROR,UNPROCESSABLE_ENTITY:422,423:"Locked","423_NAME":"LOCKED","423_MESSAGE":"The resource that is being accessed is locked.","423_CLASS":t.CLIENT_ERROR,LOCKED:423,424:"Failed Dependency","424_NAME":"FAILED_DEPENDENCY","424_MESSAGE":"The request failed because it depended on another request and that request failed.","424_CLASS":t.CLIENT_ERROR,FAILED_DEPENDENCY:424,426:"Upgrade Required","426_NAME":"UPGRADE_REQUIRED","426_MESSAGE":"The client should switch to a different protocol such as TLS/1.0, given in the Upgrade header field.","426_CLASS":t.CLIENT_ERROR,UPGRADE_REQUIRED:426,428:"Precondition Required","428_NAME":"PRECONDITION_REQUIRED","428_MESSAGE":"The origin server requires the request to be conditional.","428_CLASS":t.CLIENT_ERROR,PRECONDITION_REQUIRED:428,429:"Too Many Requests","429_NAME":"TOO_MANY_REQUESTS","429_MESSAGE":"The user has sent too many requests in a given amount of time.","429_CLASS":t.CLIENT_ERROR,TOO_MANY_REQUESTS:429,431:"Request Header Fields Too Large","431_NAME":"REQUEST_HEADER_FIELDS_TOO_LARGE","431_MESSAGE":"The server is unwilling to process the request because either an individual header field, or all the header fields collectively, are too large.","431_CLASS":t.CLIENT_ERROR,REQUEST_HEADER_FIELDS_TOO_LARGE:431,451:"Unavailable For Legal Reasons","451_NAME":"UNAVAILABLE_FOR_LEGAL_REASONS","451_MESSAGE":"A server operator has received a legal demand to deny access to a resource or to a set of resources that includes the requested resource.","451_CLASS":t.CLIENT_ERROR,UNAVAILABLE_FOR_LEGAL_REASONS:451,500:"Internal Server Error","500_NAME":"INTERNAL_SERVER_ERROR","500_MESSAGE":"A generic error message, given when an unexpected condition was encountered and no more specific message is suitable.","500_CLASS":t.SERVER_ERROR,INTERNAL_SERVER_ERROR:500,501:"Not Implemented","501_NAME":"NOT_IMPLEMENTED","501_MESSAGE":"The server either does not recognize the request method, or it lacks the ability to fulfil the request. Usually this implies future availability.","501_CLASS":t.SERVER_ERROR,NOT_IMPLEMENTED:501,502:"Bad Gateway","502_NAME":"BAD_GATEWAY","502_MESSAGE":"The server was acting as a gateway or proxy and received an invalid response from the upstream server.","502_CLASS":t.SERVER_ERROR,BAD_GATEWAY:502,503:"Service Unavailable","503_NAME":"SERVICE_UNAVAILABLE","503_MESSAGE":"The server is currently unavailable (because it is overloaded or down for maintenance). Generally, this is a temporary state.","503_CLASS":t.SERVER_ERROR,SERVICE_UNAVAILABLE:503,504:"Gateway Time-out","504_NAME":"GATEWAY_TIMEOUT","504_MESSAGE":"The server was acting as a gateway or proxy and did not receive a timely response from the upstream server.","504_CLASS":t.SERVER_ERROR,GATEWAY_TIMEOUT:504,505:"HTTP Version not Supported","505_NAME":"HTTP_VERSION_NOT_SUPPORTED","505_MESSAGE":"The server does not support the HTTP protocol version used in the request.","505_CLASS":t.SERVER_ERROR,HTTP_VERSION_NOT_SUPPORTED:505,506:"Variant Also Negotiates","506_NAME":"VARIANT_ALSO_NEGOTIATES","506_MESSAGE":"Transparent content negotiation for the request results in a circular reference.","506_CLASS":t.SERVER_ERROR,VARIANT_ALSO_NEGOTIATES:506,507:"Insufficient Storage","507_NAME":"INSUFFICIENT_STORAGE","507_MESSAGE":"The server is unable to store the representation needed to complete the request.","507_CLASS":t.SERVER_ERROR,INSUFFICIENT_STORAGE:507,508:"Loop Detected","508_NAME":"LOOP_DETECTED","508_MESSAGE":"The server detected an infinite loop while processing the request.","508_CLASS":t.SERVER_ERROR,LOOP_DETECTED:508,510:"Not Extended","510_NAME":"NOT_EXTENDED","510_MESSAGE":"Further extensions to the request are required for the server to fulfil it.","510_CLASS":t.SERVER_ERROR,NOT_EXTENDED:510,511:"Network Authentication Required","511_NAME":"NETWORK_AUTHENTICATION_REQUIRED","511_MESSAGE":"The client needs to authenticate to gain network access. Intended for use by intercepting proxies used to control access to the network.","511_CLASS":t.SERVER_ERROR,NETWORK_AUTHENTICATION_REQUIRED:511,extra:{unofficial:{103:"Checkpoint","103_NAME":"CHECKPOINT","103_MESSAGE":"Used in the resumable requests proposal to resume aborted PUT or POST requests.","103_CLASS":t.INFORMATIONAL,CHECKPOINT:103,419:"Page Expired","419_NAME":"PAGE_EXPIRED","419_MESSAGE":"Used by the Laravel Framework when a CSRF Token is missing or expired.","419_CLASS":t.CLIENT_ERROR,PAGE_EXPIRED:419,218:"This is fine","218_NAME":"THIS_IS_FINE","218_MESSAGE":"Used as a catch-all error condition for allowing response bodies to flow through Apache when ProxyErrorOverride is enabled. When ProxyErrorOverride is enabled in Apache, response bodies that contain a status code of 4xx or 5xx are automatically discarded by Apache in favor of a generic response or a custom response specified by the ErrorDocument directive.","218_CLASS":t.SUCCESSFUL,THIS_IS_FINE:218,420:"Enhance Your Calm","420_NAME":"ENHANCE_YOUR_CALM","420_MESSAGE":"Returned by version 1 of the Twitter Search and Trends API when the client is being rate limited; versions 1.1 and later use the 429 Too Many Requests response code instead.","420_CLASS":t.CLIENT_ERROR,ENHANCE_YOUR_CALM:420,450:"Blocked by Windows Parental Controls","450_NAME":"BLOCKED_BY_WINDOWS_PARENTAL_CONTROLS","450_MESSAGE":"The Microsoft extension code indicated when Windows Parental Controls are turned on and are blocking access to the requested webpage.","450_CLASS":t.CLIENT_ERROR,BLOCKED_BY_WINDOWS_PARENTAL_CONTROLS:450,498:"Invalid Token","498_NAME":"INVALID_TOKEN","498_MESSAGE":"Returned by ArcGIS for Server. Code 498 indicates an expired or otherwise invalid token.","498_CLASS":t.CLIENT_ERROR,INVALID_TOKEN:498,499:"Token Required","499_NAME":"TOKEN_REQUIRED","499_MESSAGE":"Returned by ArcGIS for Server. Code 499 indicates that a token is required but was not submitted.","499_CLASS":t.CLIENT_ERROR,TOKEN_REQUIRED:499,509:"Bandwidth Limit Exceeded","509_NAME":"BANDWIDTH_LIMIT_EXCEEDED","509_MESSAGE":"The server has exceeded the bandwidth specified by the server administrator.","509_CLASS":t.SERVER_ERROR,BANDWIDTH_LIMIT_EXCEEDED:509,530:"Site is frozen","530_NAME":"SITE_IS_FROZEN","530_MESSAGE":"Used by the Pantheon web platform to indicate a site that has been frozen due to inactivity.","530_CLASS":t.SERVER_ERROR,SITE_IS_FROZEN:530,598:"Network read timeout error","598_NAME":"NETWORK_READ_TIMEOUT_ERROR","598_MESSAGE":"Used by some HTTP proxies to signal a network read timeout behind the proxy to a client in front of the proxy.","598_CLASS":t.SERVER_ERROR,NETWORK_READ_TIMEOUT_ERROR:598},iis:{440:"Login Time-out","440_NAME":"LOGIN_TIME_OUT","440_MESSAGE":"The client's session has expired and must log in again.","440_CLASS":t.CLIENT_ERROR,LOGIN_TIME_OUT:440,449:"Retry With","449_NAME":"RETRY_WITH","449_MESSAGE":"The server cannot honour the request because the user has not provided the required information.","449_CLASS":t.CLIENT_ERROR,RETRY_WITH:449,451:"Redirect","451_NAME":"REDIRECT","451_MESSAGE":"Used in Exchange ActiveSync when either a more efficient server is available or the server cannot access the users' mailbox.","451_CLASS":t.CLIENT_ERROR,REDIRECT:451},nginx:{444:"No Response","444_NAME":"NO_RESPONSE","444_MESSAGE":"Used internally to instruct the server to return no information to the client and close the connection immediately.","444_CLASS":t.CLIENT_ERROR,NO_RESPONSE:444,494:"Request header too large","494_NAME":"REQUEST_HEADER_TOO_LARGE","494_MESSAGE":"Client sent too large request or too long header line.","494_CLASS":t.CLIENT_ERROR,REQUEST_HEADER_TOO_LARGE:494,495:"SSL Certificate Error","495_NAME":"SSL_CERTIFICATE_ERROR","495_MESSAGE":"An expansion of the 400 Bad Request response code, used when the client has provided an invalid client certificate.","495_CLASS":t.CLIENT_ERROR,SSL_CERTIFICATE_ERROR:495,496:"SSL Certificate Required","496_NAME":"SSL_CERTIFICATE_REQUIRED","496_MESSAGE":"An expansion of the 400 Bad Request response code, used when a client certificate is required but not provided.","496_CLASS":t.CLIENT_ERROR,SSL_CERTIFICATE_REQUIRED:496,497:"HTTP Request Sent to HTTPS Port","497_NAME":"HTTP_REQUEST_SENT_TO_HTTPS_PORT","497_MESSAGE":"An expansion of the 400 Bad Request response code, used when the client has made a HTTP request to a port listening for HTTPS requests.","497_CLASS":t.CLIENT_ERROR,HTTP_REQUEST_SENT_TO_HTTPS_PORT:497,499:"Client Closed Request","499_NAME":"CLIENT_CLOSED_REQUEST","499_MESSAGE":"Used when the client has closed the request before the server could send a response.","499_CLASS":t.CLIENT_ERROR,CLIENT_CLOSED_REQUEST:499},cloudflare:{520:"Unknown Error","520_NAME":"UNKNOWN_ERROR","520_MESSAGE":'The 520 error is used as a "catch-all response for when the origin server returns something unexpected", listing connection resets, large headers, and empty or invalid responses as common triggers.',"520_CLASS":t.SERVER_ERROR,UNKNOWN_ERROR:520,521:"Web Server Is Down","521_NAME":"WEB_SERVER_IS_DOWN","521_MESSAGE":"The origin server has refused the connection from Cloudflare.","521_CLASS":t.SERVER_ERROR,WEB_SERVER_IS_DOWN:521,522:"Connection Timed Out","522_NAME":"CONNECTION_TIMED_OUT","522_MESSAGE":"Cloudflare could not negotiate a TCP handshake with the origin server.","522_CLASS":t.SERVER_ERROR,CONNECTION_TIMED_OUT:522,523:"Origin Is Unreachable","523_NAME":"ORIGIN_IS_UNREACHABLE","523_MESSAGE":"Cloudflare could not reach the origin server.","523_CLASS":t.SERVER_ERROR,ORIGIN_IS_UNREACHABLE:523,524:"A Timeout Occurred","524_NAME":"A_TIMEOUT_OCCURRED","524_MESSAGE":"Cloudflare was able to complete a TCP connection to the origin server, but did not receive a timely HTTP response.","524_CLASS":t.SERVER_ERROR,A_TIMEOUT_OCCURRED:524,525:"SSL Handshake Failed","525_NAME":"SSL_HANDSHAKE_FAILED","525_MESSAGE":"Cloudflare could not negotiate a SSL/TLS handshake with the origin server.","525_CLASS":t.SERVER_ERROR,SSL_HANDSHAKE_FAILED:525,526:"Invalid SSL Certificate","526_NAME":"INVALID_SSL_CERTIFICATE","526_MESSAGE":"Cloudflare could not validate the SSL/TLS certificate that the origin server presented.","526_CLASS":t.SERVER_ERROR,INVALID_SSL_CERTIFICATE:526,527:"Railgun Error","527_NAME":"RAILGUN_ERROR","527_MESSAGE":"Error 527 indicates that the request timed out or failed after the WAN connection had been established.","527_CLASS":t.SERVER_ERROR,RAILGUN_ERROR:527}}}},672:e=>{"use strict";e.exports=e=>{if(typeof e!=="number"){throw new TypeError("Expected a number")}const t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3,microseconds:t(e*1e3)%1e3,nanoseconds:t(e*1e6)%1e3}}},720:(e,t,r)=>{"use strict";const n=r(672);const pluralize=(e,t)=>t===1?e:`${e}s`;const s=1e-7;e.exports=(e,t={})=>{if(!Number.isFinite(e)){throw new TypeError("Expected a finite number")}if(t.colonNotation){t.compact=false;t.formatSubMilliseconds=false;t.separateMilliseconds=false;t.verbose=false}if(t.compact){t.secondsDecimalDigits=0;t.millisecondsDecimalDigits=0}const r=[];const floorDecimals=(e,t)=>{const r=Math.floor(e*10**t+s);const n=Math.round(r)/10**t;return n.toFixed(t)};const add=(e,n,s,i)=>{if((r.length===0||!t.colonNotation)&&e===0&&!(t.colonNotation&&s==="m")){return}i=(i||e||"0").toString();let o;let a;if(t.colonNotation){o=r.length>0?":":"";a="";const e=i.includes(".")?i.split(".")[0].length:i.length;const t=r.length>0?2:1;i="0".repeat(Math.max(0,t-e))+i}else{o="";a=t.verbose?" "+pluralize(n,e):s}r.push(o+i+a)};const i=n(e);add(Math.trunc(i.days/365),"year","y");add(i.days%365,"day","d");add(i.hours,"hour","h");add(i.minutes,"minute","m");if(t.separateMilliseconds||t.formatSubMilliseconds||!t.colonNotation&&e<1e3){add(i.seconds,"second","s");if(t.formatSubMilliseconds){add(i.milliseconds,"millisecond","ms");add(i.microseconds,"microsecond","µs");add(i.nanoseconds,"nanosecond","ns")}else{const e=i.milliseconds+i.microseconds/1e3+i.nanoseconds/1e6;const r=typeof t.millisecondsDecimalDigits==="number"?t.millisecondsDecimalDigits:0;const n=e>=1?Math.round(e):Math.ceil(e);const s=r?e.toFixed(r):n;add(Number.parseFloat(s,10),"millisecond","ms",s)}}else{const r=e/1e3%60;const n=typeof t.secondsDecimalDigits==="number"?t.secondsDecimalDigits:1;const s=floorDecimals(r,n);const i=t.keepDecimalsOnWholeSeconds?s:s.replace(/\.0+$/,"");add(Number.parseFloat(i,10),"second","s",i)}if(r.length===0){return"0"+(t.verbose?" milliseconds":"ms")}if(t.compact){return r[0]}if(typeof t.unitCount==="number"){const e=t.colonNotation?"":" ";return r.slice(0,Math.max(t.unitCount,1)).join(e)}return t.colonNotation?r.join(""):r.join(" ")}},504:(e,t,r)=>{"use strict";const n=r(734);e.exports=()=>{const e=process.hrtime();const end=t=>n(process.hrtime(e))[t];const returnValue=()=>end("milliseconds");returnValue.rounded=()=>Math.round(end("milliseconds"));returnValue.seconds=()=>end("seconds");returnValue.nanoseconds=()=>end("nanoseconds");return returnValue}},491:e=>{"use strict";e.exports=require("assert")},300:e=>{"use strict";e.exports=require("buffer")},113:e=>{"use strict";e.exports=require("crypto")},361:e=>{"use strict";e.exports=require("events")},147:e=>{"use strict";e.exports=require("fs")},685:e=>{"use strict";e.exports=require("http")},808:e=>{"use strict";e.exports=require("net")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")},74:e=>{"use strict";e.exports=require("perf_hooks")},282:e=>{"use strict";e.exports=require("process")},477:e=>{"use strict";e.exports=require("punycode")},781:e=>{"use strict";e.exports=require("stream")},404:e=>{"use strict";e.exports=require("tls")},837:e=>{"use strict";e.exports=require("util")},144:e=>{"use strict";e.exports=require("vm")},796:e=>{"use strict";e.exports=require("zlib")}};var __webpack_module_cache__={};function __nccwpck_require__(e){var t=__webpack_module_cache__[e];if(t!==undefined){return t.exports}var r=__webpack_module_cache__[e]={exports:{}};var n=true;try{__webpack_modules__[e].call(r.exports,r,r.exports,__nccwpck_require__);n=false}finally{if(n)delete __webpack_module_cache__[e]}return r.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var __webpack_exports__={};(()=>{"use strict";var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:true});e.EdgeRuntime=e.runServer=e.createHandler=void 0;var t=__nccwpck_require__(938);Object.defineProperty(e,"createHandler",{enumerable:true,get:function(){return t.createHandler}});Object.defineProperty(e,"runServer",{enumerable:true,get:function(){return t.runServer}});var r=__nccwpck_require__(928);Object.defineProperty(e,"EdgeRuntime",{enumerable:true,get:function(){return r.EdgeRuntime}})})();module.exports=__webpack_exports__})();